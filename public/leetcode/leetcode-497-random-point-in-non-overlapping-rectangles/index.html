<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 497: Random Point in Non-overlapping Rectangles | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 497: Random Point in Non-overlapping Rectangles">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 497: Random Point in Non-overlapping Rectangles in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-497-random-point-in-non-overlapping-rectangles/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 497: Random Point in Non-overlapping Rectangles">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 497: Random Point in Non-overlapping Rectangles in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-09-18T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Math">
    <meta property="article:tag" content="Binary Search">
    <meta property="article:tag" content="Reservoir Sampling">
    <meta property="article:tag" content="Prefix Sum">
    <meta property="article:tag" content="Ordered Set">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 497: Random Point in Non-overlapping Rectangles</h1> 
            </div>
			<div class="article-post">
				<h2 id="hahahugoshortcode1165s0hbhb"><figure class="remote-image" style="text-align:center; margin: 0;">
    <div style="position: relative; width:900px; max-width:100%; padding-bottom:56.25%; overflow: hidden; border-radius:0px;">
      <img src="https://raw.githubusercontent.com/grid47/list-images/refs/heads/main/list/497.webp" 
           alt="A series of non-overlapping rectangles where random points are chosen and softly illuminated as they are selected." 
           style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
    </div>
    
      <figcaption style="font-size: 0.8em; font-weight: 300; color:#555; margin-top: 4px; line-height: 1.2;">
        Solution to LeetCode 497: Random Point in Non-overlapping Rectangles Problem
      </figcaption>
    
  </figure>
  </h2>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1165s1hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> v;
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;</span> rect;
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> area(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> r) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> (r[<span style="color:#666">2</span>] <span style="color:#666">-</span> r[<span style="color:#666">0</span>] <span style="color:#666">+</span><span style="color:#666">1</span>) <span style="color:#666">*</span> (r[<span style="color:#666">3</span>] <span style="color:#666">-</span> r[<span style="color:#666">1</span>] <span style="color:#666">+</span><span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    Solution(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> r) {
</span></span><span style="display:flex;"><span>        rect <span style="color:#666">=</span> r;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#a0a000">re</span> : r) {
</span></span><span style="display:flex;"><span>            v.push_back(area(re) <span style="color:#666">+</span> (v.empty()<span style="color:#666">?</span> <span style="color:#666">0</span> <span style="color:#666">:</span> v.back()));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> pick() {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> d <span style="color:#666">=</span> rand() <span style="color:#666">%</span> v.back();
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> idz <span style="color:#666">=</span> upper_bound(v.begin(), v.end(), d) <span style="color:#666">-</span> v.begin();
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> r <span style="color:#666">=</span> rect[idz];
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> {
</span></span><span style="display:flex;"><span>            rand() <span style="color:#666">%</span> (r[<span style="color:#666">2</span>] <span style="color:#666">-</span> r[<span style="color:#666">0</span>] <span style="color:#666">+</span><span style="color:#666">1</span>) <span style="color:#666">+</span> r[<span style="color:#666">0</span>],
</span></span><span style="display:flex;"><span>            rand() <span style="color:#666">%</span> (r[<span style="color:#666">3</span>] <span style="color:#666">-</span> r[<span style="color:#666">1</span>] <span style="color:#666">+</span><span style="color:#666">1</span>) <span style="color:#666">+</span> r[<span style="color:#666">1</span>]
</span></span><span style="display:flex;"><span>        };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * Your Solution object will be instantiated and called as such:
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * Solution* obj = new Solution(rects);
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * vector&lt;int&gt; param_1 = obj-&gt;pick();
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> */</span></span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The task is to design a solution that randomly selects a point from a set of given rectangles, with the probability of choosing a point being proportional to the area of the rectangle. Each rectangle is defined by its coordinates in a 2D space. For example, given rectangles represented as <code>[x1, y1, x2, y2]</code>, the task requires an efficient method to select points within these rectangles such that larger rectangles have a higher chance of selection than smaller ones.</p>
<h3 id="approach">Approach</h3>
<p>This solution utilizes an area-weighted approach to ensure that larger rectangles are more likely to be chosen. We calculate and store cumulative areas for each rectangle, which we use to randomly select rectangles with a probability proportional to their area. Here’s a breakdown of the approach:</p>
<ol>
<li>
<p><strong>Calculate Areas</strong>:</p>
<ul>
<li>We compute the area of each rectangle based on its coordinates. For a rectangle defined by <code>[x1, y1, x2, y2]</code>, the area can be calculated as <code>(x2 - x1 + 1) * (y2 - y1 + 1)</code>. This formula accounts for inclusive boundaries.</li>
</ul>
</li>
<li>
<p><strong>Cumulative Area Array</strong>:</p>
<ul>
<li>We maintain a cumulative area array <code>v</code> to keep track of the cumulative areas of all rectangles. This allows us to perform a binary search later to efficiently select a rectangle with the desired probability.</li>
<li>Each element in <code>v</code> represents the cumulative area up to that rectangle, making it easy to determine the probability distribution by the relative area size of each rectangle.</li>
</ul>
</li>
<li>
<p><strong>Random Selection</strong>:</p>
<ul>
<li>To pick a point, we generate a random integer <code>d</code> between <code>0</code> and the total area (the last element in <code>v</code>).</li>
<li>Using binary search (<code>upper_bound</code>), we find which rectangle this random value falls into, based on the cumulative area values stored in <code>v</code>.</li>
<li>Once we select the rectangle, we randomly pick a point within its boundaries by generating random x and y coordinates.</li>
</ul>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<p>This solution consists of three main parts: an area calculation function, the constructor, and the <code>pick</code> function.</p>
<ol>
<li>
<p><strong>Helper Function for Area Calculation (<code>area</code>)</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">area</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> r) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> (r[<span style="color:#666">2</span>] <span style="color:#666">-</span> r[<span style="color:#666">0</span>] <span style="color:#666">+</span> <span style="color:#666">1</span>) <span style="color:#666">*</span> (r[<span style="color:#666">3</span>] <span style="color:#666">-</span> r[<span style="color:#666">1</span>] <span style="color:#666">+</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>This function takes a rectangle <code>r</code> represented by <code>[x1, y1, x2, y2]</code> and returns its area. The formula <code>(r[2] - r[0] + 1) * (r[3] - r[1] + 1)</code> computes the area by accounting for the inclusive nature of the boundaries.</li>
</ul>
</li>
<li>
<p><strong>Constructor (<code>Solution</code>)</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>Solution(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> r) {
</span></span><span style="display:flex;"><span>    rect <span style="color:#666">=</span> r;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">for</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#a0a000">re</span> : r) {
</span></span><span style="display:flex;"><span>        v.push_back(area(re) <span style="color:#666">+</span> (v.empty()<span style="color:#666">?</span> <span style="color:#666">0</span> <span style="color:#666">:</span> v.back()));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>Parameter Initialization</strong>: The constructor initializes the <code>rect</code> vector with the input rectangles.</li>
<li><strong>Cumulative Area Calculation</strong>: For each rectangle <code>re</code> in <code>r</code>, we compute its area using <code>area(re)</code> and add it to <code>v</code>. If <code>v</code> is empty, we simply push the area of the first rectangle; otherwise, we add the area of the current rectangle to the last value in <code>v</code> (cumulative sum).</li>
<li>After processing all rectangles, <code>v</code> stores the cumulative areas, with the last element being the total area covered by all rectangles.</li>
</ul>
</li>
<li>
<p><strong>Random Point Picker (<code>pick</code>)</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> pick() {
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> d <span style="color:#666">=</span> rand() <span style="color:#666">%</span> v.back();
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> idz <span style="color:#666">=</span> upper_bound(v.begin(), v.end(), d) <span style="color:#666">-</span> v.begin();
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> r <span style="color:#666">=</span> rect[idz];
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> {
</span></span><span style="display:flex;"><span>        rand() <span style="color:#666">%</span> (r[<span style="color:#666">2</span>] <span style="color:#666">-</span> r[<span style="color:#666">0</span>] <span style="color:#666">+</span> <span style="color:#666">1</span>) <span style="color:#666">+</span> r[<span style="color:#666">0</span>],
</span></span><span style="display:flex;"><span>        rand() <span style="color:#666">%</span> (r[<span style="color:#666">3</span>] <span style="color:#666">-</span> r[<span style="color:#666">1</span>] <span style="color:#666">+</span> <span style="color:#666">1</span>) <span style="color:#666">+</span> r[<span style="color:#666">1</span>]
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>Random Area Selection</strong>: A random integer <code>d</code> is generated in the range <code>[0, v.back() - 1]</code>, which represents a random point within the total cumulative area.</li>
<li><strong>Rectangle Selection via Binary Search</strong>: Using <code>upper_bound</code>, we find the first rectangle whose cumulative area exceeds <code>d</code>. This gives us the index <code>idz</code> of the selected rectangle.</li>
<li><strong>Random Point within Selected Rectangle</strong>: Once the rectangle is chosen, we generate random <code>x</code> and <code>y</code> coordinates within the rectangle&rsquo;s boundaries:
<ul>
<li><code>x</code> is chosen as <code>rand() % (r[2] - r[0] + 1) + r[0]</code>.</li>
<li><code>y</code> is chosen as <code>rand() % (r[3] - r[1] + 1) + r[1]</code>.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="complexity">Complexity</h3>
<ol>
<li>
<p><strong>Time Complexity</strong>:</p>
<ul>
<li><strong>Constructor (<code>Solution</code>)</strong>: Calculating the areas and cumulative sums takes <code>O(n)</code>, where <code>n</code> is the number of rectangles.</li>
<li><strong>Pick Function (<code>pick</code>)</strong>: Finding the rectangle using <code>upper_bound</code> is <code>O(log n)</code>, and selecting a random point within the rectangle is <code>O(1)</code>.</li>
</ul>
</li>
<li>
<p><strong>Space Complexity</strong>:</p>
<ul>
<li>The space complexity is <code>O(n)</code> for storing the cumulative area array <code>v</code> and the input rectangles <code>rect</code>.</li>
</ul>
</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>This solution is optimized for selecting a random point from multiple rectangles with an area-weighted probability. By precomputing cumulative areas, we ensure that larger rectangles are more likely to be chosen. The use of binary search within <code>pick</code> allows for efficient rectangle selection, making this approach both time-efficient and scalable. The implementation handles rectangles in 2D space with ease, ensuring that each rectangle’s area directly impacts the selection probability, making this solution ideal for applications requiring weighted random selection.</p>
<p><a href="https://leetcode.com/problems/random-point-in-non-overlapping-rectangles/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/8kwPXbTMSnk?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
