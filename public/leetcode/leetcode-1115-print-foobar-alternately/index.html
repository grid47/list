<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 1115: Print FooBar Alternately | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1115: Print FooBar Alternately">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1115: Print FooBar Alternately in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-1115-print-foobar-alternately/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1115: Print FooBar Alternately">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1115: Print FooBar Alternately in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-07-18T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Concurrency">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 1115: Print FooBar Alternately</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode69s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">FooBar</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">private</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span>    mutex mtx1, mtx2;
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    FooBar(<span style="color:#0b0;font-weight:bold">int</span> n) {
</span></span><span style="display:flex;"><span>        mtx2.lock();
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">-&gt;</span>n <span style="color:#666">=</span> n;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">foo</span>(function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> printFoo) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            mtx1.lock();
</span></span><span style="display:flex;"><span>        	<span style="color:#080;font-style:italic">// printFoo() outputs &#34;foo&#34;. Do not change or remove this line.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        	printFoo();
</span></span><span style="display:flex;"><span>            mtx2.unlock();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">bar</span>(function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> printBar) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            mtx2.lock();
</span></span><span style="display:flex;"><span>        	<span style="color:#080;font-style:italic">// printBar() outputs &#34;bar&#34;. Do not change or remove this line.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        	printBar();
</span></span><span style="display:flex;"><span>            mtx1.unlock();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The task is to implement a class <code>FooBar</code> that can synchronize the execution of two methods: <code>foo</code> and <code>bar</code>. The goal is to ensure that:</p>
<ol>
<li>The <code>foo</code> method prints &ldquo;foo&rdquo;.</li>
<li>The <code>bar</code> method prints &ldquo;bar&rdquo;.</li>
</ol>
<p>The challenge is to ensure that these methods are called in the correct order: <code>foo</code> must be called before <code>bar</code>, and this must happen alternately for a specified number of times. If <code>n</code> is the number of times the printing should occur, then the expected output sequence is: <code>foo</code>, <code>bar</code>, <code>foo</code>, <code>bar</code>, &hellip;, continuing until both functions have printed <code>n</code> times.</p>
<h3 id="approach">Approach</h3>
<p>To solve this problem, we can use two mutexes to manage synchronization between the <code>foo</code> and <code>bar</code> methods. The main steps involved in the implementation are:</p>
<ol>
<li><strong>Initialization</strong>: Two mutexes are declared: <code>mtx1</code> for controlling access to the <code>foo</code> method and <code>mtx2</code> for controlling access to the <code>bar</code> method. Initially, <code>mtx2</code> is locked to prevent <code>bar</code> from executing until <code>foo</code> has run at least once.</li>
<li><strong>Method Implementations</strong>:
<ul>
<li>In the <code>foo</code> method, the thread locks <code>mtx1</code>, prints &ldquo;foo&rdquo;, and then unlocks <code>mtx2</code> to allow the <code>bar</code> method to execute.</li>
<li>In the <code>bar</code> method, the thread locks <code>mtx2</code>, prints &ldquo;bar&rdquo;, and then unlocks <code>mtx1</code> to allow the <code>foo</code> method to execute.</li>
</ul>
</li>
<li><strong>Thread Safety</strong>: The use of mutexes ensures that only one thread can execute its respective function at a time, enforcing the correct order of execution.</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<ol>
<li>
<p><strong>Class Definition</strong>: The <code>FooBar</code> class is defined with private members for synchronization and tracking the number of iterations.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">FooBar</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">private</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> n;                    <span style="color:#080;font-style:italic">// Number of times to print &#34;foo&#34; and &#34;bar&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    mutex mtx1, mtx2;        <span style="color:#080;font-style:italic">// Mutexes for synchronization
</span></span></span></code></pre></div></li>
<li>
<p><strong>Constructor</strong>: The constructor initializes <code>n</code> and locks <code>mtx2</code>, ensuring that <code>bar</code> cannot be executed until after <code>foo</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>        FooBar(<span style="color:#0b0;font-weight:bold">int</span> n) {
</span></span><span style="display:flex;"><span>            mtx2.lock();      <span style="color:#080;font-style:italic">// Lock mtx2 to block bar initially
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">-&gt;</span>n <span style="color:#666">=</span> n;      <span style="color:#080;font-style:italic">// Set the number of iterations
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        }
</span></span></code></pre></div></li>
<li>
<p><strong>Foo Method</strong>: The <code>foo</code> method loops <code>n</code> times, locking <code>mtx1</code> before printing &ldquo;foo&rdquo; and unlocking <code>mtx2</code> afterward.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">foo</span>(function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> printFoo) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>                mtx1.lock();                  <span style="color:#080;font-style:italic">// Lock for foo
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                printFoo();                    <span style="color:#080;font-style:italic">// Print &#34;foo&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                mtx2.unlock();                 <span style="color:#080;font-style:italic">// Unlock for bar
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            }
</span></span><span style="display:flex;"><span>        }
</span></span></code></pre></div></li>
<li>
<p><strong>Bar Method</strong>: The <code>bar</code> method also loops <code>n</code> times, locking <code>mtx2</code> before printing &ldquo;bar&rdquo; and unlocking <code>mtx1</code> afterward.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">bar</span>(function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> printBar) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>                mtx2.lock();                  <span style="color:#080;font-style:italic">// Lock for bar
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                printBar();                   <span style="color:#080;font-style:italic">// Print &#34;bar&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                mtx1.unlock();                <span style="color:#080;font-style:italic">// Unlock for foo
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div></li>
</ol>
<h3 id="complexity-analysis">Complexity Analysis</h3>
<ul>
<li><strong>Time Complexity</strong>: The time complexity of each method is (O(n)), where (n) is the number of times the printing occurs. Each method will run exactly (n) iterations, performing constant-time operations (locking, printing, unlocking).</li>
<li><strong>Space Complexity</strong>: The space complexity is (O(1)) since the space used is constant and does not grow with the input size. We only use a fixed number of variables (e.g., <code>n</code>, mutexes).</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>The provided C++ code successfully implements a solution for synchronizing the printing of two functions, <code>foo</code> and <code>bar</code>, in the specified alternating order. By leveraging two mutexes, the solution effectively manages access to shared resources, ensuring thread-safe execution and the correct sequence of function calls.</p>
<p>This implementation serves as an excellent example of how to handle synchronization in multithreaded programming. The use of mutexes and careful management of thread execution order are critical concepts in concurrent programming, making this code a valuable reference for developers working on similar synchronization challenges.</p>
<p>The simplicity of the design, combined with the effectiveness of mutexes, makes this code both efficient and easy to understand. It provides a clear approach to ensuring that two methods can be executed in an alternating fashion while maintaining the integrity of shared resources.</p>
<p>Overall, the <code>FooBar</code> class provides a practical solution to a common problem in concurrent programming, demonstrating important techniques in synchronization and thread management. Readers interested in these concepts will find this example informative and applicable to their own programming tasks.</p>
<p><a href="https://leetcode.com/problems/print-foobar-alternately/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>
<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
