<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 1040: Moving Stones Until Consecutive II | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1040: Moving Stones Until Consecutive II">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1040: Moving Stones Until Consecutive II in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-1040-moving-stones-until-consecutive-ii/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1040: Moving Stones Until Consecutive II">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1040: Moving Stones Until Consecutive II in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-07-26T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Math">
    <meta property="article:tag" content="Two Pointers">
    <meta property="article:tag" content="Sorting">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 1040: Moving Stones Until Consecutive II</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode38s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> numMovesStonesII(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> pos) {
</span></span><span style="display:flex;"><span>        sort(pos.begin(), pos.end());
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> low <span style="color:#666">=</span> INT_MAX;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>, n <span style="color:#666">=</span> pos.size();
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">while</span>(pos[i] <span style="color:#666">-</span> pos[j] <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">&gt;</span> n) j<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">int</span> cnt <span style="color:#666">=</span> i <span style="color:#666">-</span> j <span style="color:#666">+</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(cnt <span style="color:#666">==</span> n <span style="color:#666">-</span> <span style="color:#666">1</span> <span style="color:#666">&amp;&amp;</span> pos[i] <span style="color:#666">-</span> pos[j] <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">==</span> n <span style="color:#666">-</span> <span style="color:#666">1</span>)
</span></span><span style="display:flex;"><span>                low <span style="color:#666">=</span> min(low, <span style="color:#666">2</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">else</span> low <span style="color:#666">=</span> min(low, n <span style="color:#666">-</span> cnt);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span>{low, max(pos[n <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">-</span> pos[<span style="color:#666">1</span>] <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">-</span> (n <span style="color:#666">-</span> <span style="color:#666">1</span>), pos[n <span style="color:#666">-</span> <span style="color:#666">2</span>] <span style="color:#666">-</span> pos[<span style="color:#666">0</span>] <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">-</span> (n <span style="color:#666">-</span> <span style="color:#666">1</span>))};
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem involves moving stones positioned at distinct integers along a line. Each stone can be moved to an adjacent position, and we aim to determine two values:</p>
<ol>
<li>The minimum number of moves required to arrange the stones in a continuous segment.</li>
<li>The maximum number of moves possible when rearranging the stones under specific constraints.</li>
</ol>
<h3 id="approach">Approach</h3>
<p>To solve the problem, we can break it down into several key steps:</p>
<ol>
<li>
<p><strong>Sorting the Positions</strong>: The first step is to sort the array of stone positions. This will help us easily calculate the number of stones in any segment of the line.</p>
</li>
<li>
<p><strong>Finding the Minimum Moves</strong>:</p>
<ul>
<li>Use a sliding window approach to calculate how many stones can fit in a continuous segment of length equal to the total number of stones.</li>
<li>Maintain a variable to track the minimum number of moves needed to achieve the goal.</li>
<li>Check for special conditions where moving only one stone might yield a quicker solution.</li>
</ul>
</li>
<li>
<p><strong>Calculating Maximum Moves</strong>: The maximum number of moves is determined by the gaps between the outermost stones. Specifically, evaluate how many positions can be left empty on the ends after filling in the middle.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<ol>
<li>
<p><strong>Class Definition</strong>: The solution is encapsulated within a class named <code>Solution</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span></code></pre></div></li>
<li>
<p><strong>Function Signature</strong>:</p>
<ul>
<li>The <code>numMovesStonesII</code> function takes a vector of integers <code>pos</code>, which represents the positions of the stones, and returns a vector of two integers representing the minimum and maximum moves.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> numMovesStonesII(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> pos) {
</span></span></code></pre></div></li>
<li>
<p><strong>Sorting the Positions</strong>:</p>
<ul>
<li>The positions of the stones are sorted in ascending order to facilitate easier calculations for continuous segments.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>sort(pos.begin(), pos.end());
</span></span></code></pre></div></li>
<li>
<p><strong>Initializing Variables</strong>:</p>
<ul>
<li>We initialize <code>low</code> to <code>INT_MAX</code> to keep track of the minimum moves.</li>
<li>Two pointers <code>j</code> and <code>n</code> are set, where <code>j</code> is for the sliding window, and <code>n</code> is the size of the positions vector.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> low <span style="color:#666">=</span> INT_MAX;
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>, n <span style="color:#666">=</span> pos.size();
</span></span></code></pre></div></li>
<li>
<p><strong>Iterating Through Stone Positions</strong>:</p>
<ul>
<li>We use a loop to iterate through each stone position with index <code>i</code>.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span></code></pre></div></li>
<li>
<p><strong>Adjusting the Sliding Window</strong>:</p>
<ul>
<li>For each position, adjust the sliding window with <code>j</code> to ensure the segment of stones can fit within a continuous block of size <code>n</code>. This is done by checking if the current stone&rsquo;s position minus the starting stone&rsquo;s position plus one exceeds <code>n</code>.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">while</span>(pos[i] <span style="color:#666">-</span> pos[j] <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">&gt;</span> n) j<span style="color:#666">++</span>;
</span></span></code></pre></div></li>
<li>
<p><strong>Calculating Count of Stones in the Segment</strong>:</p>
<ul>
<li>The variable <code>cnt</code> calculates how many stones fit in the current segment from <code>j</code> to <code>i</code>.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> cnt <span style="color:#666">=</span> i <span style="color:#666">-</span> j <span style="color:#666">+</span> <span style="color:#666">1</span>;
</span></span></code></pre></div></li>
<li>
<p><strong>Determining Minimum Moves</strong>:</p>
<ul>
<li>If we have <code>n - 1</code> stones in the current segment and they exactly fill the space, we set <code>low</code> to 2 (special case where one stone can be moved out).</li>
<li>Otherwise, the minimum moves would be the number of gaps.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">if</span>(cnt <span style="color:#666">==</span> n <span style="color:#666">-</span> <span style="color:#666">1</span> <span style="color:#666">&amp;&amp;</span> pos[i] <span style="color:#666">-</span> pos[j] <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">==</span> n <span style="color:#666">-</span> <span style="color:#666">1</span>)
</span></span><span style="display:flex;"><span>    low <span style="color:#666">=</span> min(low, <span style="color:#666">2</span>);
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">else</span> 
</span></span><span style="display:flex;"><span>    low <span style="color:#666">=</span> min(low, n <span style="color:#666">-</span> cnt);
</span></span></code></pre></div></li>
<li>
<p><strong>Calculating Maximum Moves</strong>:</p>
<ul>
<li>The maximum number of moves is calculated based on the largest gaps between the outermost stones, ensuring we consider the positions of the first two and the last two stones.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span>{
</span></span><span style="display:flex;"><span>    low, 
</span></span><span style="display:flex;"><span>    max(pos[n <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">-</span> pos[<span style="color:#666">1</span>] <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">-</span> (n <span style="color:#666">-</span> <span style="color:#666">1</span>), pos[n <span style="color:#666">-</span> <span style="color:#666">2</span>] <span style="color:#666">-</span> pos[<span style="color:#666">0</span>] <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">-</span> (n <span style="color:#666">-</span> <span style="color:#666">1</span>))
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div></li>
</ol>
<h3 id="complexity-analysis">Complexity Analysis</h3>
<ul>
<li>
<p><strong>Time Complexity</strong>: The overall time complexity of this solution is (O(n \log n)), where (n) is the number of stones. This complexity arises primarily from the sorting step.</p>
</li>
<li>
<p><strong>Space Complexity</strong>: The space complexity is (O(1)) in terms of extra space since we are not using any additional data structures that grow with input size (excluding the input and output).</p>
</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>The provided code effectively calculates the minimum and maximum number of moves required to align stones positioned along a line using a sorting and sliding window approach.</p>
<p>By first sorting the positions and then utilizing a two-pointer technique, we can efficiently determine how many moves are necessary to create a continuous segment of stones. The sliding window technique ensures that we only examine feasible segments of positions, thus optimizing our calculations.</p>
<p>This solution is not only efficient but also clearly structured, making it easy to understand and maintain. The use of the minimum and maximum moves calculations provides a comprehensive overview of the possible configurations of the stones, demonstrating the effectiveness of algorithmic problem-solving in combinatorial scenarios.</p>
<p>In summary, the <code>numMovesStonesII</code> function presents a robust and efficient method for addressing the challenge of stone positioning, which can be applicable in various scenarios within computational geometry and optimization problems.</p>
<p><a href="https://leetcode.com/problems/moving-stones-until-consecutive-ii/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/4Xhq2NDbA-I?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
