<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 1186: Maximum Subarray Sum with One Deletion | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1186: Maximum Subarray Sum with One Deletion">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1186: Maximum Subarray Sum with One Deletion in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-1186-maximum-subarray-sum-with-one-deletion/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1186: Maximum Subarray Sum with One Deletion">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1186: Maximum Subarray Sum with One Deletion in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-07-11T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Dynamic Programming">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 1186: Maximum Subarray Sum with One Deletion</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode97s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> maximumSum(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> arr) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>, n <span style="color:#666">=</span> arr.size();
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> curr_mx <span style="color:#666">=</span> arr[<span style="color:#666">0</span>], overall_mx <span style="color:#666">=</span> arr[<span style="color:#666">0</span>];
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> f(n), b(n);
</span></span><span style="display:flex;"><span>        f[<span style="color:#666">0</span>] <span style="color:#666">=</span> arr[<span style="color:#666">0</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">1</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            curr_mx <span style="color:#666">=</span> max(arr[i], curr_mx <span style="color:#666">+</span> arr[i]);
</span></span><span style="display:flex;"><span>            overall_mx <span style="color:#666">=</span> max(curr_mx, overall_mx);
</span></span><span style="display:flex;"><span>            f[i] <span style="color:#666">=</span> curr_mx;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        curr_mx <span style="color:#666">=</span> overall_mx <span style="color:#666">=</span> b[n<span style="color:#666">-</span><span style="color:#666">1</span>] <span style="color:#666">=</span> arr[n<span style="color:#666">-</span><span style="color:#666">1</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> n<span style="color:#666">-</span><span style="color:#666">2</span>; i <span style="color:#666">&gt;=</span> <span style="color:#666">0</span>; i<span style="color:#666">--</span>){
</span></span><span style="display:flex;"><span>            curr_mx <span style="color:#666">=</span> max(arr[i], curr_mx <span style="color:#666">+</span> arr[i]);
</span></span><span style="display:flex;"><span>            overall_mx <span style="color:#666">=</span> max(overall_mx, curr_mx);
</span></span><span style="display:flex;"><span>            b[i] <span style="color:#666">=</span> curr_mx;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        res <span style="color:#666">=</span> overall_mx;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">1</span>; i <span style="color:#666">&lt;</span> n<span style="color:#666">-</span><span style="color:#666">1</span>; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> max(res, f[i<span style="color:#666">-</span><span style="color:#666">1</span>]<span style="color:#666">+</span>b[i<span style="color:#666">+</span><span style="color:#666">1</span>]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The goal is to find the maximum sum of a contiguous subarray in a given array of integers, with the added twist that you may delete at most one element from the array. If you decide to delete one element, the remaining subarrays can still be combined to maximize the overall sum.</p>
<p>For example, given an array <code>[-1, -2, 0, 3]</code>, the maximum sum after possibly removing an element is <code>3</code> (removing <code>-1</code> or <code>-2</code>). The solution needs to efficiently handle both the case of deleting an element and not deleting any element.</p>
<h3 id="approach">Approach</h3>
<p>The solution utilizes a dynamic programming approach to keep track of two primary calculations:</p>
<ol>
<li><strong>Maximum Subarray Sum Ending at Each Index</strong>: Calculate the maximum sum of subarrays ending at each index, using Kadane&rsquo;s algorithm.</li>
<li><strong>Maximum Subarray Sum Starting from Each Index</strong>: Calculate the maximum sum of subarrays starting from each index.</li>
</ol>
<p>By combining these two arrays, we can efficiently compute the maximum sum possible after removing at most one element.</p>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> maximumSum(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> arr) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>, n <span style="color:#666">=</span> arr.size();
</span></span></code></pre></div><ul>
<li><strong>Lines 1-3</strong>: The <code>Solution</code> class contains the <code>maximumSum</code> method, which takes a vector of integers <code>arr</code> as input.</li>
<li>The variable <code>res</code> is initialized to hold the result, while <code>n</code> is the size of the array.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> curr_mx <span style="color:#666">=</span> arr[<span style="color:#666">0</span>], overall_mx <span style="color:#666">=</span> arr[<span style="color:#666">0</span>];
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> f(n), b(n);
</span></span><span style="display:flex;"><span>        f[<span style="color:#666">0</span>] <span style="color:#666">=</span> arr[<span style="color:#666">0</span>];
</span></span></code></pre></div><ul>
<li><strong>Lines 4-7</strong>: Two variables, <code>curr_mx</code> and <code>overall_mx</code>, are initialized to the first element of the array.</li>
<li>Two vectors <code>f</code> and <code>b</code> are created to store the maximum subarray sums ending at and starting from each index, respectively.</li>
<li><code>f[0]</code> is set to the first element since it is the only subarray possible at index 0.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">1</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            curr_mx <span style="color:#666">=</span> max(arr[i], curr_mx <span style="color:#666">+</span> arr[i]);
</span></span><span style="display:flex;"><span>            overall_mx <span style="color:#666">=</span> max(curr_mx, overall_mx);
</span></span><span style="display:flex;"><span>            f[i] <span style="color:#666">=</span> curr_mx;
</span></span><span style="display:flex;"><span>        }
</span></span></code></pre></div><ul>
<li><strong>Lines 8-12</strong>: This loop iterates through the array from the second element onwards.</li>
<li><code>curr_mx</code> is updated to be the maximum of either the current element alone (<code>arr[i]</code>) or the sum of the current element and the maximum subarray sum up to the previous element (<code>curr_mx + arr[i]</code>).</li>
<li><code>overall_mx</code> is updated to track the maximum value found so far.</li>
<li>The maximum subarray sum ending at each index <code>i</code> is stored in <code>f[i]</code>.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        curr_mx <span style="color:#666">=</span> overall_mx <span style="color:#666">=</span> b[n<span style="color:#666">-</span><span style="color:#666">1</span>] <span style="color:#666">=</span> arr[n<span style="color:#666">-</span><span style="color:#666">1</span>];
</span></span></code></pre></div><ul>
<li><strong>Line 13</strong>: The variables <code>curr_mx</code> and <code>overall_mx</code> are reset for the next calculation. <code>b[n-1]</code> is initialized to the last element, as it&rsquo;s the only subarray at the last index.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> n<span style="color:#666">-</span><span style="color:#666">2</span>; i <span style="color:#666">&gt;=</span> <span style="color:#666">0</span>; i<span style="color:#666">--</span>){
</span></span><span style="display:flex;"><span>            curr_mx <span style="color:#666">=</span> max(arr[i], curr_mx <span style="color:#666">+</span> arr[i]);
</span></span><span style="display:flex;"><span>            overall_mx <span style="color:#666">=</span> max(overall_mx, curr_mx);
</span></span><span style="display:flex;"><span>            b[i] <span style="color:#666">=</span> curr_mx;
</span></span><span style="display:flex;"><span>        }
</span></span></code></pre></div><ul>
<li><strong>Lines 14-18</strong>: This loop iterates backward through the array, similar to the previous loop.</li>
<li>The maximum subarray sums starting from each index are calculated and stored in the vector <code>b</code>.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        res <span style="color:#666">=</span> overall_mx;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">1</span>; i <span style="color:#666">&lt;</span> n<span style="color:#666">-</span><span style="color:#666">1</span>; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> max(res, f[i<span style="color:#666">-</span><span style="color:#666">1</span>]<span style="color:#666">+</span>b[i<span style="color:#666">+</span><span style="color:#666">1</span>]);
</span></span><span style="display:flex;"><span>        }
</span></span></code></pre></div><ul>
<li><strong>Lines 19-22</strong>: The variable <code>res</code> is first set to <code>overall_mx</code>, which represents the maximum sum without deleting any element.</li>
<li>A second loop iterates from the second to the second-to-last element of the array. For each index <code>i</code>, it calculates the sum of the maximum subarray sum ending just before <code>i</code> (<code>f[i-1]</code>) and the maximum subarray sum starting just after <code>i</code> (<code>b[i+1]</code>), which simulates the effect of deleting the element at index <code>i</code>.</li>
<li>The result is updated to the maximum of the current <code>res</code> and the combined sums.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ul>
<li><strong>Line 23</strong>: Finally, the method returns the maximum sum found.</li>
</ul>
<h3 id="complexity">Complexity</h3>
<ol>
<li>
<p><strong>Time Complexity</strong>:</p>
<ul>
<li>The algorithm consists of two linear passes through the array, resulting in a total time complexity of (O(n)).</li>
</ul>
</li>
<li>
<p><strong>Space Complexity</strong>:</p>
<ul>
<li>The solution uses (O(n)) space for the two additional vectors <code>f</code> and <code>b</code> that store intermediate results.</li>
</ul>
</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>The <code>maximumSum</code> function efficiently computes the maximum possible sum of a contiguous subarray, considering the option to remove at most one element. By utilizing dynamic programming techniques and Kadane&rsquo;s algorithm for tracking maximum sums, the solution is both optimal and straightforward. This approach provides a robust means of tackling the problem while maintaining clarity and efficiency, making it suitable for larger input sizes. The ability to handle both cases—removing an element or not—ensures that all potential solutions are considered, leading to the best possible outcome.</p>
<p><a href="https://leetcode.com/problems/maximum-subarray-sum-with-one-deletion/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/EWCdm1cKtrA?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
