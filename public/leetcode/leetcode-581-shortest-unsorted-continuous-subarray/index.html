<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 581: Shortest Unsorted Continuous Subarray | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 581: Shortest Unsorted Continuous Subarray">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 581: Shortest Unsorted Continuous Subarray in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-581-shortest-unsorted-continuous-subarray/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 581: Shortest Unsorted Continuous Subarray">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 581: Shortest Unsorted Continuous Subarray in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-09-09T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Two Pointers">
    <meta property="article:tag" content="Stack">
    <meta property="article:tag" content="Greedy">
    <meta property="article:tag" content="Sorting">
    <meta property="article:tag" content="Monotonic Stack">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 581: Shortest Unsorted Continuous Subarray</h1> 
            </div>
			<div class="article-post">
				<h2 id="hahahugoshortcode1207s0hbhb"><figure class="remote-image" style="text-align:center; margin: 0;">
    <div style="position: relative; width:900px; max-width:100%; padding-bottom:56.25%; overflow: hidden; border-radius:0px;">
      <img src="https://raw.githubusercontent.com/grid47/list-images/refs/heads/main/list/581.webp" 
           alt="An array where the shortest unsorted subarray is found, each element softly glowing as it is highlighted." 
           style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
    </div>
    
      <figcaption style="font-size: 0.8em; font-weight: 300; color:#555; margin-top: 4px; line-height: 1.2;">
        Solution to LeetCode 581: Shortest Unsorted Continuous Subarray Problem
      </figcaption>
    
  </figure>
  </h2>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1207s1hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> findUnsortedSubarray(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> nums) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> mn <span style="color:#666">=</span> <span style="color:#666">0</span>, mx <span style="color:#666">=</span> <span style="color:#666">0</span>, n <span style="color:#666">=</span> nums.size();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span>pair<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;</span> tmp(n);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>        tmp[i] <span style="color:#666">=</span> make_pair(nums[i], i);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        sort(tmp.begin(), tmp.end());
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> start <span style="color:#666">=</span> <span style="color:#666">-</span><span style="color:#666">1</span>, end <span style="color:#666">=</span> <span style="color:#666">-</span><span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">!=</span> tmp[i].second)
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">if</span> (start <span style="color:#666">==</span> <span style="color:#666">-</span><span style="color:#666">1</span>) start <span style="color:#666">=</span> i;
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">else</span>               end <span style="color:#666">=</span> i;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(start <span style="color:#666">==</span> <span style="color:#666">-</span><span style="color:#666">1</span>) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> end <span style="color:#666">-</span> (start <span style="color:#666">-</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement:</h3>
<p>The problem asks us to find the shortest subarray in an array of integers <code>nums</code> that, if sorted, would result in the entire array being sorted. In other words, we need to identify a contiguous subarray that is out of order and should be sorted so that the entire array becomes sorted.</p>
<p>We are given an integer array <code>nums</code>, and we need to find the length of this subarray. If the array is already sorted, the result should be <code>0</code>.</p>
<h3 id="approach">Approach:</h3>
<p>To solve this problem, we need to identify the range within the array that is out of order. The strategy is to:</p>
<ol>
<li>Sort the array, keeping track of the original indices of the elements.</li>
<li>Compare the sorted version with the original array to find the starting and ending positions of the unsorted subarray.</li>
<li>Calculate the length of the subarray between the starting and ending indices.</li>
</ol>
<p>We can break down the solution into several steps:</p>
<ol>
<li>
<p><strong>Sorting the Array</strong>: First, we sort the array, but while doing this, we need to keep track of the original indices. This is crucial because the sorted array will allow us to identify which elements are misplaced.</p>
</li>
<li>
<p><strong>Identify Start and End Indices</strong>: We then iterate through both the original and sorted arrays to find where the original array deviates from the sorted array. This deviation gives us the boundaries of the unsorted subarray.</p>
</li>
<li>
<p><strong>Return the Length</strong>: Once we have identified the <code>start</code> and <code>end</code> indices of the unsorted subarray, we can easily compute the length of the subarray.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step):</h3>
<h4 id="step-1-initialize-variables-and-prepare-for-sorting">Step 1: Initialize Variables and Prepare for Sorting</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> mn <span style="color:#666">=</span> <span style="color:#666">0</span>, mx <span style="color:#666">=</span> <span style="color:#666">0</span>, n <span style="color:#666">=</span> nums.size();
</span></span><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span>pair<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;</span> tmp(n);
</span></span></code></pre></div><ul>
<li>We start by defining the necessary variables. <code>mn</code> and <code>mx</code> are placeholders for tracking the minimum and maximum values, but they aren&rsquo;t used in this version of the solution.</li>
<li><code>n</code> stores the size of the input array <code>nums</code>.</li>
<li><code>tmp</code> is a vector of pairs, where each pair consists of an element from the original array and its corresponding index. This will help us track the original positions of the elements after sorting.</li>
</ul>
<h4 id="step-2-create-pairs-of-elements-and-indices">Step 2: Create Pairs of Elements and Indices</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>    tmp[i] <span style="color:#666">=</span> make_pair(nums[i], i);
</span></span></code></pre></div><ul>
<li>We iterate through the array and populate <code>tmp</code> with pairs of values from the <code>nums</code> array and their original indices.</li>
</ul>
<h4 id="step-3-sort-the-array-of-pairs">Step 3: Sort the Array of Pairs</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>sort(tmp.begin(), tmp.end());
</span></span></code></pre></div><ul>
<li>We sort the array <code>tmp</code> based on the values of the elements (the first part of each pair). This will allow us to compare the original array with the sorted version to identify where the elements are out of order.</li>
</ul>
<h4 id="step-4-identify-the-start-and-end-of-the-unsorted-subarray">Step 4: Identify the Start and End of the Unsorted Subarray</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> start <span style="color:#666">=</span> <span style="color:#666">-</span><span style="color:#666">1</span>, end <span style="color:#666">=</span> <span style="color:#666">-</span><span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">!=</span> tmp[i].second)
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span> (start <span style="color:#666">==</span> <span style="color:#666">-</span><span style="color:#666">1</span>) start <span style="color:#666">=</span> i;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">else</span>               end <span style="color:#666">=</span> i;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>After sorting, we loop through the array again and compare each element&rsquo;s original index (from <code>tmp[i].second</code>) with its position in the sorted array (<code>i</code>). If the original index is not equal to the current index, it indicates that the element is misplaced.</li>
<li>The first time we encounter a mismatch, we set <code>start</code> to that index. If a mismatch occurs again, we set <code>end</code> to that index. This gives us the boundaries of the unsorted subarray.</li>
</ul>
<h4 id="step-5-return-the-length-of-the-unsorted-subarray">Step 5: Return the Length of the Unsorted Subarray</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">if</span>(start <span style="color:#666">==</span> <span style="color:#666">-</span><span style="color:#666">1</span>) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> end <span style="color:#666">-</span> (start <span style="color:#666">-</span> <span style="color:#666">1</span>);
</span></span></code></pre></div><ul>
<li>If no mismatches were found (i.e., the array is already sorted), we return <code>0</code>.</li>
<li>Otherwise, we calculate and return the length of the subarray by subtracting the <code>start</code> index from the <code>end</code> index.</li>
</ul>
<h3 id="complexity">Complexity:</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<ul>
<li><strong>O(n log n)</strong>: The time complexity is dominated by the sorting step, where <code>n</code> is the number of elements in the array. Sorting takes O(n log n) time, while the rest of the operations (initialization and iteration through the array) take linear time O(n). Thus, the overall time complexity is O(n log n).</li>
</ul>
<h4 id="space-complexity">Space Complexity:</h4>
<ul>
<li><strong>O(n)</strong>: We use an additional vector <code>tmp</code> to store pairs of elements and their indices, which requires O(n) space. The space complexity is linear with respect to the number of elements in the input array.</li>
</ul>
<h3 id="conclusion">Conclusion:</h3>
<p>This solution efficiently finds the shortest subarray that needs to be sorted in order to sort the entire array. By using sorting and tracking the original indices, we can easily identify the misplaced elements and calculate the boundaries of the unsorted subarray. The time complexity of O(n log n) is acceptable for arrays of typical sizes encountered in competitive programming, and the space complexity of O(n) is reasonable for this problem.</p>
<p>The algorithm performs well in terms of both time and space efficiency, making it an ideal solution for this problem. It effectively handles edge cases, such as when the array is already sorted or when the entire array needs to be sorted, and provides a clear and simple approach to identifying the required subarray.</p>
<p><a href="https://leetcode.com/problems/shortest-unsorted-continuous-subarray/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/NzVaNmqPaSo?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
