<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 935: Knight Dialer | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 935: Knight Dialer">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 935: Knight Dialer in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/solution-935-knight-dialer/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 935: Knight Dialer">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 935: Knight Dialer in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-08-05T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Dynamic Programming">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.a3d5489836b19de22a81ddc6bd21c17547d07529e67b266427378a04fa3ea727.css" integrity="sha256-o9VImDaxneIqgd3GvSHBdUfQdSnmeyZkJzeKBPo&#43;pyc=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="mainheading">
    <h1 class="sitetitle">grid47</h1>
    <p class="lead">
         Mohammed Yasir Eramangadan&#39;s Blog
    </p>
</div><div class="main-content">
        
        <div class="container">
            <div class="row">
                
                <div class="col-md-2 pl-0"><div class="share sticky-top sticky-top-offset">
    <p>Share</p>
    <ul>
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://twitter.com/intent/tweet?text=Leetcode%20935%3a%20Knight%20Dialer&url=http%3a%2f%2flocalhost%3a1313%2fleetcode%2fsolution-935-knight-dialer%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=435');return false;">
        <i class="fab fa-twitter"></i>
        </a>
        </li>
        
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://facebook.com/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fleetcode%2fsolution-935-knight-dialer%2f" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
        <i class="fab fa-facebook-f"></i>
        </a>
        </li>

        <li class="ml-1 mr-1">
        <a target="_blank" href="https://www.xing.com/spi/shares/new?url=http%3a%2f%2flocalhost%3a1313%2fleetcode%2fsolution-935-knight-dialer%2f" onclick="window.open(this.href, 'xing-share', 'width=550,height=435');return false;">
        <i class="fab fa-xing"></i>
        </a>
        </li>        
    </ul>

    
</div>
</div>
                                
                <div class="col-md-9 flex-first flex-md-unordered">
                    <div class="mainheading">
                        	
                        
                        
                        
                        <div class="row post-top-meta">
                            <div class="col-xs-12 col-md-3 col-lg-2 text-center text-md-left mb-4 mb-md-0 md-nopad-right">
                                <img class="author-thumb" src="/images/logo.png" alt="grid47">
                            </div>
                            <div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-left md-nopad-left">
                                <a target="_blank" class="link-dark">grid47</a><br>
                                <span class="author-description">
                                    Exploring patterns and algorithms<br>
                                    <i class="far fa-star"></i>
                                    Aug 5, 2024
                                    <i class="far fa-clock clock"></i>
                                    6 min read
                                </span>					
                            </div>
                        </div>			
                        	
                        
                                                
                        
                        <h1 class="posttitle">Leetcode 935: Knight Dialer</h1> 
                    </div>

                    
                    
                    
                    

                    
                    <div class="article-post">
                        <hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1426s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> mod <span style="color:#666">=</span> <span style="color:#666">1e9</span> <span style="color:#666">+</span> <span style="color:#666">7</span>;
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> knightDialer(<span style="color:#0b0;font-weight:bold">int</span> n) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;&gt;</span> arr(<span style="color:#666">4</span>, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;</span>(<span style="color:#666">3</span>, <span style="color:#666">-</span><span style="color:#666">1</span>));
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;&gt;&gt;</span> mem(n <span style="color:#666">+</span> <span style="color:#666">1</span>, arr);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> <span style="color:#666">4</span>; i<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>; j <span style="color:#666">&lt;</span> <span style="color:#666">3</span>; j<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> (res <span style="color:#666">+</span> path(i, j, n, mem))<span style="color:#666">%</span> mod;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#00a000">path</span>(<span style="color:#0b0;font-weight:bold">int</span> i, <span style="color:#0b0;font-weight:bold">int</span> j, <span style="color:#0b0;font-weight:bold">int</span> n, vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;&gt;&gt;</span> <span style="color:#666">&amp;</span>mem) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">&lt;</span> <span style="color:#666">0</span> <span style="color:#666">||</span> j <span style="color:#666">&lt;</span> <span style="color:#666">0</span><span style="color:#666">||</span> i <span style="color:#666">&gt;=</span> <span style="color:#666">4</span> <span style="color:#666">||</span> j <span style="color:#666">&gt;=</span> <span style="color:#666">3</span> <span style="color:#666">||</span> (i<span style="color:#666">==</span><span style="color:#666">3</span> <span style="color:#666">&amp;&amp;</span> j <span style="color:#666">!=</span><span style="color:#666">1</span>))
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(mem[n][i][j] <span style="color:#666">!=</span> <span style="color:#666">-</span><span style="color:#666">1</span>) <span style="color:#a2f;font-weight:bold">return</span> mem[n][i][j] <span style="color:#666">%</span> mod;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span> (n <span style="color:#666">==</span> <span style="color:#666">1</span>) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        mem[n][i][j] <span style="color:#666">=</span> path(i <span style="color:#666">-</span><span style="color:#666">1</span> , j <span style="color:#666">-</span><span style="color:#666">2</span>, n <span style="color:#666">-</span> <span style="color:#666">1</span>, mem) <span style="color:#666">%</span> mod <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>                  path(i <span style="color:#666">-</span><span style="color:#666">1</span> , j <span style="color:#666">+</span><span style="color:#666">2</span>, n <span style="color:#666">-</span> <span style="color:#666">1</span>, mem) <span style="color:#666">%</span> mod <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>                  path(i <span style="color:#666">-</span><span style="color:#666">2</span> , j <span style="color:#666">-</span><span style="color:#666">1</span>, n <span style="color:#666">-</span> <span style="color:#666">1</span>, mem) <span style="color:#666">%</span> mod <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>                  path(i <span style="color:#666">-</span><span style="color:#666">2</span> , j <span style="color:#666">+</span><span style="color:#666">1</span>, n <span style="color:#666">-</span> <span style="color:#666">1</span>, mem) <span style="color:#666">%</span> mod <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>                  path(i <span style="color:#666">+</span><span style="color:#666">1</span> , j <span style="color:#666">-</span><span style="color:#666">2</span>, n <span style="color:#666">-</span> <span style="color:#666">1</span>, mem) <span style="color:#666">%</span> mod <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>                  path(i <span style="color:#666">+</span><span style="color:#666">1</span> , j <span style="color:#666">+</span><span style="color:#666">2</span>, n <span style="color:#666">-</span> <span style="color:#666">1</span>, mem) <span style="color:#666">%</span> mod <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>                  path(i <span style="color:#666">+</span><span style="color:#666">2</span> , j <span style="color:#666">-</span><span style="color:#666">1</span>, n <span style="color:#666">-</span> <span style="color:#666">1</span>, mem) <span style="color:#666">%</span> mod <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>                  path(i <span style="color:#666">+</span><span style="color:#666">2</span> , j <span style="color:#666">+</span><span style="color:#666">1</span>, n <span style="color:#666">-</span> <span style="color:#666">1</span>, mem) <span style="color:#666">%</span> mod;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> mem[n][i][j];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem at hand involves counting the number of distinct ways a knight can dial a number on a standard keypad after making <code>n</code> moves. The knight starts at any key on a 3x4 keypad (with the keys arranged as follows):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>1 2 3
</span></span><span style="display:flex;"><span>4 5 6
</span></span><span style="display:flex;"><span>7 8 9
</span></span><span style="display:flex;"><span>  0
</span></span></code></pre></div><p>The knight can move to a key that is two rows away and one column away, or one row away and two columns away. The task is to determine how many distinct ways the knight can land on a number after <code>n</code> moves, starting from any key on the keypad.</p>
<h3 id="approach">Approach</h3>
<p>This problem can be solved efficiently using dynamic programming and memoization. Here&rsquo;s a step-by-step explanation of the approach:</p>
<ol>
<li>
<p><strong>Understanding the Knight&rsquo;s Moves</strong>: The knight in this problem moves in an &ldquo;L&rdquo; shape, i.e., it can either move two rows and one column or one row and two columns. There are a total of 8 possible moves for any given position, except for some boundary conditions (like the bottom row, where the knight cannot move down further).</p>
</li>
<li>
<p><strong>Memoization to Avoid Repetition</strong>: To optimize the solution, we use a memoization technique to store the results of previously computed states. Since there are multiple recursive calls for the same position and the number of moves, we avoid recalculating these states by storing the results in a memoization table.</p>
</li>
<li>
<p><strong>Recursive Function to Explore All Possible Paths</strong>: The recursive function <code>path</code> calculates the number of distinct ways to reach a key after a certain number of moves. Starting from any given key on the keypad, it recursively explores all possible moves and accumulates the results. Each call checks if a move is within the bounds of the keypad, and if not, it returns 0.</p>
</li>
<li>
<p><strong>Base Case</strong>: The base case of the recursion is when <code>n == 1</code>, meaning we have only one move left. In this case, every key on the keypad is reachable from the starting key, so the result is 1 for that specific key.</p>
</li>
<li>
<p><strong>Memoization Table</strong>: The memoization table <code>mem</code> is a 3-dimensional array where the first dimension represents the number of moves left (<code>n</code>), and the second and third dimensions represent the position of the knight on the keypad (<code>i</code> for row and <code>j</code> for column). If a state has been computed before, we return the stored result to avoid recalculating it.</p>
</li>
<li>
<p><strong>Modulo Operation</strong>: Since the result may be a large number, the answer is taken modulo <code>1e9 + 7</code> to ensure the result fits within the constraints and prevents integer overflow.</p>
</li>
<li>
<p><strong>Iterating Over All Keys</strong>: Finally, the <code>knightDialer</code> function iterates over all positions on the keypad (represented by the grid coordinates <code>i</code> and <code>j</code>), and for each position, it computes the number of distinct paths starting from that key by calling the <code>path</code> function.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<ol>
<li>
<p><strong>Initialization</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;&gt;</span> arr(<span style="color:#666">4</span>, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;</span>(<span style="color:#666">3</span>, <span style="color:#666">-</span><span style="color:#666">1</span>));
</span></span><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;&gt;&gt;</span> mem(n <span style="color:#666">+</span> <span style="color:#666">1</span>, arr);
</span></span></code></pre></div><ul>
<li>The variable <code>res</code> holds the result, which is the total number of distinct paths.</li>
<li><code>arr</code> is a temporary 2D array used to initialize the memoization table <code>mem</code>. This table has dimensions <code>[n+1][4][3]</code>, where <code>n+1</code> is for the number of moves, and <code>4</code> and <code>3</code> represent the number of rows and columns on the keypad.</li>
</ul>
</li>
<li>
<p><strong>Iterating Over All Keys</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> <span style="color:#666">4</span>; i<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>; j <span style="color:#666">&lt;</span> <span style="color:#666">3</span>; j<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        res <span style="color:#666">=</span> (res <span style="color:#666">+</span> path(i, j, n, mem)) <span style="color:#666">%</span> mod;
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><ul>
<li>This double loop iterates over each key on the keypad (from <code>(0,0)</code> to <code>(3,2)</code>), calling the <code>path</code> function for each key to compute the number of distinct paths starting from that key.</li>
</ul>
</li>
<li>
<p><strong>Path Calculation with Memoization</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#00a000">path</span>(<span style="color:#0b0;font-weight:bold">int</span> i, <span style="color:#0b0;font-weight:bold">int</span> j, <span style="color:#0b0;font-weight:bold">int</span> n, vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;&gt;&gt;</span> <span style="color:#666">&amp;</span>mem) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">&lt;</span> <span style="color:#666">0</span> <span style="color:#666">||</span> j <span style="color:#666">&lt;</span> <span style="color:#666">0</span> <span style="color:#666">||</span> i <span style="color:#666">&gt;=</span> <span style="color:#666">4</span> <span style="color:#666">||</span> j <span style="color:#666">&gt;=</span> <span style="color:#666">3</span> <span style="color:#666">||</span> (i <span style="color:#666">==</span> <span style="color:#666">3</span> <span style="color:#666">&amp;&amp;</span> j <span style="color:#666">!=</span> <span style="color:#666">1</span>))
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(mem[n][i][j] <span style="color:#666">!=</span> <span style="color:#666">-</span><span style="color:#666">1</span>) <span style="color:#a2f;font-weight:bold">return</span> mem[n][i][j] <span style="color:#666">%</span> mod;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span> (n <span style="color:#666">==</span> <span style="color:#666">1</span>) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>    mem[n][i][j] <span style="color:#666">=</span> path(i <span style="color:#666">-</span> <span style="color:#666">1</span>, j <span style="color:#666">-</span> <span style="color:#666">2</span>, n <span style="color:#666">-</span> <span style="color:#666">1</span>, mem) <span style="color:#666">%</span> mod <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>                   path(i <span style="color:#666">-</span> <span style="color:#666">1</span>, j <span style="color:#666">+</span> <span style="color:#666">2</span>, n <span style="color:#666">-</span> <span style="color:#666">1</span>, mem) <span style="color:#666">%</span> mod <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>                   path(i <span style="color:#666">-</span> <span style="color:#666">2</span>, j <span style="color:#666">-</span> <span style="color:#666">1</span>, n <span style="color:#666">-</span> <span style="color:#666">1</span>, mem) <span style="color:#666">%</span> mod <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>                   path(i <span style="color:#666">-</span> <span style="color:#666">2</span>, j <span style="color:#666">+</span> <span style="color:#666">1</span>, n <span style="color:#666">-</span> <span style="color:#666">1</span>, mem) <span style="color:#666">%</span> mod <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>                   path(i <span style="color:#666">+</span> <span style="color:#666">1</span>, j <span style="color:#666">-</span> <span style="color:#666">2</span>, n <span style="color:#666">-</span> <span style="color:#666">1</span>, mem) <span style="color:#666">%</span> mod <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>                   path(i <span style="color:#666">+</span> <span style="color:#666">1</span>, j <span style="color:#666">+</span> <span style="color:#666">2</span>, n <span style="color:#666">-</span> <span style="color:#666">1</span>, mem) <span style="color:#666">%</span> mod <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>                   path(i <span style="color:#666">+</span> <span style="color:#666">2</span>, j <span style="color:#666">-</span> <span style="color:#666">1</span>, n <span style="color:#666">-</span> <span style="color:#666">1</span>, mem) <span style="color:#666">%</span> mod <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>                   path(i <span style="color:#666">+</span> <span style="color:#666">2</span>, j <span style="color:#666">+</span> <span style="color:#666">1</span>, n <span style="color:#666">-</span> <span style="color:#666">1</span>, mem) <span style="color:#666">%</span> mod;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> mem[n][i][j];
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>Base Case</strong>: If the knight moves outside the boundaries of the keypad or tries to move from an invalid key (like the bottom-left or right corners), we return 0.</li>
<li>If the state has already been computed (<code>mem[n][i][j] != -1</code>), we return the stored value.</li>
<li>If there is only one move left (<code>n == 1</code>), we return 1 because any key is reachable from the starting key.</li>
<li>The recursion explores all 8 possible moves and accumulates the results using modulo <code>1e9 + 7</code> to prevent overflow.</li>
</ul>
</li>
<li>
<p><strong>Returning the Final Result</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> res;
</span></span></code></pre></div><p>After all calculations, the final result is returned, which is the sum of the distinct paths starting from all keys on the keypad.</p>
</li>
</ol>
<h3 id="complexity">Complexity</h3>
<ul>
<li>
<p><strong>Time Complexity</strong>: The time complexity of this solution is O(n * 4 * 3), which simplifies to O(n). This is because for each key on the keypad (12 total), we compute the number of distinct paths by exploring 8 possible moves recursively, and memoization ensures that we only compute each state once.</p>
</li>
<li>
<p><strong>Space Complexity</strong>: The space complexity is O(n * 4 * 3), which simplifies to O(n). This is due to the memoization table <code>mem</code> that stores the results for each key position and the number of remaining moves.</p>
</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>This solution leverages dynamic programming and memoization to efficiently count the number of distinct ways a knight can dial a number on a keypad after <code>n</code> moves. By storing previously computed results, the algorithm avoids redundant calculations, ensuring an optimal solution. This approach works well even for large values of <code>n</code> and provides the answer modulo <code>1e9 + 7</code> to handle large outputs.</p>
<p><a href="https://leetcode.com/problems/knight-dialer/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/vlsUUm_qqsY?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

                    </div>
                    
                    
                    <div class="after-post-tags">
                        <ul class="tags">
                        
                        <li>
                        <a href="/tags/dynamic-programming">Dynamic Programming</a>
                        </li>
                        
                        </ul>
                    </div>
                    
                    
                    
                    <div class="row PageNavigation d-flex justify-content-between font-weight-bold">
                    
                        <a class="d-block col-md-6" href="http://localhost:1313/leetcode/solution-934-shortest-bridge/"> &laquo; Leetcode 934: Shortest Bridge</a>
                    
                    
                        <a class="d-block col-md-6 text-lg-right" href="http://localhost:1313/leetcode/solution-938-range-sum-of-bst/">Leetcode 938: Range Sum of BST &raquo;</a>
                    
                    <div class="clearfix"></div>
                    </div>
                    
                </div>
                
            </div>
        </div>
        
        
    </div>


            </div>
<div class="jumbotron fortags">
	<div class="d-md-flex h-100">
		<div class="col-md-4 transpdark align-self-center text-center h-100">
			<div class="d-md-flex align-items-center justify-content-center h-100">
				<h2 class="d-md-block d-none align-self-center py-1 font-weight-light">Explore <span class="d-none d-md-inline">→</span></h2>
			</div>
		</div>
		<div class="col-md-8 p-5 align-self-center text-center">
			
			<a class="mt-1 mb-1" href="/tags/array">array</a>
			
			<a class="mt-1 mb-1" href="/tags/backtracking">backtracking</a>
			
			<a class="mt-1 mb-1" href="/tags/binary-indexed-tree">binary indexed tree</a>
			
			<a class="mt-1 mb-1" href="/tags/binary-search">binary search</a>
			
			<a class="mt-1 mb-1" href="/tags/binary-search-tree">binary search tree</a>
			
			<a class="mt-1 mb-1" href="/tags/binary-tree">binary tree</a>
			
			<a class="mt-1 mb-1" href="/tags/bit-manipulation">bit manipulation</a>
			
			<a class="mt-1 mb-1" href="/tags/bitmask">bitmask</a>
			
			<a class="mt-1 mb-1" href="/tags/brainteaser">brainteaser</a>
			
			<a class="mt-1 mb-1" href="/tags/breadth-first-search">breadth-first search</a>
			
			<a class="mt-1 mb-1" href="/tags/bucket-sort">bucket sort</a>
			
			<a class="mt-1 mb-1" href="/tags/combinatorics">combinatorics</a>
			
			<a class="mt-1 mb-1" href="/tags/concurrency">concurrency</a>
			
			<a class="mt-1 mb-1" href="/tags/counting">counting</a>
			
			<a class="mt-1 mb-1" href="/tags/counting-sort">counting sort</a>
			
			<a class="mt-1 mb-1" href="/tags/data-stream">data stream</a>
			
			<a class="mt-1 mb-1" href="/tags/database">database</a>
			
			<a class="mt-1 mb-1" href="/tags/depth-first-search">depth-first search</a>
			
			<a class="mt-1 mb-1" href="/tags/design">design</a>
			
			<a class="mt-1 mb-1" href="/tags/divide-and-conquer">divide and conquer</a>
			
			<a class="mt-1 mb-1" href="/tags/doubly-linked-list">doubly-linked list</a>
			
			<a class="mt-1 mb-1" href="/tags/dynamic-programming">dynamic programming</a>
			
			<a class="mt-1 mb-1" href="/tags/enumeration">enumeration</a>
			
			<a class="mt-1 mb-1" href="/tags/game-theory">game theory</a>
			
			<a class="mt-1 mb-1" href="/tags/geometry">geometry</a>
			
			<a class="mt-1 mb-1" href="/tags/graph">graph</a>
			
			<a class="mt-1 mb-1" href="/tags/greedy">greedy</a>
			
			<a class="mt-1 mb-1" href="/tags/hash-function">hash function</a>
			
			<a class="mt-1 mb-1" href="/tags/hash-table">hash table</a>
			
			<a class="mt-1 mb-1" href="/tags/heap-priority-queue">heap (priority queue)</a>
			
			<a class="mt-1 mb-1" href="/tags/interactive">interactive</a>
			
			<a class="mt-1 mb-1" href="/tags/iterator">iterator</a>
			
			<a class="mt-1 mb-1" href="/tags/linked-list">linked list</a>
			
			<a class="mt-1 mb-1" href="/tags/math">math</a>
			
			<a class="mt-1 mb-1" href="/tags/matrix">matrix</a>
			
			<a class="mt-1 mb-1" href="/tags/memoization">memoization</a>
			
			<a class="mt-1 mb-1" href="/tags/minimum-spanning-tree">minimum spanning tree</a>
			
			<a class="mt-1 mb-1" href="/tags/monotonic-queue">monotonic queue</a>
			
			<a class="mt-1 mb-1" href="/tags/monotonic-stack">monotonic stack</a>
			
			<a class="mt-1 mb-1" href="/tags/number-theory">number theory</a>
			
			<a class="mt-1 mb-1" href="/tags/ordered-set">ordered set</a>
			
			<a class="mt-1 mb-1" href="/tags/prefix-sum">prefix sum</a>
			
			<a class="mt-1 mb-1" href="/tags/probability-and-statistics">probability and statistics</a>
			
			<a class="mt-1 mb-1" href="/tags/queue">queue</a>
			
			<a class="mt-1 mb-1" href="/tags/quickselect">quickselect</a>
			
			<a class="mt-1 mb-1" href="/tags/radix-sort">radix sort</a>
			
			<a class="mt-1 mb-1" href="/tags/randomized">randomized</a>
			
			<a class="mt-1 mb-1" href="/tags/recursion">recursion</a>
			
			<a class="mt-1 mb-1" href="/tags/reservoir-sampling">reservoir sampling</a>
			
			<a class="mt-1 mb-1" href="/tags/rolling-hash">rolling hash</a>
			
			<a class="mt-1 mb-1" href="/tags/segment-tree">segment tree</a>
			
			<a class="mt-1 mb-1" href="/tags/shortest-path">shortest path</a>
			
			<a class="mt-1 mb-1" href="/tags/simulation">simulation</a>
			
			<a class="mt-1 mb-1" href="/tags/sliding-window">sliding window</a>
			
			<a class="mt-1 mb-1" href="/tags/sorting">sorting</a>
			
			<a class="mt-1 mb-1" href="/tags/stack">stack</a>
			
			<a class="mt-1 mb-1" href="/tags/string">string</a>
			
			<a class="mt-1 mb-1" href="/tags/string-matching">string matching</a>
			
			<a class="mt-1 mb-1" href="/tags/topological-sort">topological sort</a>
			
			<a class="mt-1 mb-1" href="/tags/tree">tree</a>
			
			<a class="mt-1 mb-1" href="/tags/trie">trie</a>
			
			<a class="mt-1 mb-1" href="/tags/two-pointers">two pointers</a>
			
			<a class="mt-1 mb-1" href="/tags/union-find">union find</a>
			
		</div>
	</div>
</div>

<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            <div class="col-md-6 col-sm-6 text-center text-lg-right">    
                <a target="_blank" rel="noopener" href="https://www.wowthemes.net">Mediumish Theme</a> by WowThemes.net
            </div>
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
