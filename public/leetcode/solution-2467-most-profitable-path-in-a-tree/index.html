<!DOCTYPE html>
<html lang="en-us"><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 2467: Most Profitable Path in a Tree | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 2467: Most Profitable Path in a Tree">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 2467: Most Profitable Path in a Tree in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="https://www.grid47.xyz/leetcode/solution-2467-most-profitable-path-in-a-tree/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 2467: Most Profitable Path in a Tree">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 2467: Most Profitable Path in a Tree in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-03-05T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Tree">
    <meta property="article:tag" content="Depth-First Search">
    <meta property="article:tag" content="Breadth-First Search">
    <meta property="article:tag" content="Graph">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="https://www.grid47.xyz/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="https://www.grid47.xyz/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="https://www.grid47.xyz//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/courses/">Course</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
    <div class="main-content">
        
        <div class="container">
            <div class="row">
                
                <div class="col-md-2 pl-0"><div class="share sticky-top sticky-top-offset">
    <p>Share</p>
    <ul>
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://twitter.com/intent/tweet?text=Leetcode%202467%3a%20Most%20Profitable%20Path%20in%20a%20Tree&url=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-2467-most-profitable-path-in-a-tree%2f" 
               onclick="window.open(this.href, 'twitter-share', 'width=550,height=435');return false;">
                <i class="fab fa-twitter"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://facebook.com/sharer.php?u=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-2467-most-profitable-path-in-a-tree%2f" 
               onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
                <i class="fab fa-facebook-f"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-2467-most-profitable-path-in-a-tree%2f&title=Leetcode%202467%3a%20Most%20Profitable%20Path%20in%20a%20Tree" 
               onclick="window.open(this.href, 'linkedin-share', 'width=550,height=435');return false;">
                <i class="fab fa-linkedin-in"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://reddit.com/submit?url=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-2467-most-profitable-path-in-a-tree%2f&title=Leetcode%202467%3a%20Most%20Profitable%20Path%20in%20a%20Tree" 
               onclick="window.open(this.href, 'reddit-share', 'width=550,height=435');return false;">
                <i class="fab fa-reddit-alien"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://api.whatsapp.com/send?text=Leetcode%202467%3a%20Most%20Profitable%20Path%20in%20a%20Tree%20https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-2467-most-profitable-path-in-a-tree%2f" 
               onclick="window.open(this.href, 'whatsapp-share', 'width=550,height=435');return false;">
                <i class="fab fa-whatsapp"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://telegram.me/share/url?url=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-2467-most-profitable-path-in-a-tree%2f&text=Leetcode%202467%3a%20Most%20Profitable%20Path%20in%20a%20Tree" 
               onclick="window.open(this.href, 'telegram-share', 'width=550,height=435');return false;">
                <i class="fab fa-telegram-plane"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="mailto:?subject=Leetcode%202467%3a%20Most%20Profitable%20Path%20in%20a%20Tree&body=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-2467-most-profitable-path-in-a-tree%2f" 
               onclick="window.open(this.href, 'email-share', 'width=550,height=435');return false;">
                <i class="fas fa-envelope"></i>
            </a>
        </li> 
    </ul>

    
</div>
</div>
                                
                <div class="col-md-9 flex-first flex-md-unordered">
                    <div class="mainheading">
                        
                        <h1 class="posttitle">Leetcode 2467: Most Profitable Path in a Tree</h1> 
                        
                        
                        
                        
                        <div class="row post-top-meta">
                            <div class="col-xs-12 col-md-3 col-lg-2 text-center text-md-left mb-4 mb-md-0 md-nopad-right">
                                <img class="author-thumb" src="/images/logo.png" alt="grid47">
                            </div>
                            <div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-left md-nopad-left">
                                <a target="_blank" class="link-dark">grid47</a><br>
                                <span class="author-description">
                                    Exploring patterns and algorithms<br>
                                    <i class="far fa-star"></i>
                                    Mar 5, 2024
                                    <i class="far fa-clock clock"></i>
                                    6 min read
                                </span>					
                            </div>
                        </div>			
                        	
                        
                                                                   
                    </div>

                    
                    
                    
                    

                    
                    <div class="article-post">
                        <hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode777s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;</span> adj;
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> par, dis;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">dfs</span>(<span style="color:#0b0;font-weight:bold">int</span> u, <span style="color:#0b0;font-weight:bold">int</span> p <span style="color:#666">=</span> <span style="color:#666">0</span>, <span style="color:#0b0;font-weight:bold">int</span> d <span style="color:#666">=</span> <span style="color:#666">0</span>) {
</span></span><span style="display:flex;"><span>        dis[u] <span style="color:#666">=</span> d;
</span></span><span style="display:flex;"><span>        par[u] <span style="color:#666">=</span> p;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> <span style="color:#a0a000">v</span> : adj[u]) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span> (v <span style="color:#666">==</span> p) <span style="color:#a2f;font-weight:bold">continue</span>;
</span></span><span style="display:flex;"><span>            dfs(v, u, d <span style="color:#666">+</span><span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>     
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">dfs2</span>(<span style="color:#0b0;font-weight:bold">int</span> u,vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span>amount,<span style="color:#0b0;font-weight:bold">int</span> p<span style="color:#666">=</span> <span style="color:#666">0</span>){
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> ret <span style="color:#666">=</span> amount[u];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> mxc <span style="color:#666">=</span> <span style="color:#666">-</span>INT_MAX;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> <span style="color:#a0a000">v</span>:adj[u]){
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(v<span style="color:#666">!=</span>p){
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                mxc<span style="color:#666">=</span> max(mxc,dfs2(v,amount,u));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#080;font-style:italic">//if the node is leaf we just return its amount
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(mxc<span style="color:#666">==-</span>INT_MAX)<span style="color:#a2f;font-weight:bold">return</span> ret;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">else</span> <span style="color:#a2f;font-weight:bold">return</span> ret<span style="color:#666">+</span>mxc;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">mostProfitablePath</span>(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> edges, <span style="color:#0b0;font-weight:bold">int</span> bob, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> amount) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> amount.size();
</span></span><span style="display:flex;"><span>        adj.resize(n,vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#a2f;font-weight:bold">auto</span><span style="color:#666">&amp;</span><span style="color:#a0a000">e</span>:edges){
</span></span><span style="display:flex;"><span>            adj[e[<span style="color:#666">0</span>]].push_back(e[<span style="color:#666">1</span>]);
</span></span><span style="display:flex;"><span>            adj[e[<span style="color:#666">1</span>]].push_back(e[<span style="color:#666">0</span>]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        par.resize(n);
</span></span><span style="display:flex;"><span>        dis.resize(n);
</span></span><span style="display:flex;"><span>        dfs(<span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> cur <span style="color:#666">=</span> bob;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> bob_dis <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#080;font-style:italic">//update the path of from Bob to 0
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">while</span>(cur<span style="color:#666">!=</span><span style="color:#666">0</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(dis[cur]<span style="color:#666">&gt;</span>bob_dis){
</span></span><span style="display:flex;"><span>                amount[cur] <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>            }<span style="color:#a2f;font-weight:bold">else</span> <span style="color:#a2f;font-weight:bold">if</span>(dis[cur]<span style="color:#666">==</span>bob_dis){
</span></span><span style="display:flex;"><span>                amount[cur]<span style="color:#666">/=</span><span style="color:#666">2</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            cur <span style="color:#666">=</span> par[cur];
</span></span><span style="display:flex;"><span>            bob_dis<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> dfs2(<span style="color:#666">0</span>,amount);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem is to find the most profitable path in a tree graph where each node has an associated profit (or loss). You are given a tree represented by an undirected graph, and you need to compute the path that maximizes the total profit, taking into account that one of the participants, Bob, will affect the profit on his path.</p>
<h3 id="problem-understanding">Problem Understanding:</h3>
<ol>
<li>You are given a tree with <code>n</code> nodes where each node has an associated profit (or loss).</li>
<li>Bob starts from a particular node and moves to the root node (node 0). During this journey, he affects the profit at each node he visits:
<ul>
<li>If Bob visits a node at an even distance from the root, the profit is halved.</li>
<li>If Bob visits a node at an odd distance, the profit becomes 0.</li>
</ul>
</li>
<li>You need to compute the path that maximizes the total profit, considering the modifications caused by Bob’s journey.</li>
</ol>
<h3 id="approach">Approach</h3>
<p>To solve the problem, we will use a depth-first search (DFS) approach. The general idea is to perform DFS from the root node, keeping track of:</p>
<ul>
<li>The parent node for each node.</li>
<li>The distance from the root for each node.</li>
<li>The updated profit at each node after accounting for Bob’s journey.</li>
</ul>
<p><strong>Steps</strong>:</p>
<ol>
<li><strong>DFS Traversal</strong>: Start by performing DFS from the root to compute the parent and distance for each node.</li>
<li><strong>Bob’s Influence</strong>: Modify the profit values for each node according to Bob&rsquo;s path. For nodes Bob visits:
<ul>
<li>At even distances, divide the profit by 2.</li>
<li>At odd distances, set the profit to 0.</li>
</ul>
</li>
<li><strong>Profit Calculation</strong>: Once the profits have been adjusted, perform a second DFS to calculate the total profit of the most profitable path, taking into account the modified profits.</li>
</ol>
<h3 id="code-breakdown">Code Breakdown</h3>
<h4 id="1-initialization">1. <strong>Initialization</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;</span> adj;
</span></span><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> par, dis;
</span></span></code></pre></div><ul>
<li><code>adj</code>: Adjacency list to store the tree structure (edges between nodes).</li>
<li><code>par</code>: A vector that stores the parent of each node. It will be used during DFS to backtrack and compute Bob’s influence.</li>
<li><code>dis</code>: A vector to store the distance from the root node (node 0) for each node.</li>
</ul>
<h4 id="2-dfs-function-to-compute-parent-and-distance">2. <strong>DFS Function to Compute Parent and Distance</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">dfs</span>(<span style="color:#0b0;font-weight:bold">int</span> u, <span style="color:#0b0;font-weight:bold">int</span> p <span style="color:#666">=</span> <span style="color:#666">0</span>, <span style="color:#0b0;font-weight:bold">int</span> d <span style="color:#666">=</span> <span style="color:#666">0</span>) {
</span></span><span style="display:flex;"><span>    dis[u] <span style="color:#666">=</span> d;
</span></span><span style="display:flex;"><span>    par[u] <span style="color:#666">=</span> p;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> <span style="color:#a0a000">v</span> : adj[u]) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span> (v <span style="color:#666">==</span> p) <span style="color:#a2f;font-weight:bold">continue</span>; <span style="color:#080;font-style:italic">// Skip the parent node to avoid cycle
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        dfs(v, u, d <span style="color:#666">+</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>This function performs a DFS traversal starting from node <code>u</code>. It computes:
<ul>
<li><code>dis[u]</code>: The distance of node <code>u</code> from the root.</li>
<li><code>par[u]</code>: The parent of node <code>u</code>.</li>
<li>The function iterates through all adjacent nodes (<code>v</code>) and recursively explores them.</li>
</ul>
</li>
</ul>
<h4 id="3-dfs-function-to-calculate-the-maximum-profitable-path">3. <strong>DFS Function to Calculate the Maximum Profitable Path</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">dfs2</span>(<span style="color:#0b0;font-weight:bold">int</span> u, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> amount, <span style="color:#0b0;font-weight:bold">int</span> p <span style="color:#666">=</span> <span style="color:#666">0</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> ret <span style="color:#666">=</span> amount[u]; <span style="color:#080;font-style:italic">// Start with the profit of the current node
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#0b0;font-weight:bold">int</span> mxc <span style="color:#666">=</span> <span style="color:#666">-</span>INT_MAX; <span style="color:#080;font-style:italic">// Initialize a variable to track the maximum subpath profit
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> <span style="color:#a0a000">v</span> : adj[u]) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(v <span style="color:#666">!=</span> p) { <span style="color:#080;font-style:italic">// Avoid traversing back to the parent
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            mxc <span style="color:#666">=</span> max(mxc, dfs2(v, amount, u)); <span style="color:#080;font-style:italic">// Calculate the maximum profit from each child
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(mxc <span style="color:#666">==</span> <span style="color:#666">-</span>INT_MAX) <span style="color:#a2f;font-weight:bold">return</span> ret; <span style="color:#080;font-style:italic">// If no child was found, return the current node&#39;s profit
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">else</span> <span style="color:#a2f;font-weight:bold">return</span> ret <span style="color:#666">+</span> mxc; <span style="color:#080;font-style:italic">// Otherwise, return the current profit plus the max subpath profit
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>}
</span></span></code></pre></div><ul>
<li>This function calculates the maximum profit that can be achieved starting from node <code>u</code>. It recursively explores all child nodes and returns the profit of the most profitable path in the subtree rooted at <code>u</code>.</li>
</ul>
<h4 id="4-main-function-to-find-the-most-profitable-path">4. <strong>Main Function to Find the Most Profitable Path</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">mostProfitablePath</span>(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> edges, <span style="color:#0b0;font-weight:bold">int</span> bob, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> amount) {
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> amount.size();
</span></span><span style="display:flex;"><span>    adj.resize(n, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span>()); <span style="color:#080;font-style:italic">// Resize the adjacency list to accommodate all nodes
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#a2f;font-weight:bold">auto</span> <span style="color:#666">&amp;</span><span style="color:#a0a000">e</span> : edges) {
</span></span><span style="display:flex;"><span>        adj[e[<span style="color:#666">0</span>]].push_back(e[<span style="color:#666">1</span>]);
</span></span><span style="display:flex;"><span>        adj[e[<span style="color:#666">1</span>]].push_back(e[<span style="color:#666">0</span>]);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    par.resize(n); <span style="color:#080;font-style:italic">// Resize the parent array
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    dis.resize(n); <span style="color:#080;font-style:italic">// Resize the distance array
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    dfs(<span style="color:#666">0</span>); <span style="color:#080;font-style:italic">// Perform DFS from the root node (node 0)
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> cur <span style="color:#666">=</span> bob; <span style="color:#080;font-style:italic">// Start from Bob&#39;s initial position
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#0b0;font-weight:bold">int</span> bob_dis <span style="color:#666">=</span> <span style="color:#666">0</span>; <span style="color:#080;font-style:italic">// Bob&#39;s current distance from the root
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// Update the path from Bob to the root (node 0) based on his journey
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">while</span>(cur <span style="color:#666">!=</span> <span style="color:#666">0</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(dis[cur] <span style="color:#666">&gt;</span> bob_dis) {
</span></span><span style="display:flex;"><span>            amount[cur] <span style="color:#666">=</span> <span style="color:#666">0</span>; <span style="color:#080;font-style:italic">// Set profit to 0 for odd distances from the root
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        } <span style="color:#a2f;font-weight:bold">else</span> <span style="color:#a2f;font-weight:bold">if</span>(dis[cur] <span style="color:#666">==</span> bob_dis) {
</span></span><span style="display:flex;"><span>            amount[cur] <span style="color:#666">/=</span> <span style="color:#666">2</span>; <span style="color:#080;font-style:italic">// Halve the profit for even distances from the root
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>        cur <span style="color:#666">=</span> par[cur]; <span style="color:#080;font-style:italic">// Move Bob to the parent node
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        bob_dis<span style="color:#666">++</span>; <span style="color:#080;font-style:italic">// Increment Bob&#39;s distance
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// Finally, compute and return the maximum profitable path starting from the root
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">return</span> dfs2(<span style="color:#666">0</span>, amount);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>Graph Construction</strong>: First, we construct the adjacency list <code>adj</code> for the tree from the input edges.</li>
<li><strong>DFS Initialization</strong>: We perform a DFS traversal starting from the root node (node 0) to populate the <code>par</code> and <code>dis</code> arrays, which store the parent and distance for each node, respectively.</li>
<li><strong>Bob’s Path Modification</strong>: We update the profits of the nodes that Bob visits:
<ul>
<li>If Bob visits a node at an odd distance from the root, the profit is set to 0.</li>
<li>If Bob visits a node at an even distance from the root, the profit is halved.</li>
</ul>
</li>
<li><strong>Max Profit Calculation</strong>: After modifying the profits, we perform another DFS (<code>dfs2</code>) to compute the maximum profit path starting from the root.</li>
</ul>
<h3 id="complexity-analysis">Complexity Analysis</h3>
<ol>
<li>
<p><strong>Time Complexity</strong>:</p>
<ul>
<li>Constructing the adjacency list takes (O(E)), where (E) is the number of edges (which is (n - 1) for a tree with (n) nodes).</li>
<li>The first DFS (<code>dfs</code>) runs in (O(n)), since each node is visited once.</li>
<li>The second DFS (<code>dfs2</code>) also runs in (O(n)).</li>
<li>Therefore, the overall time complexity is (O(n)), where (n) is the number of nodes in the tree.</li>
</ul>
</li>
<li>
<p><strong>Space Complexity</strong>:</p>
<ul>
<li>The adjacency list <code>adj</code> requires (O(n)) space.</li>
<li>The <code>par</code> and <code>dis</code> arrays also require (O(n)) space each.</li>
<li>Therefore, the space complexity is (O(n)).</li>
</ul>
</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>The solution efficiently solves the problem using DFS with memoization to compute the most profitable path in the tree, accounting for the influence of Bob&rsquo;s journey. By performing two DFS traversals—one for calculating distances and parent-child relationships and another for calculating the maximum profit—the solution is both time-efficient and space-efficient, with a time complexity of (O(n)). The solution can handle large inputs with up to (10^5) nodes in a tree.</p>
<p><a href="https://leetcode.com/problems/most-profitable-path-in-a-tree/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/MCp9k0kKQqc?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

                    </div>
                    
                    
                    <div class="after-post-tags">
                        <ul class="tags">
                        
                        <li>
                        <a href="/tags/array">Array</a>
                        </li>
                        
                        <li>
                        <a href="/tags/tree">Tree</a>
                        </li>
                        
                        <li>
                        <a href="/tags/depth-first-search">Depth-First Search</a>
                        </li>
                        
                        <li>
                        <a href="/tags/breadth-first-search">Breadth-First Search</a>
                        </li>
                        
                        <li>
                        <a href="/tags/graph">Graph</a>
                        </li>
                        
                        </ul>
                    </div>
                                        
                    
                    <div class="row PageNavigation d-flex justify-content-between font-weight-bold">
                    
                        <a class="d-block col-md-6" href="https://www.grid47.xyz/leetcode/solution-2466-count-ways-to-build-good-strings/"> &laquo; Leetcode 2466: Count Ways To Build Good Strings</a>
                    
                    
                        <a class="d-block col-md-6 text-lg-right" href="https://www.grid47.xyz/leetcode/solution-2469-convert-the-temperature/">Leetcode 2469: Convert the Temperature &raquo;</a>
                    
                    <div class="clearfix"></div>
                    </div>                                                            
                    
                </div>
                
            </div>
        </div>
        
        
    </div>


            </div>
<div class="jumbotron fortags">
	<div class="d-md-flex h-100">
		<div class="col-md-4 transpdark align-self-center text-center h-100">
			<div class="d-md-flex align-items-center justify-content-center h-100">
				<h2 class="d-md-block d-none align-self-center py-1 font-weight-light">Explore <span class="d-none d-md-inline">→</span></h2>
			</div>
		</div>
		<div class="col-md-8 p-5 align-self-center text-center">
			
			<a class="mt-1 mb-1" href="/tags/array">array</a>
			
			<a class="mt-1 mb-1" href="/tags/backtracking">backtracking</a>
			
			<a class="mt-1 mb-1" href="/tags/binary-indexed-tree">binary indexed tree</a>
			
			<a class="mt-1 mb-1" href="/tags/binary-search">binary search</a>
			
			<a class="mt-1 mb-1" href="/tags/binary-search-tree">binary search tree</a>
			
			<a class="mt-1 mb-1" href="/tags/binary-tree">binary tree</a>
			
			<a class="mt-1 mb-1" href="/tags/bit-manipulation">bit manipulation</a>
			
			<a class="mt-1 mb-1" href="/tags/bitmask">bitmask</a>
			
			<a class="mt-1 mb-1" href="/tags/brainteaser">brainteaser</a>
			
			<a class="mt-1 mb-1" href="/tags/breadth-first-search">breadth-first search</a>
			
			<a class="mt-1 mb-1" href="/tags/bucket-sort">bucket sort</a>
			
			<a class="mt-1 mb-1" href="/tags/combinatorics">combinatorics</a>
			
			<a class="mt-1 mb-1" href="/tags/concurrency">concurrency</a>
			
			<a class="mt-1 mb-1" href="/tags/counting">counting</a>
			
			<a class="mt-1 mb-1" href="/tags/counting-sort">counting sort</a>
			
			<a class="mt-1 mb-1" href="/tags/data-stream">data stream</a>
			
			<a class="mt-1 mb-1" href="/tags/database">database</a>
			
			<a class="mt-1 mb-1" href="/tags/depth-first-search">depth-first search</a>
			
			<a class="mt-1 mb-1" href="/tags/design">design</a>
			
			<a class="mt-1 mb-1" href="/tags/divide-and-conquer">divide and conquer</a>
			
			<a class="mt-1 mb-1" href="/tags/doubly-linked-list">doubly-linked list</a>
			
			<a class="mt-1 mb-1" href="/tags/dynamic-programming">dynamic programming</a>
			
			<a class="mt-1 mb-1" href="/tags/enumeration">enumeration</a>
			
			<a class="mt-1 mb-1" href="/tags/game-theory">game theory</a>
			
			<a class="mt-1 mb-1" href="/tags/geometry">geometry</a>
			
			<a class="mt-1 mb-1" href="/tags/graph">graph</a>
			
			<a class="mt-1 mb-1" href="/tags/greedy">greedy</a>
			
			<a class="mt-1 mb-1" href="/tags/hash-function">hash function</a>
			
			<a class="mt-1 mb-1" href="/tags/hash-table">hash table</a>
			
			<a class="mt-1 mb-1" href="/tags/heap-priority-queue">heap (priority queue)</a>
			
			<a class="mt-1 mb-1" href="/tags/interactive">interactive</a>
			
			<a class="mt-1 mb-1" href="/tags/iterator">iterator</a>
			
			<a class="mt-1 mb-1" href="/tags/linked-list">linked list</a>
			
			<a class="mt-1 mb-1" href="/tags/math">math</a>
			
			<a class="mt-1 mb-1" href="/tags/matrix">matrix</a>
			
			<a class="mt-1 mb-1" href="/tags/memoization">memoization</a>
			
			<a class="mt-1 mb-1" href="/tags/minimum-spanning-tree">minimum spanning tree</a>
			
			<a class="mt-1 mb-1" href="/tags/monotonic-queue">monotonic queue</a>
			
			<a class="mt-1 mb-1" href="/tags/monotonic-stack">monotonic stack</a>
			
			<a class="mt-1 mb-1" href="/tags/number-theory">number theory</a>
			
			<a class="mt-1 mb-1" href="/tags/ordered-set">ordered set</a>
			
			<a class="mt-1 mb-1" href="/tags/prefix-sum">prefix sum</a>
			
			<a class="mt-1 mb-1" href="/tags/probability-and-statistics">probability and statistics</a>
			
			<a class="mt-1 mb-1" href="/tags/queue">queue</a>
			
			<a class="mt-1 mb-1" href="/tags/quickselect">quickselect</a>
			
			<a class="mt-1 mb-1" href="/tags/radix-sort">radix sort</a>
			
			<a class="mt-1 mb-1" href="/tags/randomized">randomized</a>
			
			<a class="mt-1 mb-1" href="/tags/recursion">recursion</a>
			
			<a class="mt-1 mb-1" href="/tags/reservoir-sampling">reservoir sampling</a>
			
			<a class="mt-1 mb-1" href="/tags/rolling-hash">rolling hash</a>
			
			<a class="mt-1 mb-1" href="/tags/segment-tree">segment tree</a>
			
			<a class="mt-1 mb-1" href="/tags/shortest-path">shortest path</a>
			
			<a class="mt-1 mb-1" href="/tags/simulation">simulation</a>
			
			<a class="mt-1 mb-1" href="/tags/sliding-window">sliding window</a>
			
			<a class="mt-1 mb-1" href="/tags/sorting">sorting</a>
			
			<a class="mt-1 mb-1" href="/tags/stack">stack</a>
			
			<a class="mt-1 mb-1" href="/tags/string">string</a>
			
			<a class="mt-1 mb-1" href="/tags/string-matching">string matching</a>
			
			<a class="mt-1 mb-1" href="/tags/topological-sort">topological sort</a>
			
			<a class="mt-1 mb-1" href="/tags/tree">tree</a>
			
			<a class="mt-1 mb-1" href="/tags/trie">trie</a>
			
			<a class="mt-1 mb-1" href="/tags/two-pointers">two pointers</a>
			
			<a class="mt-1 mb-1" href="/tags/union-find">union find</a>
			
		</div>
	</div>
</div>

<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="https://www.grid47.xyz/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
