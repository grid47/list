<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 2501: Longest Square Streak in an Array | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 2501: Longest Square Streak in an Array">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 2501: Longest Square Streak in an Array in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-2501-longest-square-streak-in-an-array/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 2501: Longest Square Streak in an Array">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 2501: Longest Square Streak in an Array in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-03-01T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Hash Table">
    <meta property="article:tag" content="Binary Search">
    <meta property="article:tag" content="Dynamic Programming">
    <meta property="article:tag" content="Sorting">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 2501: Longest Square Streak in an Array</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode797s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> longestSquareStreak(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> nums) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> nums.size();
</span></span><span style="display:flex;"><span>        sort(nums.begin(), nums.end());
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> dp(n, <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> mx <span style="color:#666">=</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i<span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> tmp <span style="color:#666">=</span> (<span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span>) nums[i] <span style="color:#666">*</span> nums[i];
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(tmp <span style="color:#666">&gt;</span> INT_MAX) <span style="color:#a2f;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">auto</span> it <span style="color:#666">=</span> lower_bound(nums.begin(), nums.end(), tmp);
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(it <span style="color:#666">==</span> nums.end()) <span style="color:#a2f;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">int</span> pos <span style="color:#666">=</span> it <span style="color:#666">-</span> nums.begin();
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">while</span>(pos <span style="color:#666">&lt;</span> n <span style="color:#666">&amp;&amp;</span> nums[i] <span style="color:#666">*</span> nums[i] <span style="color:#666">==</span> nums[pos]) {
</span></span><span style="display:flex;"><span>                    dp[pos] <span style="color:#666">=</span> max(dp[pos], <span style="color:#666">1</span> <span style="color:#666">+</span> dp[i]);                
</span></span><span style="display:flex;"><span>                    mx <span style="color:#666">=</span> max(mx, dp[pos]);  
</span></span><span style="display:flex;"><span>                    pos<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> mx <span style="color:#666">==</span> <span style="color:#666">1</span><span style="color:#666">?</span> <span style="color:#666">-</span><span style="color:#666">1</span><span style="color:#666">:</span> mx;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem asks us to find the length of the longest streak of elements in an array such that each element is the square of the previous element in the streak. In other words, for each number <code>x</code>, we need to find a sequence where each subsequent number is <code>x^2</code>. If such a streak doesn&rsquo;t exist, return <code>-1</code>. If a streak exists, return the length of the longest streak.</p>
<h3 id="approach">Approach</h3>
<p>The approach for solving this problem involves:</p>
<ol>
<li><strong>Sorting the input array</strong>: Sorting the array allows us to efficiently check for each number whether its square exists in the array.</li>
<li><strong>Dynamic Programming</strong>: Use dynamic programming (<code>dp</code>) to track the length of the longest streak ending at each element of the array.</li>
<li><strong>Efficient Search with Binary Search</strong>: To find the square of each number, we can use binary search (<code>lower_bound</code>) to quickly check if the square of the current element exists in the array.</li>
<li><strong>Updating the Longest Streak</strong>: As we go through the array, we update the longest streak (<code>mx</code>) whenever we find a valid streak.</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<h4 id="step-1-sorting-the-input-array">Step 1: Sorting the Input Array</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> nums.size();
</span></span><span style="display:flex;"><span>sort(nums.begin(), nums.end());
</span></span></code></pre></div><p>The first step is to sort the array. Sorting helps us efficiently check if a number&rsquo;s square exists in the array, as the array is ordered.</p>
<ul>
<li>Sorting ensures that when we look for the square of a number, it will be positioned in a way that allows binary search to work effectively. This reduces the complexity of checking for squares.</li>
</ul>
<h4 id="step-2-initialize-dynamic-programming-array">Step 2: Initialize Dynamic Programming Array</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> dp(n, <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> mx <span style="color:#666">=</span> <span style="color:#666">1</span>;
</span></span></code></pre></div><ul>
<li><strong>dp</strong>: This is a dynamic programming array that stores the length of the longest streak ending at each element of the array. Initially, each element has a streak of length 1 (itself).</li>
<li><strong>mx</strong>: This variable tracks the maximum length of any streak found during the iteration.</li>
</ul>
<h4 id="step-3-iterate-through-the-array-and-check-for-squares">Step 3: Iterate Through the Array and Check for Squares</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> tmp <span style="color:#666">=</span> (<span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span>) nums[i] <span style="color:#666">*</span> nums[i];
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(tmp <span style="color:#666">&gt;</span> INT_MAX) <span style="color:#a2f;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">auto</span> it <span style="color:#666">=</span> lower_bound(nums.begin(), nums.end(), tmp);
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(it <span style="color:#666">==</span> nums.end()) <span style="color:#a2f;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> pos <span style="color:#666">=</span> it <span style="color:#666">-</span> nums.begin();
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">while</span>(pos <span style="color:#666">&lt;</span> n <span style="color:#666">&amp;&amp;</span> nums[i] <span style="color:#666">*</span> nums[i] <span style="color:#666">==</span> nums[pos]) {
</span></span><span style="display:flex;"><span>        dp[pos] <span style="color:#666">=</span> max(dp[pos], <span style="color:#666">1</span> <span style="color:#666">+</span> dp[i]);                
</span></span><span style="display:flex;"><span>        mx <span style="color:#666">=</span> max(mx, dp[pos]);  
</span></span><span style="display:flex;"><span>        pos<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p><strong>Iterating over each element</strong>: For each element <code>nums[i]</code>, we check whether its square exists in the array.</p>
<ol>
<li>
<p><strong>Calculate the square of the number</strong>: We calculate the square of <code>nums[i]</code> and store it in <code>tmp</code>.</p>
</li>
<li>
<p><strong>Check for overflow</strong>: If the square of the number exceeds <code>INT_MAX</code>, we break out of the loop since squares larger than this would not be valid for a 32-bit integer range.</p>
</li>
<li>
<p><strong>Find the position using binary search</strong>: We use <code>lower_bound</code> to find the smallest position <code>it</code> in the array where <code>tmp</code> (the square of <code>nums[i]</code>) could be inserted. If <code>it == nums.end()</code>, it means the square does not exist in the array, so we exit the loop.</p>
</li>
<li>
<p><strong>Updating the DP array</strong>: We start from the position <code>pos</code> and check if the value at <code>pos</code> is equal to the square of the current number (<code>nums[i] * nums[i]</code>). If it is, we update the <code>dp</code> array to record the maximum streak length for that number. We update <code>mx</code> accordingly, keeping track of the longest streak found so far.</p>
</li>
</ol>
</li>
</ul>
<h4 id="step-4-handle-edge-case-and-return-result">Step 4: Handle Edge Case and Return Result</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> mx <span style="color:#666">==</span> <span style="color:#666">1</span><span style="color:#666">?</span> <span style="color:#666">-</span><span style="color:#666">1</span><span style="color:#666">:</span> mx;
</span></span></code></pre></div><p>Once the loop completes, we check if the longest streak <code>mx</code> is still <code>1</code>. If it is, it means no valid streak of length greater than 1 was found, and we return <code>-1</code>. Otherwise, we return <code>mx</code>, the length of the longest streak found.</p>
<h3 id="complexity-analysis">Complexity Analysis</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<ul>
<li><strong>Sorting the array</strong>: The sorting step takes (O(n \log n)), where (n) is the number of elements in the input array.</li>
<li><strong>Binary search for each element</strong>: For each element, we perform a binary search (<code>lower_bound</code>) to find the position of its square in the array. This binary search takes (O(\log n)).</li>
<li><strong>Updating the DP array</strong>: The inner while loop runs once for each occurrence of the square of the current element, but at most it runs (n) times across all elements. In the worst case, the complexity of updating the <code>dp</code> array is (O(n)).</li>
</ul>
<p>Thus, the overall time complexity is dominated by the sorting step, giving a total complexity of (O(n \log n)).</p>
<h4 id="space-complexity">Space Complexity:</h4>
<ul>
<li><strong>Space for the <code>dp</code> array</strong>: The <code>dp</code> array has a size of (n), so it requires (O(n)) space.</li>
<li><strong>Auxiliary space for the binary search</strong>: The binary search uses (O(1)) extra space, so it doesn&rsquo;t contribute significantly to space complexity.</li>
</ul>
<p>Therefore, the overall space complexity is (O(n)), where (n) is the number of elements in the array.</p>
<h3 id="conclusion">Conclusion</h3>
<p>In conclusion, this solution efficiently calculates the longest streak of elements where each element is the square of the previous element using sorting, binary search, and dynamic programming. The approach works in (O(n \log n)) time complexity, making it suitable for moderately large inputs.</p>
<p>Key highlights:</p>
<ul>
<li><strong>Time Complexity</strong>: (O(n \log n)), due to sorting and binary search.</li>
<li><strong>Space Complexity</strong>: (O(n)), due to the <code>dp</code> array.</li>
</ul>
<p>This solution is both time-efficient and space-efficient, providing an optimal approach to solving the problem.</p>
<p><a href="https://leetcode.com/problems/longest-square-streak-in-an-array/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/prcJMNtokGI?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
