<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 2607: Make K-Subarray Sums Equal | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 2607: Make K-Subarray Sums Equal">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 2607: Make K-Subarray Sums Equal in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-2607-make-k-subarray-sums-equal/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 2607: Make K-Subarray Sums Equal">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 2607: Make K-Subarray Sums Equal in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-02-20T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Math">
    <meta property="article:tag" content="Sorting">
    <meta property="article:tag" content="Number Theory">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 2607: Make K-Subarray Sums Equal</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode871s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> solve(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> nums) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(nums.size() <span style="color:#666">==</span> <span style="color:#666">0</span>) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        sort(nums.begin(), nums.end());
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> hit <span style="color:#666">=</span> nums[nums.size() <span style="color:#666">/</span> <span style="color:#666">2</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> nums.size(); i<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>            res <span style="color:#666">+=</span> abs(hit <span style="color:#666">-</span> nums[i]);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#00a000">makeSubKSumEqual</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> arr, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> arr.size();
</span></span><span style="display:flex;"><span>        set<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> cnt;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> i;
</span></span><span style="display:flex;"><span>            vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> nums;
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">while</span>(<span style="color:#666">!</span>cnt.count(j)) {
</span></span><span style="display:flex;"><span>                cnt.insert(j);
</span></span><span style="display:flex;"><span>                nums.push_back(arr[j]);
</span></span><span style="display:flex;"><span>                j <span style="color:#666">=</span> (j <span style="color:#666">+</span> k) <span style="color:#666">%</span> n;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            res <span style="color:#666">+=</span> solve(nums);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The task is to modify an array <code>arr</code> such that elements at every <code>k</code>-th position are equal by performing a series of operations. The operation is to make all elements in each cycle of <code>k</code>-th positions equal by minimizing the total cost. The cost is defined as the sum of absolute differences between the elements in the cycle and the median element of that cycle.</p>
<h3 id="approach">Approach</h3>
<p>To solve the problem, we can break the task into the following steps:</p>
<ol>
<li>
<p><strong>Grouping Elements Based on Indices Modulo k</strong>:
The first observation is that the elements that need to be made equal are grouped by their indices modulo <code>k</code>. This means that we can treat the array as having <code>k</code> separate groups. The elements in the group with indices <code>i, i+k, i+2k, ...</code> form a cycle and should be adjusted to the same value.</p>
</li>
<li>
<p><strong>Finding the Minimum Cost to Equalize a Group</strong>:
To minimize the cost of equalizing a group, we should convert all elements in the group to the median of the group. The reason for this is that the median minimizes the sum of absolute differences. This is a well-known property of the median in statistics. So, for each cycle, we find the median and compute the cost to convert every element to the median.</p>
</li>
<li>
<p><strong>Computing the Result</strong>:
For each cycle, we compute the total cost of making all elements equal to the median and sum up these costs to get the final result.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<h4 id="1-helper-function-to-compute-the-cost-for-a-group">1. <strong>Helper Function to Compute the Cost for a Group</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#00a000">solve</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> nums) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(nums.size() <span style="color:#666">==</span> <span style="color:#666">0</span>) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>    sort(nums.begin(), nums.end());
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> hit <span style="color:#666">=</span> nums[nums.size() <span style="color:#666">/</span> <span style="color:#666">2</span>];  <span style="color:#080;font-style:italic">// The median of the sorted group
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> nums.size(); i<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>        res <span style="color:#666">+=</span> abs(hit <span style="color:#666">-</span> nums[i]);  <span style="color:#080;font-style:italic">// Sum of absolute differences
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>Purpose</strong>: This function computes the total cost of making all elements in a given group equal to the median of the group.</li>
<li><strong>Steps</strong>:
<ul>
<li>First, we sort the array of elements. This allows us to easily find the median element, which is the middle element in a sorted array.</li>
<li>We then calculate the sum of absolute differences between each element and the median.</li>
<li>Finally, we return the total cost.</li>
</ul>
</li>
</ul>
<h4 id="2-main-function-to-solve-the-problem">2. <strong>Main Function to Solve the Problem</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#00a000">makeSubKSumEqual</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> arr, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> arr.size();
</span></span><span style="display:flex;"><span>    set<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> cnt;  <span style="color:#080;font-style:italic">// Set to track visited elements
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>;  <span style="color:#080;font-style:italic">// Final result
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> i;
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> nums;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">// Grouping elements based on their indices modulo k
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">while</span>(<span style="color:#666">!</span>cnt.count(j)) {
</span></span><span style="display:flex;"><span>            cnt.insert(j);  <span style="color:#080;font-style:italic">// Mark this element as visited
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            nums.push_back(arr[j]);  <span style="color:#080;font-style:italic">// Add the element to the current group
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            j <span style="color:#666">=</span> (j <span style="color:#666">+</span> k) <span style="color:#666">%</span> n;  <span style="color:#080;font-style:italic">// Move to the next index in the cycle
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">// Calculate the cost for this group
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        res <span style="color:#666">+=</span> solve(nums);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>Purpose</strong>: This function calculates the minimum cost required to make all elements at each <code>k</code>-th position equal.</li>
<li><strong>Steps</strong>:
<ul>
<li>
<p><strong>Initialize Variables</strong>:</p>
<ul>
<li><code>n</code> is the size of the array <code>arr</code>.</li>
<li><code>cnt</code> is a set used to keep track of the elements we&rsquo;ve already processed to avoid redundant work.</li>
<li><code>res</code> is the variable that accumulates the total cost.</li>
</ul>
</li>
<li>
<p><strong>Iterating Through the Array</strong>:</p>
<ul>
<li>For each index <code>i</code> in the array, we form a cycle of indices by repeatedly adding <code>k</code> to <code>i</code> and taking the modulo <code>n</code> to wrap around the array. This forms the cycle of indices that need to be equalized.</li>
<li><code>nums</code> is a vector that stores the elements in the current cycle.</li>
<li>We use a <code>while</code> loop to keep adding elements to <code>nums</code> until we&rsquo;ve visited all elements in the current cycle, and mark the indices as visited by adding them to the <code>cnt</code> set.</li>
</ul>
</li>
<li>
<p><strong>Calculate Cost for Each Group</strong>:</p>
<ul>
<li>Once a cycle is formed, we call the <code>solve</code> function to compute the cost of making all elements in this group equal to the median.</li>
<li>We accumulate this cost in <code>res</code>.</li>
</ul>
</li>
<li>
<p><strong>Return the Final Result</strong>: After processing all cycles, we return the accumulated cost <code>res</code>.</p>
</li>
</ul>
</li>
</ul>
<h3 id="complexity-analysis">Complexity Analysis</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<ul>
<li>
<p><strong>Sorting</strong>: Sorting the elements in each group takes (O(m \log m)), where (m) is the size of the group. Since there are at most (k) different groups, the total sorting cost for all groups is (O(n \log n)), where (n) is the size of the array.</p>
</li>
<li>
<p><strong>Cycle Construction and Cost Calculation</strong>: For each element in the array, we process it exactly once. Constructing the cycles and calculating the cost for each group both take linear time relative to the size of the array. Hence, this step takes (O(n)).</p>
</li>
<li>
<p><strong>Overall Time Complexity</strong>: The overall time complexity is dominated by the sorting step, which is (O(n \log n)).</p>
</li>
</ul>
<h4 id="space-complexity">Space Complexity:</h4>
<ul>
<li>
<p><strong>Auxiliary Space</strong>: The space used by the <code>cnt</code> set and the <code>nums</code> vector is proportional to the number of elements in the array, so the space complexity is (O(n)).</p>
</li>
<li>
<p><strong>Overall Space Complexity</strong>: The overall space complexity is (O(n)), as we only need space for storing the elements of the current cycle and tracking the visited elements.</p>
</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>This solution efficiently calculates the minimum cost required to make elements at each <code>k</code>-th index equal by grouping elements based on their indices modulo <code>k</code> and minimizing the cost within each group. The algorithm leverages sorting and Kadane&rsquo;s-like logic for calculating the cost in each cycle. The overall time complexity is (O(n \log n)), which makes it feasible for large inputs. This approach is optimal in terms of both time and space, providing a solution to the problem in a systematic and efficient manner.</p>
<p><a href="https://leetcode.com/problems/make-k-subarray-sums-equal/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/aBMFrPs2I5c?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
