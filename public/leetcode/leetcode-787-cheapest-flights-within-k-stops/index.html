<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 787: Cheapest Flights Within K Stops | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 787: Cheapest Flights Within K Stops">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 787: Cheapest Flights Within K Stops in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-787-cheapest-flights-within-k-stops/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 787: Cheapest Flights Within K Stops">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 787: Cheapest Flights Within K Stops in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-08-20T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Dynamic Programming">
    <meta property="article:tag" content="Depth-First Search">
    <meta property="article:tag" content="Breadth-First Search">
    <meta property="article:tag" content="Graph">
    <meta property="article:tag" content="Heap (Priority Queue)">
    <meta property="article:tag" content="Shortest Path">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 787: Cheapest Flights Within K Stops</h1> 
            </div>
			<div class="article-post">
				<h2 id="hahahugoshortcode1306s0hbhb"><figure class="remote-image" style="text-align:center; margin: 0;">
    <div style="position: relative; width:900px; max-width:100%; padding-bottom:56.25%; overflow: hidden; border-radius:0px;">
      <img src="https://raw.githubusercontent.com/grid47/list-images/refs/heads/main/list/787.webp" 
           alt="A map where the cheapest flight path is calculated, glowing softly as the optimal path is found." 
           style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
    </div>
    
      <figcaption style="font-size: 0.8em; font-weight: 300; color:#555; margin-top: 4px; line-height: 1.2;">
        Solution to LeetCode 787: Cheapest Flights Within K Stops Problem
      </figcaption>
    
  </figure>
  </h2>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1306s1hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">//bellman ford.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#080;font-style:italic">//just run it k+1 iterations.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#0b0;font-weight:bold">int</span> findCheapestPrice(<span style="color:#0b0;font-weight:bold">int</span> n, vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> a, <span style="color:#0b0;font-weight:bold">int</span> src, <span style="color:#0b0;font-weight:bold">int</span> sink, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> c(n, <span style="color:#666">1e8</span>);
</span></span><span style="display:flex;"><span>        c[src] <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> z<span style="color:#666">=</span><span style="color:#666">0</span>; z<span style="color:#666">&lt;=</span>k; z<span style="color:#666">++</span>){
</span></span><span style="display:flex;"><span>            vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> C(c);
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#a2f;font-weight:bold">auto</span> <span style="color:#a0a000">e</span>: a)
</span></span><span style="display:flex;"><span>                C[e[<span style="color:#666">1</span>]] <span style="color:#666">=</span> min(C[e[<span style="color:#666">1</span>]], c[e[<span style="color:#666">0</span>]] <span style="color:#666">+</span> e[<span style="color:#666">2</span>]);
</span></span><span style="display:flex;"><span>            c <span style="color:#666">=</span> C;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> c[sink] <span style="color:#666">==</span> <span style="color:#666">1e8</span> <span style="color:#666">?</span> <span style="color:#666">-</span><span style="color:#666">1</span> <span style="color:#666">:</span> c[sink];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>In this problem, we are tasked with finding the <strong>cheapest price</strong> for traveling from a source city (<code>src</code>) to a destination city (<code>sink</code>) within <strong>at most <code>k</code> stops</strong>. We are given a graph where each node represents a city, and each edge represents a direct flight between two cities with a specified cost. The goal is to determine the minimum cost to travel from <code>src</code> to <code>sink</code>, ensuring that the number of stops along the way does not exceed <code>k</code>. If it is not possible to reach the destination within the specified number of stops, we should return <code>-1</code>.</p>
<h3 id="approach">Approach</h3>
<p>The problem can be solved using a <strong>modified version of the Bellman-Ford algorithm</strong>, which is typically used for finding the shortest paths in graphs with negative weight edges. In this case, instead of finding the shortest path with unlimited stops, we modify the Bellman-Ford algorithm to only allow <strong><code>k + 1</code> iterations</strong>, where <code>k</code> is the maximum allowed number of stops.</p>
<p>Bellman-Ford works by iteratively relaxing the edges, meaning it updates the distance to each vertex by checking if a shorter path is found through another vertex. By performing the relaxation process for a limited number of iterations (<code>k + 1</code>), we ensure that we only consider paths with up to <code>k</code> stops.</p>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<p>Let’s break down the code step by step to understand how it works:</p>
<ol>
<li>
<p><strong>Initialization</strong>:</p>
<ul>
<li>We start by initializing a vector <code>c</code> of size <code>n</code> (the number of cities) with very large values (<code>1e8</code>), which represent the initial &ldquo;infinity&rdquo; cost of traveling to any city. The distance to the source city (<code>src</code>) is set to <code>0</code> because it costs nothing to be at the source.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> c(n, <span style="color:#666">1e8</span>);
</span></span><span style="display:flex;"><span>c[src] <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span></code></pre></div></li>
<li>
<p><strong>Relaxation for <code>k+1</code> Iterations</strong>:</p>
<ul>
<li>The main idea behind the Bellman-Ford algorithm is to repeatedly relax all edges in the graph to update the shortest paths.</li>
<li>We perform <code>k + 1</code> iterations to allow for paths with at most <code>k</code> stops. In each iteration, we maintain a copy of the current distances in <code>C</code> and update the distance to the cities based on the edges. This ensures that we only consider paths with up to <code>k</code> stops.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#0b0;font-weight:bold">int</span> z <span style="color:#666">=</span> <span style="color:#666">0</span>; z <span style="color:#666">&lt;=</span> k; z<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> C(c);  <span style="color:#080;font-style:italic">// Make a copy of the current distances
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#a2f;font-weight:bold">auto</span> <span style="color:#a0a000">e</span> : a)   <span style="color:#080;font-style:italic">// Iterate over all flights (edges)
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        C[e[<span style="color:#666">1</span>]] <span style="color:#666">=</span> min(C[e[<span style="color:#666">1</span>]], c[e[<span style="color:#666">0</span>]] <span style="color:#666">+</span> e[<span style="color:#666">2</span>]);
</span></span><span style="display:flex;"><span>    c <span style="color:#666">=</span> C;  <span style="color:#080;font-style:italic">// Update the current distances with the new values
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>}
</span></span></code></pre></div><ul>
<li>Here, <code>a</code> is the list of flights, where each flight is represented as a vector <code>[u, v, price]</code>, indicating a flight from city <code>u</code> to city <code>v</code> with a cost of <code>price</code>.</li>
<li>For each flight <code>(u, v, price)</code>, we check if traveling from <code>u</code> to <code>v</code> through the current path offers a cheaper price. If it does, we update the distance to <code>v</code>.</li>
</ul>
</li>
<li>
<p><strong>Returning the Result</strong>:</p>
<ul>
<li>After <code>k + 1</code> iterations, the distance to the destination city <code>sink</code> is found in <code>c[sink]</code>. If <code>c[sink]</code> is still <code>1e8</code>, this means it is impossible to reach the destination within <code>k</code> stops, and we return <code>-1</code>.</li>
<li>Otherwise, we return the minimum cost to reach <code>sink</code>.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> c[sink] <span style="color:#666">==</span> <span style="color:#666">1e8</span> <span style="color:#666">?</span> <span style="color:#666">-</span><span style="color:#666">1</span> <span style="color:#666">:</span> c[sink];
</span></span></code></pre></div><ul>
<li>If <code>c[sink]</code> holds the &ldquo;infinity&rdquo; value, it indicates that no valid path to <code>sink</code> was found within <code>k</code> stops, and the function returns <code>-1</code> to signify that it&rsquo;s impossible to reach the destination.</li>
<li>Otherwise, the function returns the cost stored in <code>c[sink]</code>, which is the cheapest price to reach the destination.</li>
</ul>
</li>
</ol>
<h3 id="complexity-analysis">Complexity Analysis</h3>
<ul>
<li>
<p><strong>Time Complexity</strong>:</p>
<ul>
<li>The algorithm runs in <code>O((k + 1) * E)</code> time, where <code>E</code> is the number of edges (flights) in the graph. This is because, in each iteration, we relax all the edges, and we perform <code>k + 1</code> iterations.</li>
<li>Since the number of edges <code>E</code> is typically much larger than the number of nodes <code>n</code> in a graph, the time complexity is dominated by the edge count, making the time complexity <strong>O((k + 1) * E)</strong>.</li>
<li>If <code>k</code> is much smaller than the number of cities <code>n</code>, this is much more efficient than running a traditional Dijkstra’s algorithm for each source-destination pair.</li>
</ul>
</li>
<li>
<p><strong>Space Complexity</strong>:</p>
<ul>
<li>The space complexity is <strong>O(n)</strong>, as we use a vector <code>c</code> of size <code>n</code> to store the minimum costs to reach each city, and a few additional variables for iteration. This is a space-efficient solution, especially for large graphs.</li>
</ul>
</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>The solution efficiently finds the <strong>cheapest flight price</strong> between two cities with <strong>at most <code>k</code> stops</strong> using a modified <strong>Bellman-Ford algorithm</strong>. By performing <code>k + 1</code> iterations of edge relaxation, the algorithm ensures that we only consider paths with up to <code>k</code> stops. This allows us to handle cases where traditional shortest-path algorithms, like Dijkstra’s, may not work due to the constraint on the number of stops.</p>
<p>This approach is particularly beneficial for graphs with a moderate number of stops (controlled by <code>k</code>) and offers an optimal solution to the problem with respect to both time and space complexity. Bellman-Ford is well-suited for graphs with a large number of edges, making this solution effective for many real-world applications, including flight pricing, network routing, and transportation systems.</p>
<p>In summary, the Bellman-Ford algorithm is an ideal choice for this problem due to its ability to handle edge relaxation efficiently, even with constraints on the number of stops. By limiting the number of iterations to <code>k + 1</code>, the algorithm optimally computes the shortest path with respect to the number of stops while ensuring that the solution remains both time and space efficient.</p>
<p><a href="https://leetcode.com/problems/cheapest-flights-within-k-stops/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/WDxnQSAvNbI?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
