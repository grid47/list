<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 518: Coin Change II | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 518: Coin Change II">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 518: Coin Change II in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-518-coin-change-ii/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 518: Coin Change II">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 518: Coin Change II in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-09-16T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Dynamic Programming">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 518: Coin Change II</h1> 
            </div>
			<div class="article-post">
				<h2 id="hahahugoshortcode1174s0hbhb"><figure class="remote-image" style="text-align:center; margin: 0;">
    <div style="position: relative; width:900px; max-width:100%; padding-bottom:56.25%; overflow: hidden; border-radius:0px;">
      <img src="https://raw.githubusercontent.com/grid47/list-images/refs/heads/main/list/518.webp" 
           alt="A series of coins where the minimum number of coins needed to make a change is glowing and highlighted." 
           style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
    </div>
    
      <figcaption style="font-size: 0.8em; font-weight: 300; color:#555; margin-top: 4px; line-height: 1.2;">
        Solution to LeetCode 518: Coin Change II Problem
      </figcaption>
    
  </figure>
  </h2>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1174s1hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> memo[<span style="color:#666">5001</span>][<span style="color:#666">301</span>];
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> nums;
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">dp</span>(<span style="color:#0b0;font-weight:bold">int</span> amnt, <span style="color:#0b0;font-weight:bold">int</span> idx) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(idx <span style="color:#666">==</span> nums.size()) <span style="color:#a2f;font-weight:bold">return</span> amnt <span style="color:#666">==</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(memo[amnt][idx] <span style="color:#666">!=</span> <span style="color:#666">-</span><span style="color:#666">1</span>) <span style="color:#a2f;font-weight:bold">return</span> memo[amnt][idx];
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">// cout &lt;&lt; amnt &lt;&lt; &#34; &#34; &lt;&lt; idx &lt;&lt; &#34; &#34; &lt;&lt; nums[idx]&lt;&lt; &#34;\n&#34;;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> dp(amnt, idx <span style="color:#666">+</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(amnt <span style="color:#666">&gt;=</span> nums[idx])
</span></span><span style="display:flex;"><span>        res <span style="color:#666">+=</span> dp(amnt <span style="color:#666">-</span> nums[idx], idx);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> memo[amnt][idx] <span style="color:#666">=</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">static</span> <span style="color:#0b0;font-weight:bold">bool</span> <span style="color:#00a000">cmp</span>(<span style="color:#0b0;font-weight:bold">int</span> a, <span style="color:#0b0;font-weight:bold">int</span> b) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> b <span style="color:#666">&lt;</span> a;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">change</span>(<span style="color:#0b0;font-weight:bold">int</span> amount, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> coins) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">-&gt;</span>nums <span style="color:#666">=</span> coins;
</span></span><span style="display:flex;"><span>        sort(nums.begin(), nums.end(), cmp);
</span></span><span style="display:flex;"><span>        memset(memo, <span style="color:#666">-</span><span style="color:#666">1</span>, <span style="color:#a2f;font-weight:bold">sizeof</span>(memo));
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> dp(amount, <span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The task is to determine the number of ways to make a given amount using a set of coins. You are provided with an integer <code>amount</code> and a list of <code>coins</code>, where each coin has a specific denomination. The goal is to find how many different combinations of the coins can sum up to the specified <code>amount</code>.</p>
<p>You can use each coin any number of times. For example:</p>
<ul>
<li>Given coins <code>[1, 2, 5]</code> and amount <code>5</code>, there are 4 ways to make the amount:
<ul>
<li><code>5 = 5</code></li>
<li><code>5 = 2 + 2 + 1</code></li>
<li><code>5 = 2 + 1 + 1 + 1</code></li>
<li><code>5 = 1 + 1 + 1 + 1 + 1</code></li>
</ul>
</li>
</ul>
<p>The task is to return the number of ways to make the amount using the given coins.</p>
<h3 id="approach">Approach</h3>
<p>This problem is a classic <strong>dynamic programming</strong> problem that can be solved using a bottom-up approach. The idea is to keep track of the number of ways to achieve each possible sum from <code>0</code> to the <code>amount</code> using the available coins. The solution relies on the <strong>unbounded knapsack problem</strong> approach where each coin can be used an unlimited number of times.</p>
<h4 id="key-steps">Key Steps:</h4>
<ol>
<li>
<p><strong>Dynamic Programming Table (Memoization)</strong>: We will use a 2D memoization table <code>memo[amount][idx]</code> to store the results of subproblems. The index <code>idx</code> represents the current coin being considered, and <code>amnt</code> represents the remaining amount that needs to be made.</p>
</li>
<li>
<p><strong>Recursion with Memoization</strong>:</p>
<ul>
<li>If we are at the last coin and the remaining amount is <code>0</code>, it means we have found one valid way of making the amount, so we return <code>1</code>.</li>
<li>If the remaining amount is greater than or equal to the current coin value, we can either:
<ul>
<li>Skip the current coin (move to the next coin).</li>
<li>Use the current coin and reduce the remaining amount by the value of the coin.</li>
</ul>
</li>
<li>We store the result of each subproblem in the memo table to avoid redundant calculations.</li>
</ul>
</li>
<li>
<p><strong>Sorting Coins</strong>: Sorting the coins in decreasing order helps in optimization. By trying larger coins first, the recursion tree becomes smaller and may terminate earlier, avoiding unnecessary checks.</p>
</li>
<li>
<p><strong>Base Case</strong>:</p>
<ul>
<li>If all coins are considered and the remaining amount is <code>0</code>, we have found one valid combination.</li>
<li>If all coins are considered and the remaining amount is greater than <code>0</code>, no valid combination can be formed from the remaining coins, so we return <code>0</code>.</li>
</ul>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<p>Let&rsquo;s break down the code and explain how each part works.</p>
<h4 id="1-initialization">1. <strong>Initialization</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> memo[<span style="color:#666">5001</span>][<span style="color:#666">301</span>];
</span></span><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> nums;
</span></span></code></pre></div><ul>
<li>We define a memoization table <code>memo</code> where <code>memo[amnt][idx]</code> stores the number of ways to make the amount <code>amnt</code> using coins from index <code>idx</code> to the end of the <code>nums</code> array. The maximum amount is <code>5001</code>, and the maximum number of coins is <code>301</code>.</li>
<li>We store the coins in the <code>nums</code> vector.</li>
</ul>
<h4 id="2-recursive-dp-function">2. <strong>Recursive DP Function</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">dp</span>(<span style="color:#0b0;font-weight:bold">int</span> amnt, <span style="color:#0b0;font-weight:bold">int</span> idx) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(idx <span style="color:#666">==</span> nums.size()) <span style="color:#a2f;font-weight:bold">return</span> amnt <span style="color:#666">==</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(memo[amnt][idx] <span style="color:#666">!=</span> <span style="color:#666">-</span><span style="color:#666">1</span>) <span style="color:#a2f;font-weight:bold">return</span> memo[amnt][idx];
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> dp(amnt, idx <span style="color:#666">+</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(amnt <span style="color:#666">&gt;=</span> nums[idx])
</span></span><span style="display:flex;"><span>        res <span style="color:#666">+=</span> dp(amnt <span style="color:#666">-</span> nums[idx], idx);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> memo[amnt][idx] <span style="color:#666">=</span> res;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p><strong>Base Case</strong>: If <code>idx == nums.size()</code>, it means we have considered all coins. If the remaining amount (<code>amnt</code>) is <code>0</code>, we return <code>1</code> as we found one valid way of making the amount. Otherwise, we return <code>0</code> since no valid way exists.</p>
</li>
<li>
<p><strong>Memoization Check</strong>: If <code>memo[amnt][idx]</code> is not <code>-1</code>, it means we have already calculated the result for this subproblem, so we return the cached value to avoid recomputing it.</p>
</li>
<li>
<p><strong>Recursive Calculation</strong>:</p>
<ul>
<li>First, we calculate the number of ways to make the amount <code>amnt</code> without using the current coin (i.e., move to the next coin, <code>idx + 1</code>).</li>
<li>If the remaining amount (<code>amnt</code>) is greater than or equal to the current coin&rsquo;s value (<code>nums[idx]</code>), we also calculate the number of ways by using the current coin and reduce the amount by <code>nums[idx]</code>.</li>
</ul>
</li>
<li>
<p>The result is stored in <code>memo[amnt][idx]</code> to avoid recomputation.</p>
</li>
</ul>
<h4 id="3-sorting-coins">3. <strong>Sorting Coins</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">static</span> <span style="color:#0b0;font-weight:bold">bool</span> <span style="color:#00a000">cmp</span>(<span style="color:#0b0;font-weight:bold">int</span> a, <span style="color:#0b0;font-weight:bold">int</span> b) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> b <span style="color:#666">&lt;</span> a;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>We define a comparison function <code>cmp</code> to sort the coins in descending order. This ensures that we try the largest coins first during the recursion, which can lead to early termination of the recursion tree, optimizing the process.</li>
</ul>
<h4 id="4-main-function">4. <strong>Main Function</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">change</span>(<span style="color:#0b0;font-weight:bold">int</span> amount, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> coins) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">-&gt;</span>nums <span style="color:#666">=</span> coins;
</span></span><span style="display:flex;"><span>    sort(nums.begin(), nums.end(), cmp);
</span></span><span style="display:flex;"><span>    memset(memo, <span style="color:#666">-</span><span style="color:#666">1</span>, <span style="color:#a2f;font-weight:bold">sizeof</span>(memo));
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> dp(amount, <span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>We initialize the <code>nums</code> vector with the provided <code>coins</code> and sort it in descending order using <code>sort</code> and the custom <code>cmp</code> function.</li>
<li>We then reset the memoization table (<code>memo</code>) by setting all values to <code>-1</code> to indicate that no subproblems have been solved yet.</li>
<li>Finally, we call the recursive <code>dp</code> function to compute the number of ways to make the <code>amount</code> using the given coins starting from index <code>0</code>.</li>
</ul>
<h3 id="complexity">Complexity</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<ul>
<li><strong>O(amount × n)</strong>: The time complexity of this solution is determined by the size of the memoization table, which has a size of <code>5001 × 301</code>. We are solving each subproblem once and each subproblem takes constant time for recursion and calculation. Thus, the time complexity is <strong>O(amount × n)</strong>, where <code>amount</code> is the target amount and <code>n</code> is the number of coins.</li>
</ul>
<h4 id="space-complexity">Space Complexity:</h4>
<ul>
<li><strong>O(amount × n)</strong>: The space complexity is determined by the size of the memoization table (<code>memo[5001][301]</code>), which takes up <code>O(amount × n)</code> space. Additionally, the <code>nums</code> array requires space for the coins, which is <code>O(n)</code>.</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>This solution provides an efficient way to determine the number of ways to make a given amount using the available coins. By using dynamic programming with memoization, we avoid redundant calculations and optimize the process. Sorting the coins in descending order improves performance by reducing the recursion tree&rsquo;s depth.</p>
<p>The time and space complexity of <strong>O(amount × n)</strong> make this solution feasible for moderate input sizes, and the memoization ensures that subproblems are computed only once, making the solution both time-efficient and space-efficient.</p>
<p><a href="https://leetcode.com/problems/coin-change-ii/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/3Er7qS7CQUc?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
