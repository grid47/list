<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 1226: The Dining Philosophers | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1226: The Dining Philosophers">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1226: The Dining Philosophers in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-1226-the-dining-philosophers/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1226: The Dining Philosophers">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1226: The Dining Philosophers in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-07-07T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Concurrency">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 1226: The Dining Philosophers</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode110s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">DiningPhilosophers</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    mutex mtx[<span style="color:#666">5</span>];
</span></span><span style="display:flex;"><span>    DiningPhilosophers() {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">wantsToEat</span>(<span style="color:#0b0;font-weight:bold">int</span> philosopher,
</span></span><span style="display:flex;"><span>                    function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> pickLeftFork,
</span></span><span style="display:flex;"><span>                    function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> pickRightFork,
</span></span><span style="display:flex;"><span>                    function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> eat,
</span></span><span style="display:flex;"><span>                    function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> putLeftFork,
</span></span><span style="display:flex;"><span>                    function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> putRightFork) {
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> left <span style="color:#666">=</span> philosopher;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> right <span style="color:#666">=</span> (philosopher <span style="color:#666">+</span> <span style="color:#666">1</span>) <span style="color:#666">%</span> <span style="color:#666">5</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        unique_lock<span style="color:#666">&lt;</span>mutex<span style="color:#666">&gt;</span> lck1(mtx[left], defer_lock);
</span></span><span style="display:flex;"><span>        unique_lock<span style="color:#666">&lt;</span>mutex<span style="color:#666">&gt;</span> lck2(mtx[right], defer_lock);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(philosopher <span style="color:#666">%</span> <span style="color:#666">2</span>) {
</span></span><span style="display:flex;"><span>            lck1.lock();
</span></span><span style="display:flex;"><span>            lck2.lock();
</span></span><span style="display:flex;"><span>            pickLeftFork();
</span></span><span style="display:flex;"><span>            pickRightFork();
</span></span><span style="display:flex;"><span>        } <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            lck2.lock();
</span></span><span style="display:flex;"><span>            lck1.lock();
</span></span><span style="display:flex;"><span>            pickLeftFork();
</span></span><span style="display:flex;"><span>            pickRightFork();            
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        eat();
</span></span><span style="display:flex;"><span>        putLeftFork();
</span></span><span style="display:flex;"><span>        putRightFork();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The Dining Philosophers problem is a classic synchronization problem in computer science that illustrates the challenges of resource sharing among concurrent processes. It involves five philosophers sitting at a dining table, where they alternate between thinking and eating. Each philosopher needs two forks (one to their left and one to their right) to eat. The challenge is to design a protocol that ensures:</p>
<ol>
<li>No two philosophers can use the same fork simultaneously, which could lead to a deadlock.</li>
<li>The system avoids starvation, where a philosopher could be perpetually denied the opportunity to eat.</li>
<li>Philosophers can pick up and put down forks in a manner that allows all of them to eat without conflicts.</li>
</ol>
<p>In this implementation, we utilize mutexes to represent the forks and ensure that the philosophers can acquire the forks in a safe manner, avoiding both deadlock and starvation.</p>
<h3 id="approach">Approach</h3>
<p>To solve the Dining Philosophers problem, the following approach is employed:</p>
<ol>
<li><strong>Fork Representation</strong>: Each fork is represented by a mutex. There are five mutexes corresponding to the five forks.</li>
<li><strong>Mutex Locking</strong>: Philosophers attempt to pick up the left and right forks using mutexes, ensuring that no two philosophers can access the same fork simultaneously.</li>
<li><strong>Lock Ordering</strong>: To prevent deadlock, we introduce an ordering in which the forks are acquired. Philosophers with an odd index pick up the left fork first, while those with an even index pick up the right fork first. This staggered approach prevents all philosophers from waiting for one another indefinitely.</li>
<li><strong>Function Callbacks</strong>: The function accepts callbacks that simulate picking up and putting down the forks, as well as the eating action.</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">DiningPhilosophers</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    mutex mtx[<span style="color:#666">5</span>];
</span></span></code></pre></div><ul>
<li><strong>Lines 1-2</strong>: We define the <code>DiningPhilosophers</code> class and create an array of mutexes (<code>mtx[5]</code>) to represent the five forks.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    DiningPhilosophers() {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><ul>
<li><strong>Lines 3-5</strong>: The constructor of the <code>DiningPhilosophers</code> class is defined, but it doesnâ€™t perform any operations. It&rsquo;s here to facilitate object creation.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">wantsToEat</span>(<span style="color:#0b0;font-weight:bold">int</span> philosopher,
</span></span><span style="display:flex;"><span>                    function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> pickLeftFork,
</span></span><span style="display:flex;"><span>                    function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> pickRightFork,
</span></span><span style="display:flex;"><span>                    function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> eat,
</span></span><span style="display:flex;"><span>                    function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> putLeftFork,
</span></span><span style="display:flex;"><span>                    function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> putRightFork) {
</span></span></code></pre></div><ul>
<li><strong>Lines 6-11</strong>: We define the <code>wantsToEat</code> method, which takes the philosopher&rsquo;s index and several function callbacks that represent the actions of picking up and putting down forks, as well as eating.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> left <span style="color:#666">=</span> philosopher;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> right <span style="color:#666">=</span> (philosopher <span style="color:#666">+</span> <span style="color:#666">1</span>) <span style="color:#666">%</span> <span style="color:#666">5</span>;
</span></span></code></pre></div><ul>
<li><strong>Lines 12-13</strong>: We determine the indices for the left and right forks. The left fork corresponds to the philosopher&rsquo;s index, while the right fork is calculated using modulo arithmetic to wrap around the array.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        unique_lock<span style="color:#666">&lt;</span>mutex<span style="color:#666">&gt;</span> lck1(mtx[left], defer_lock);
</span></span><span style="display:flex;"><span>        unique_lock<span style="color:#666">&lt;</span>mutex<span style="color:#666">&gt;</span> lck2(mtx[right], defer_lock);
</span></span></code></pre></div><ul>
<li><strong>Lines 14-15</strong>: We create two unique locks (<code>lck1</code> and <code>lck2</code>) for the left and right forks, initializing them with <code>defer_lock</code> to allow us to lock them later.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(philosopher <span style="color:#666">%</span> <span style="color:#666">2</span>) {
</span></span><span style="display:flex;"><span>            lck1.lock();
</span></span><span style="display:flex;"><span>            lck2.lock();
</span></span><span style="display:flex;"><span>            pickLeftFork();
</span></span><span style="display:flex;"><span>            pickRightFork();
</span></span><span style="display:flex;"><span>        } <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            lck2.lock();
</span></span><span style="display:flex;"><span>            lck1.lock();
</span></span><span style="display:flex;"><span>            pickLeftFork();
</span></span><span style="display:flex;"><span>            pickRightFork();            
</span></span><span style="display:flex;"><span>        }
</span></span></code></pre></div><ul>
<li><strong>Lines 16-24</strong>: We use an if-else statement to control the order in which the locks are acquired based on whether the philosopher index is odd or even:
<ul>
<li>If the philosopher&rsquo;s index is odd, they first lock the left fork and then the right fork.</li>
<li>If the index is even, they first lock the right fork and then the left fork.</li>
</ul>
</li>
<li>This alternating strategy prevents deadlock by ensuring that at least one philosopher can always pick up their forks without being blocked.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        eat();
</span></span><span style="display:flex;"><span>        putLeftFork();
</span></span><span style="display:flex;"><span>        putRightFork();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ul>
<li><strong>Lines 25-28</strong>: After acquiring both forks, the philosopher can perform the eating action. After eating, they put down the left and right forks by invoking the respective callbacks.</li>
</ul>
<h3 id="complexity">Complexity</h3>
<ol>
<li>
<p><strong>Time Complexity</strong>: The time complexity of the <code>wantsToEat</code> function primarily depends on the number of philosophers and the time taken for eating. However, since the locking mechanism is efficient, the operations of picking and putting down forks can be considered (O(1)) in average scenarios.</p>
</li>
<li>
<p><strong>Space Complexity</strong>: The space complexity is (O(1)) since the number of mutexes is constant (five) and does not change with input size.</p>
</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>The <code>DiningPhilosophers</code> class provides a robust solution to the classic synchronization problem using mutexes for managing access to shared resources. By employing an alternating strategy for locking forks based on philosopher indices, this implementation effectively avoids deadlocks and ensures that all philosophers can eventually eat without starvation. The approach illustrates the importance of careful resource management in concurrent programming and highlights the effectiveness of mutexes in synchronizing access to shared resources. This solution is well-suited for applications where resource contention is a concern and demonstrates good practices in concurrency control.</p>
<p><a href="https://leetcode.com/problems/the-dining-philosophers/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/cb6-GZiSaMY?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
