<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 948: Bag of Tokens | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 948: Bag of Tokens">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 948: Bag of Tokens in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-948-bag-of-tokens/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 948: Bag of Tokens">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 948: Bag of Tokens in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-08-04T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Two Pointers">
    <meta property="article:tag" content="Greedy">
    <meta property="article:tag" content="Sorting">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 948: Bag of Tokens</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1407s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> bagOfTokensScore(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> tokens, <span style="color:#0b0;font-weight:bold">int</span> power) {
</span></span><span style="display:flex;"><span>        sort(tokens.begin(), tokens.end());
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>, pts <span style="color:#666">=</span> <span style="color:#666">0</span>, i <span style="color:#666">=</span> <span style="color:#666">0</span>, j <span style="color:#666">=</span> tokens.size() <span style="color:#666">-</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">while</span>(i <span style="color:#666">&lt;=</span> j) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(power <span style="color:#666">&gt;=</span> tokens[i]) {
</span></span><span style="display:flex;"><span>                power <span style="color:#666">-=</span> tokens[i<span style="color:#666">++</span>];
</span></span><span style="display:flex;"><span>                res <span style="color:#666">=</span> max(res, <span style="color:#666">++</span>pts);
</span></span><span style="display:flex;"><span>            } <span style="color:#a2f;font-weight:bold">else</span> <span style="color:#00a000">if</span>(pts <span style="color:#666">&gt;</span> <span style="color:#666">0</span>) {
</span></span><span style="display:flex;"><span>                power <span style="color:#666">+=</span> tokens[j<span style="color:#666">--</span>];
</span></span><span style="display:flex;"><span>                pts<span style="color:#666">--</span>;
</span></span><span style="display:flex;"><span>            } <span style="color:#a2f;font-weight:bold">else</span> <span style="color:#a2f;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>In this problem, you are given a list of tokens and an initial amount of power. Each token can be used in one of two ways:</p>
<ol>
<li><strong>Gain Points</strong>: You can spend power equal to the value of the token to gain one point.</li>
<li><strong>Lose Points</strong>: You can lose one point to gain power equal to the value of the token.</li>
</ol>
<p>The objective is to maximize the total points you can accumulate using the available power. The goal is to design an efficient algorithm to determine the maximum points achievable, given the tokens and the initial power.</p>
<h3 id="approach">Approach</h3>
<p>To solve this problem optimally, we can use a <strong>greedy approach</strong>. Here&rsquo;s the rationale behind the approach:</p>
<ol>
<li>
<p><strong>Sorting Tokens</strong>: The first step is to sort the tokens in ascending order. Sorting helps us access the smallest and largest tokens easily, which is key for efficiently managing the available power.</p>
<ul>
<li>The <strong>smallest tokens</strong> allow us to spend minimal power for gaining points.</li>
<li>The <strong>largest tokens</strong> allow us to regain power by spending points.</li>
</ul>
</li>
<li>
<p><strong>Two Pointers Strategy</strong>: We use a two-pointer approach:</p>
<ul>
<li>One pointer, <code>i</code>, starts at the beginning of the sorted list (representing the smallest token).</li>
<li>The other pointer, <code>j</code>, starts at the end of the list (representing the largest token).</li>
</ul>
<p>This allows us to make decisions based on the token values at both extremes of the list.</p>
</li>
<li>
<p><strong>Greedy Decisions</strong>:</p>
<ul>
<li><strong>Gain Points</strong>: If the current power is greater than or equal to the value of the token at index <code>i</code>, we can spend the power to gain one point. We then increment the pointer <code>i</code> to the next token, subtract the token value from the available power, and increase the points.</li>
<li><strong>Lose Points</strong>: If we can no longer gain points (i.e., if the remaining power is less than the smallest remaining token), we check if we have any points to lose. If we do, we can lose a point and gain power equal to the value of the largest remaining token. We then decrement the pointer <code>j</code> and decrease the points.</li>
</ul>
</li>
<li>
<p><strong>Stopping Condition</strong>: The loop continues as long as there are tokens left to process (<code>i &lt;= j</code>). If neither of the conditions (gaining points or losing points) is possible, the loop terminates.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<ol>
<li>
<p><strong>Sorting the Tokens</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>sort(tokens.begin(), tokens.end());
</span></span></code></pre></div><ul>
<li>The tokens array is sorted in ascending order to facilitate easy access to the smallest and largest token values. Sorting ensures that we can efficiently make greedy decisions.</li>
</ul>
</li>
<li>
<p><strong>Initial Variables</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>, pts <span style="color:#666">=</span> <span style="color:#666">0</span>, i <span style="color:#666">=</span> <span style="color:#666">0</span>, j <span style="color:#666">=</span> tokens.size() <span style="color:#666">-</span> <span style="color:#666">1</span>;
</span></span></code></pre></div><ul>
<li><code>res</code> keeps track of the maximum points that can be achieved.</li>
<li><code>pts</code> tracks the current number of points the player has.</li>
<li><code>i</code> is the left pointer, pointing to the smallest token.</li>
<li><code>j</code> is the right pointer, pointing to the largest token.</li>
</ul>
</li>
<li>
<p><strong>Main Loop</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">while</span>(i <span style="color:#666">&lt;=</span> j) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(power <span style="color:#666">&gt;=</span> tokens[i]) {
</span></span><span style="display:flex;"><span>        power <span style="color:#666">-=</span> tokens[i<span style="color:#666">++</span>];
</span></span><span style="display:flex;"><span>        res <span style="color:#666">=</span> max(res, <span style="color:#666">++</span>pts);
</span></span><span style="display:flex;"><span>    } <span style="color:#a2f;font-weight:bold">else</span> <span style="color:#00a000">if</span>(pts <span style="color:#666">&gt;</span> <span style="color:#666">0</span>) {
</span></span><span style="display:flex;"><span>        power <span style="color:#666">+=</span> tokens[j<span style="color:#666">--</span>];
</span></span><span style="display:flex;"><span>        pts<span style="color:#666">--</span>;
</span></span><span style="display:flex;"><span>    } <span style="color:#a2f;font-weight:bold">else</span> <span style="color:#a2f;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>Gain Points</strong>: If the remaining power is greater than or equal to the token at position <code>i</code>, the player spends that power to gain a point. The pointer <code>i</code> moves to the next token, the power is reduced by the token value, and the points are incremented. The maximum points achieved (<code>res</code>) are updated.</li>
<li><strong>Lose Points</strong>: If we can&rsquo;t gain points but have points to lose (<code>pts &gt; 0</code>), we use one point to gain power from the token at position <code>j</code>. The pointer <code>j</code> moves leftward, and the points are decremented.</li>
<li><strong>Exit Condition</strong>: If neither gaining nor losing points is possible, the loop breaks.</li>
</ul>
</li>
<li>
<p><strong>Return Result</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> res;
</span></span></code></pre></div><p>After the loop ends, the variable <code>res</code> contains the maximum points achieved, which is then returned.</p>
</li>
</ol>
<h3 id="complexity">Complexity</h3>
<ul>
<li>
<p><strong>Time Complexity</strong>: The time complexity is dominated by the sorting step, which takes O(n log n), where <code>n</code> is the number of tokens. The subsequent loop runs in linear time, O(n), as each token is processed at most once. Therefore, the overall time complexity is O(n log n).</p>
</li>
<li>
<p><strong>Space Complexity</strong>: The space complexity is O(1) because the solution only uses a constant amount of extra space, regardless of the input size. We only store a few integer variables (<code>res</code>, <code>pts</code>, <code>i</code>, and <code>j</code>).</p>
</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>This solution efficiently maximizes the number of points achievable by using a greedy approach with a two-pointer technique. By sorting the tokens and making decisions based on the smallest and largest tokens, we ensure that we maximize the points while managing the available power. The time complexity of O(n log n) makes this solution suitable for large inputs, while the space complexity of O(1) ensures it runs efficiently with minimal additional memory usage. This approach strikes a balance between clarity and performance, making it an optimal solution for the problem at hand.</p>
<p><a href="https://leetcode.com/problems/bag-of-tokens/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/prI82maTivg?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
