<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 2958: Length of Longest Subarray With at Most K Frequency | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 2958: Length of Longest Subarray With at Most K Frequency">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 2958: Length of Longest Subarray With at Most K Frequency in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-2958-length-of-longest-subarray-with-at-most-k-frequency/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 2958: Length of Longest Subarray With at Most K Frequency">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 2958: Length of Longest Subarray With at Most K Frequency in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-01-16T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Hash Table">
    <meta property="article:tag" content="Sliding Window">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 2958: Length of Longest Subarray With at Most K Frequency</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1033s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> maxSubarrayLength(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> nums, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> mp;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>, res <span style="color:#666">=</span> <span style="color:#666">1</span>, n <span style="color:#666">=</span> nums.size();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            mp[nums[i]]<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">while</span>(mp[nums[i]] <span style="color:#666">&gt;</span> k) {
</span></span><span style="display:flex;"><span>                mp[nums[j]]<span style="color:#666">--</span>;
</span></span><span style="display:flex;"><span>                j<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> max(res, i <span style="color:#666">-</span> j <span style="color:#666">+</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement:</h3>
<p>Given an array <code>nums</code> and an integer <code>k</code>, the problem asks to find the <strong>maximum length of a subarray</strong> where no element appears more than <code>k</code> times. This means that for each subarray, the frequency of each element should not exceed <code>k</code>. If we find multiple subarrays that satisfy this condition, we return the length of the largest such subarray.</p>
<h3 id="approach">Approach:</h3>
<p>The problem can be solved using the <strong>sliding window technique</strong> along with a <strong>hashmap</strong> (or <code>map</code> in C++) to track the frequency of elements within the current window. The sliding window is a very efficient way to handle problems that require examining contiguous subarrays or subsequences.</p>
<ol>
<li>
<p><strong>Sliding Window Concept</strong>:</p>
<ul>
<li>We maintain a window of elements within the array where the condition (no element appears more than <code>k</code> times) holds true.</li>
<li>The window is adjusted dynamically by expanding the right side (increasing the <code>i</code> index) and contracting the left side (increasing the <code>j</code> index) whenever the condition is violated.</li>
</ul>
</li>
<li>
<p><strong>Hashmap (map)</strong>:</p>
<ul>
<li>We use a hashmap to store the frequency of each element in the current window.</li>
<li>As we move through the array, the frequency of each element is updated in the hashmap.</li>
<li>If the frequency of any element exceeds <code>k</code>, we shrink the window from the left by moving <code>j</code> until the condition is satisfied again.</li>
</ul>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step):</h3>
<p>Letâ€™s break down the code to understand each part.</p>
<h4 id="1-initialization">1. <strong>Initialization</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> mp;
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>, res <span style="color:#666">=</span> <span style="color:#666">1</span>, n <span style="color:#666">=</span> nums.size();
</span></span></code></pre></div><ul>
<li><code>mp</code>: This is a <code>map</code> (hashmap) that stores the frequency of elements in the current window. The key is the element itself, and the value is the frequency of that element in the window.</li>
<li><code>j</code>: This is the left pointer of the sliding window. It represents the start of the current subarray.</li>
<li><code>res</code>: This variable keeps track of the maximum length of valid subarrays found so far. We initialize it to <code>1</code> since the minimum valid subarray has a length of 1.</li>
<li><code>n</code>: This stores the size of the <code>nums</code> array.</li>
</ul>
<h4 id="2-iterate-over-the-array">2. <strong>Iterate Over the Array</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    mp[nums[i]]<span style="color:#666">++</span>;  <span style="color:#080;font-style:italic">// Add current element to the map (increasing its frequency)
</span></span></span></code></pre></div><ul>
<li>The outer loop iterates through the array with index <code>i</code>, which represents the right pointer of the sliding window.</li>
<li>We add the current element <code>nums[i]</code> to the <code>map</code> and increase its frequency.</li>
</ul>
<h4 id="3-adjust-the-left-pointer-contract-the-window">3. <strong>Adjust the Left Pointer (Contract the Window)</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">while</span>(mp[nums[i]] <span style="color:#666">&gt;</span> k) {
</span></span><span style="display:flex;"><span>        mp[nums[j]]<span style="color:#666">--</span>;  <span style="color:#080;font-style:italic">// Decrease the frequency of the element at the left pointer
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        j<span style="color:#666">++</span>;  <span style="color:#080;font-style:italic">// Move the left pointer to the right, shrinking the window
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    }
</span></span></code></pre></div><ul>
<li>If the frequency of the current element <code>nums[i]</code> exceeds <code>k</code>, we need to shrink the window from the left.</li>
<li>This is done by incrementing <code>j</code> (moving the left pointer to the right) and decrementing the frequency of the element at index <code>j</code> in the <code>map</code>.</li>
<li>The <code>while</code> loop ensures that we keep shrinking the window until the frequency of every element in the window is at most <code>k</code>.</li>
</ul>
<h4 id="4-update-the-result-maximum-length-of-valid-subarray">4. <strong>Update the Result (Maximum Length of Valid Subarray)</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    res <span style="color:#666">=</span> max(res, i <span style="color:#666">-</span> j <span style="color:#666">+</span> <span style="color:#666">1</span>);  <span style="color:#080;font-style:italic">// Calculate the current window size and update the result
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>}
</span></span></code></pre></div><ul>
<li>After adjusting the window, we calculate the size of the current window as <code>i - j + 1</code> (since <code>i</code> is the right pointer and <code>j</code> is the left pointer).</li>
<li>We update the <code>res</code> variable to store the maximum length of valid subarrays found so far.</li>
</ul>
<h4 id="5-return-the-result">5. <strong>Return the Result</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> res;
</span></span></code></pre></div><ul>
<li>Finally, we return the value of <code>res</code>, which contains the length of the largest valid subarray where no element appears more than <code>k</code> times.</li>
</ul>
<h3 id="complexity-analysis">Complexity Analysis:</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<ul>
<li>The outer <code>for</code> loop iterates over each element in the <code>nums</code> array, so it runs <code>n</code> times, where <code>n</code> is the length of the array.</li>
<li>Inside the loop, the <code>while</code> loop only moves the left pointer <code>j</code> forward, and each element of the array is processed at most twice (once when expanding the window and once when contracting the window). This gives an overall linear time complexity for the window adjustment.</li>
<li>Operations with the <code>map</code> (inserting, updating, and removing elements) are logarithmic in complexity, i.e., <code>O(log n)</code> in the worst case. Since we perform these operations at most <code>n</code> times (once for each element), the total time complexity for the solution is <code>O(n log n)</code>.</li>
</ul>
<h4 id="space-complexity">Space Complexity:</h4>
<ul>
<li>We use a <code>map</code> to store the frequency of elements in the current window. In the worst case, the number of distinct elements in the window is equal to the size of the array <code>n</code>. Hence, the space complexity is <code>O(n)</code> due to the storage requirements of the <code>map</code>.</li>
</ul>
<h3 id="conclusion">Conclusion:</h3>
<p>This solution efficiently finds the maximum length of a subarray where no element appears more than <code>k</code> times using the sliding window technique and a hashmap for frequency tracking. The approach ensures a linear pass through the array while maintaining a valid window using logarithmic operations for updating the hashmap. The time complexity of <code>O(n log n)</code> and space complexity of <code>O(n)</code> make it suitable for large inputs. This is a classic example of how sliding window techniques, combined with auxiliary data structures like hashmaps, can optimize problems related to subarrays or subsequences.</p>
<p><a href="https://leetcode.com/problems/length-of-longest-subarray-with-at-most-k-frequency/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/W_KYZGp2QzU?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
