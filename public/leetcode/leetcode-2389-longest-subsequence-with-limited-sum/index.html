<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 2389: Longest Subsequence With Limited Sum | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 2389: Longest Subsequence With Limited Sum">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 2389: Longest Subsequence With Limited Sum in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-2389-longest-subsequence-with-limited-sum/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 2389: Longest Subsequence With Limited Sum">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 2389: Longest Subsequence With Limited Sum in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-03-13T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Binary Search">
    <meta property="article:tag" content="Greedy">
    <meta property="article:tag" content="Sorting">
    <meta property="article:tag" content="Prefix Sum">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 2389: Longest Subsequence With Limited Sum</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode728s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> answerQueries(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> A, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> queries) {
</span></span><span style="display:flex;"><span>        sort(A.begin(), A.end());
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> res;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">1</span>; i <span style="color:#666">&lt;</span> A.size(); <span style="color:#666">++</span>i)
</span></span><span style="display:flex;"><span>            A[i] <span style="color:#666">+=</span> A[i <span style="color:#666">-</span> <span style="color:#666">1</span>];
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&amp;</span> <span style="color:#a0a000">q</span>: queries)
</span></span><span style="display:flex;"><span>            res.push_back(upper_bound(A.begin(), A.end(), q) <span style="color:#666">-</span> A.begin());
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>In this problem, you are given an array <code>A</code> of integers and a list of <code>queries</code>. Each query represents a target sum, and you need to determine for each query the maximum number of elements from the sorted array <code>A</code> whose sum is less than or equal to the value of the query.</p>
<p>This problem can be efficiently solved using a combination of sorting and binary search. The challenge is to find the number of elements from the array that sum up to a value less than or equal to each query.</p>
<h3 id="approach">Approach</h3>
<p>To solve this problem efficiently, we will use the following approach:</p>
<ol>
<li>
<p><strong>Sort the Array <code>A</code></strong>: First, we sort the array <code>A</code>. This will help us later on because the prefix sums will be in increasing order, making it easier to apply binary search.</p>
</li>
<li>
<p><strong>Compute Prefix Sums</strong>: Next, we calculate the prefix sum for the array <code>A</code>. The prefix sum at index <code>i</code> represents the sum of all elements in <code>A</code> from index <code>0</code> to <code>i</code>. This will allow us to efficiently find how many elements from the array sum up to less than or equal to a given query.</p>
</li>
<li>
<p><strong>Binary Search</strong>: For each query, we can use binary search to quickly find the position in the prefix sum array where the prefix sum is greater than the query value. The number of elements that sum up to less than or equal to the query is simply the index of that position in the array.</p>
</li>
<li>
<p><strong>Result Construction</strong>: For each query, we find the corresponding number of elements and add it to the result list.</p>
</li>
</ol>
<p>Now let&rsquo;s break the approach down step by step to understand it in more detail.</p>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<h4 id="step-1-sort-the-array-a">Step 1: Sort the Array <code>A</code></h4>
<p>The first line of the <code>answerQueries</code> function sorts the input array <code>A</code> in ascending order:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>sort(A.begin(), A.end());
</span></span></code></pre></div><p>Sorting the array is crucial because the prefix sums are easier to compute and more useful when the array is ordered. Once sorted, the prefix sum of the array will be an increasing sequence of numbers, which is essential for the binary search in the next step.</p>
<h4 id="step-2-compute-prefix-sums">Step 2: Compute Prefix Sums</h4>
<p>After sorting the array, we calculate the prefix sums:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">1</span>; i <span style="color:#666">&lt;</span> A.size(); <span style="color:#666">++</span>i)
</span></span><span style="display:flex;"><span>    A[i] <span style="color:#666">+=</span> A[i <span style="color:#666">-</span> <span style="color:#666">1</span>];
</span></span></code></pre></div><p>The idea behind this loop is to update each element in the array <code>A</code> such that <code>A[i]</code> holds the sum of the elements from index <code>0</code> to <code>i</code>. This way, <code>A[i]</code> will represent the sum of the first <code>i+1</code> elements of the sorted array. This transformation allows us to answer each query in constant time.</p>
<p>For example, if the sorted array <code>A</code> is <code>[1, 2, 3, 4]</code>, the prefix sum array will be <code>[1, 3, 6, 10]</code>, where each element represents the sum of the elements up to that index in the sorted array.</p>
<h4 id="step-3-handle-the-queries-using-binary-search">Step 3: Handle the Queries Using Binary Search</h4>
<p>Once we have the prefix sum array, we handle each query. For each query, we need to find the maximum number of elements from the array whose sum is less than or equal to the query. We can do this efficiently using binary search.</p>
<p>The line of code that does this is:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&amp;</span> <span style="color:#a0a000">q</span>: queries)
</span></span><span style="display:flex;"><span>    res.push_back(upper_bound(A.begin(), A.end(), q) <span style="color:#666">-</span> A.begin());
</span></span></code></pre></div><p>Here’s what this line does:</p>
<ul>
<li><code>upper_bound(A.begin(), A.end(), q)</code> performs a binary search to find the first element in the prefix sum array <code>A</code> that is strictly greater than the query value <code>q</code>. This is because we want to count how many elements in <code>A</code> have a sum less than or equal to <code>q</code>. The position of the first element greater than <code>q</code> will give us the number of elements that sum up to <code>&lt;= q</code>.</li>
<li>Subtracting <code>A.begin()</code> from the result gives us the index (which is also the number of elements) that satisfies the condition.</li>
</ul>
<p>For example, if the prefix sum array is <code>[1, 3, 6, 10]</code> and the query is <code>5</code>, <code>upper_bound</code> will return the iterator pointing to the element <code>6</code>. The number of elements whose sum is less than or equal to <code>5</code> is 2 (i.e., the first two elements).</p>
<h4 id="step-4-return-the-results">Step 4: Return the Results</h4>
<p>After processing all the queries, we return the <code>res</code> vector, which contains the answers to all the queries:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> res;
</span></span></code></pre></div><h3 id="complexity">Complexity</h3>
<p>Let’s analyze the time complexity of the solution.</p>
<ol>
<li>
<p><strong>Sorting the Array</strong>: Sorting the array <code>A</code> takes <code>O(n log n)</code>, where <code>n</code> is the length of the array.</p>
</li>
<li>
<p><strong>Computing Prefix Sums</strong>: The loop that computes the prefix sums runs in <code>O(n)</code> time, where <code>n</code> is the length of the array.</p>
</li>
<li>
<p><strong>Handling Queries</strong>: For each query, we perform a binary search on the prefix sum array, which takes <code>O(log n)</code> time. Since there are <code>m</code> queries, the total time for processing all queries is <code>O(m log n)</code>.</p>
</li>
</ol>
<p>Thus, the overall time complexity of the solution is:</p>
<p>[
O(n \log n + m \log n)
]</p>
<p>Here, <code>n</code> is the size of the array and <code>m</code> is the number of queries.</p>
<h3 id="space-complexity">Space Complexity</h3>
<p>The space complexity of the solution is <code>O(n + m)</code>, where:</p>
<ul>
<li><code>O(n)</code> space is used for storing the sorted array <code>A</code> and its prefix sum.</li>
<li><code>O(m)</code> space is used for storing the result vector <code>res</code>.</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>This approach leverages sorting, prefix sums, and binary search to efficiently solve the problem. By sorting the array and using the prefix sum array, we reduce the problem to a series of binary searches for each query, which ensures that the solution is efficient even for large inputs. With a time complexity of <code>O(n log n + m log n)</code>, the solution is optimal for the given problem and works well for a variety of input sizes.</p>
<p>In conclusion, this algorithm efficiently answers queries about prefix sums using well-known techniques like sorting and binary search, making it both time and space efficient.</p>
<p><a href="https://leetcode.com/problems/longest-subsequence-with-limited-sum/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/Lb4Dp6gwh6g?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
