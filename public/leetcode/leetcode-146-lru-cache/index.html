<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 146: LRU Cache | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 146: LRU Cache">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 146: LRU Cache in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-146-lru-cache/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 146: LRU Cache">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 146: LRU Cache in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-10-23T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Hash Table">
    <meta property="article:tag" content="Linked List">
    <meta property="article:tag" content="Design">
    <meta property="article:tag" content="Doubly-Linked List">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 146: LRU Cache</h1> 
            </div>
			<div class="article-post">
				<h2 id="hahahugoshortcode226s0hbhb"><figure class="remote-image" style="text-align:center; margin: 0;">
    <div style="position: relative; width:900px; max-width:100%; padding-bottom:56.25%; overflow: hidden; border-radius:0px;">
      <img src="https://raw.githubusercontent.com/grid47/list-images/refs/heads/main/list/146.webp" 
           alt="A cache where items are gently shifting in and out, with the most recently used glowing brightly." 
           style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
    </div>
    
      <figcaption style="font-size: 0.8em; font-weight: 300; color:#555; margin-top: 4px; line-height: 1.2;">
        Solution to LeetCode 146: LRU Cache Problem
      </figcaption>
    
  </figure>
  </h2>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode226s1hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">LRUCache</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, list<span style="color:#666">&lt;</span>pair<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;::</span>iterator<span style="color:#666">&gt;</span> mp;
</span></span><span style="display:flex;"><span>    list<span style="color:#666">&lt;</span>pair<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;</span> q;
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> cap;
</span></span><span style="display:flex;"><span>    LRUCache(<span style="color:#0b0;font-weight:bold">int</span> capacity) {
</span></span><span style="display:flex;"><span>        cap <span style="color:#666">=</span> capacity;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">get</span>(<span style="color:#0b0;font-weight:bold">int</span> key) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(<span style="color:#666">!</span>mp.count(key)) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">-</span><span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">auto</span> it <span style="color:#666">=</span> <span style="color:#666">*</span>mp[key];
</span></span><span style="display:flex;"><span>        q.erase(mp[key]);
</span></span><span style="display:flex;"><span>        q.push_front(make_pair(key, it.second));
</span></span><span style="display:flex;"><span>        mp[key] <span style="color:#666">=</span> q.begin();
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> it.second;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">put</span>(<span style="color:#0b0;font-weight:bold">int</span> key, <span style="color:#0b0;font-weight:bold">int</span> value) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(mp.count(key)) {
</span></span><span style="display:flex;"><span>            q.erase(mp[key]);
</span></span><span style="display:flex;"><span>            q.push_front(make_pair(key, value));
</span></span><span style="display:flex;"><span>            mp[key] <span style="color:#666">=</span> q.begin();
</span></span><span style="display:flex;"><span>        } <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            q.push_front(make_pair(key, value));
</span></span><span style="display:flex;"><span>            mp[key] <span style="color:#666">=</span> q.begin();
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(q.size() <span style="color:#666">&gt;</span> cap) {
</span></span><span style="display:flex;"><span>                mp.erase(q.back().first);
</span></span><span style="display:flex;"><span>                q.pop_back();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * Your LRUCache object will be instantiated and called as such:
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * LRUCache* obj = new LRUCache(capacity);
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * int param_1 = obj-&gt;get(key);
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * obj-&gt;put(key,value);
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> */</span></span></span></code></pre></div></h2>
<h3 id="-problem-understanding-lru-cache">📝 <strong>Problem Understanding: LRU Cache</strong></h3>
<p>The <strong>Least Recently Used (LRU) Cache</strong> is a data structure that:</p>
<ul>
<li>Stores key-value pairs.</li>
<li>Retrieves values based on keys.</li>
<li>Inserts new key-value pairs.</li>
<li>Evicts the least recently used (LRU) item when the cache exceeds its capacity.</li>
</ul>
<h4 id="operations">Operations:</h4>
<ol>
<li><strong>get(key)</strong>: Retrieves the value associated with <code>key</code> if it exists; otherwise, returns <code>-1</code>.</li>
<li><strong>put(key, value)</strong>: Inserts a key-value pair. If the key exists, it updates the value and makes the key the most recently used. If the cache exceeds its capacity, it evicts the least recently used key.</li>
</ol>
<h3 id="example"><strong>Example</strong>:</h3>
<ul>
<li><strong>Input</strong>: <code>LRUCache(2)</code>, <code>put(1, 1)</code>, <code>put(2, 2)</code>, <code>get(1)</code>, <code>put(3, 3)</code>, <code>get(2)</code>, <code>put(4, 4)</code>, <code>get(1)</code>, <code>get(3)</code>, <code>get(4)</code></li>
<li><strong>Output</strong>: <code>1, -1, 3, 4</code></li>
</ul>
<hr>
<h3 id="-approach-efficient-lru-cache-implementation">🔧 <strong>Approach: Efficient LRU Cache Implementation</strong></h3>
<p>The key challenge is to efficiently:</p>
<ul>
<li>Access values using keys.</li>
<li>Track the usage order of keys.</li>
<li>Evict the least recently used element when the cache exceeds its capacity.</li>
</ul>
<h4 id="solution-using-doubly-linked-list--hash-map"><strong>Solution Using Doubly Linked List &amp; Hash Map</strong>:</h4>
<ul>
<li><strong>Doubly Linked List</strong>: Allows us to reorder items efficiently. The most recently used items are at the front, and the least recently used items are at the back.</li>
<li><strong>Hash Map</strong>: Provides <strong>O(1)</strong> access time for key-value lookups. It stores each key&rsquo;s corresponding node in the doubly linked list.</li>
</ul>
<hr>
<h3 id="-code-breakdown-step-by-step">🧑‍💻 <strong>Code Breakdown: Step-by-Step</strong></h3>
<h4 id="step-1-data-structures"><strong>Step 1: Data Structures</strong></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, list<span style="color:#666">&lt;</span>pair<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;::</span>iterator<span style="color:#666">&gt;</span> mp;
</span></span><span style="display:flex;"><span>list<span style="color:#666">&lt;</span>pair<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;</span> q;
</span></span></code></pre></div><ul>
<li><strong><code>mp</code></strong>: A <strong>map</strong> stores the association of keys to their corresponding nodes in the doubly linked list.</li>
<li><strong><code>q</code></strong>: A <strong>doubly linked list</strong> holds the key-value pairs, with the most recently used items at the front and the least recently used ones at the back.</li>
</ul>
<h4 id="step-2-constructor"><strong>Step 2: Constructor</strong></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>LRUCache(<span style="color:#0b0;font-weight:bold">int</span> capacity) {
</span></span><span style="display:flex;"><span>    cap <span style="color:#666">=</span> capacity;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>Initializes the cache with the specified capacity and prepares the <code>map</code> and <code>list</code>.</li>
</ul>
<h4 id="step-3-get-method"><strong>Step 3: <code>get</code> Method</strong></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">get</span>(<span style="color:#0b0;font-weight:bold">int</span> key) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span> (<span style="color:#666">!</span>mp.count(key)) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">-</span><span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">auto</span> it <span style="color:#666">=</span> <span style="color:#666">*</span>mp[key];
</span></span><span style="display:flex;"><span>    q.erase(mp[key]);
</span></span><span style="display:flex;"><span>    q.push_front(make_pair(key, it.second));
</span></span><span style="display:flex;"><span>    mp[key] <span style="color:#666">=</span> q.begin();
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> it.second;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>Check for existence</strong>: If the key doesn&rsquo;t exist in the cache, return <code>-1</code>.</li>
<li><strong>Move to front</strong>: If the key exists, retrieve the value, erase it from the list, and move it to the front to mark it as most recently used.</li>
<li><strong>Return value</strong>: Return the value of the key.</li>
</ul>
<h4 id="step-4-put-method"><strong>Step 4: <code>put</code> Method</strong></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">put</span>(<span style="color:#0b0;font-weight:bold">int</span> key, <span style="color:#0b0;font-weight:bold">int</span> value) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span> (mp.count(key)) {
</span></span><span style="display:flex;"><span>        q.erase(mp[key]);
</span></span><span style="display:flex;"><span>        q.push_front(make_pair(key, value));
</span></span><span style="display:flex;"><span>        mp[key] <span style="color:#666">=</span> q.begin();
</span></span><span style="display:flex;"><span>    } <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        q.push_front(make_pair(key, value));
</span></span><span style="display:flex;"><span>        mp[key] <span style="color:#666">=</span> q.begin();
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span> (q.size() <span style="color:#666">&gt;</span> cap) {
</span></span><span style="display:flex;"><span>            mp.erase(q.back().first);
</span></span><span style="display:flex;"><span>            q.pop_back();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>Update existing key</strong>: If the key exists, update its value and move it to the front.</li>
<li><strong>Insert new key</strong>: If the key doesn’t exist, add it to the front of the list.</li>
<li><strong>Evict LRU</strong>: If the cache exceeds its capacity, evict the least recently used key (remove from the back of the list).</li>
</ul>
<h4 id="step-5-eviction-logic"><strong>Step 5: Eviction Logic</strong></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">if</span> (q.size() <span style="color:#666">&gt;</span> cap) {
</span></span><span style="display:flex;"><span>    mp.erase(q.back().first);
</span></span><span style="display:flex;"><span>    q.pop_back();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>When the cache exceeds its capacity, remove the least recently used element by erasing it from both the map and the list.</li>
</ul>
<hr>
<h3 id="-time-and-space-complexity">⏱️ <strong>Time and Space Complexity</strong></h3>
<h4 id="time-complexity"><strong>Time Complexity</strong>:</h4>
<ul>
<li><strong>get(key)</strong>: <strong>O(1)</strong> – Accessing an element in the map and moving it to the front of the list both take constant time.</li>
<li><strong>put(key, value)</strong>: <strong>O(1)</strong> – Insertion and removal operations in the map and list both take constant time. Eviction also takes constant time.</li>
</ul>
<h4 id="space-complexity"><strong>Space Complexity</strong>:</h4>
<ul>
<li><strong>O(capacity)</strong> – The space is proportional to the cache&rsquo;s capacity. The map stores key-value pairs and their corresponding list iterators, while the list stores the actual data.</li>
</ul>
<hr>
<h3 id="-conclusion">🎯 <strong>Conclusion</strong></h3>
<p>This <strong>LRU Cache</strong> solution is highly efficient, providing <strong>O(1)</strong> time complexity for both <code>get</code> and <code>put</code> operations. By combining a <strong>doubly linked list</strong> and a <strong>hash map</strong>, the solution effectively manages cache access and eviction, ensuring the most recently used items are kept while the least recently used items are evicted when the cache is full.</p>
<ul>
<li><strong>Efficient Caching</strong>: The algorithm ensures that the cache operates with optimal time and space complexity.</li>
<li><strong>Real-World Use Case</strong>: This approach is ideal for scenarios requiring real-time cache management, such as web browsers, databases, or memory management systems.</li>
</ul>
<p><a href="https://leetcode.com/problems/lru-cache/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/7ABFKPK2hD4?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
