<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 2841: Maximum Sum of Almost Unique Subarray | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 2841: Maximum Sum of Almost Unique Subarray">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 2841: Maximum Sum of Almost Unique Subarray in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-2841-maximum-sum-of-almost-unique-subarray/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 2841: Maximum Sum of Almost Unique Subarray">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 2841: Maximum Sum of Almost Unique Subarray in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-01-27T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Hash Table">
    <meta property="article:tag" content="Sliding Window">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 2841: Maximum Sum of Almost Unique Subarray</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode974s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> maxSum(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> nums, <span style="color:#0b0;font-weight:bold">int</span> size, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>        unordered_map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>,<span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> m;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> sum<span style="color:#666">=</span><span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> maxi<span style="color:#666">=</span><span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> i<span style="color:#666">=</span><span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> j<span style="color:#666">=</span><span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">while</span>(j<span style="color:#666">&lt;</span>nums.size())
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            m[nums[j]]<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>            sum<span style="color:#666">+=</span>nums[j];
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(j<span style="color:#666">-</span>i<span style="color:#666">+</span><span style="color:#666">1</span><span style="color:#666">&gt;</span>k)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                m[nums[i]]<span style="color:#666">--</span>;
</span></span><span style="display:flex;"><span>                sum<span style="color:#666">-=</span>nums[i];
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">if</span>(m[nums[i]]<span style="color:#666">==</span><span style="color:#666">0</span>)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    m.erase(nums[i]);    
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                i<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(j<span style="color:#666">-</span>i<span style="color:#666">+</span><span style="color:#666">1</span><span style="color:#666">==</span>k)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">if</span>(m.size() <span style="color:#666">&gt;=</span> size)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    maxi<span style="color:#666">=</span>max(sum , maxi);
</span></span><span style="display:flex;"><span>                    <span style="color:#080;font-style:italic">// cout&lt;&lt;maxi&lt;&lt;endl;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            j<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> maxi;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>We are given an array of integers <code>nums</code>, and we need to find the maximum sum of any subarray of size <code>k</code> such that the subarray contains at least <code>size</code> distinct elements. The goal is to identify the subarray with the highest sum that meets this condition.</p>
<h3 id="approach">Approach</h3>
<p>This problem involves finding the maximum sum of a subarray of fixed size <code>k</code>, with the additional constraint that the subarray must contain at least <code>size</code> distinct elements. To solve this problem efficiently, we can use the <strong>sliding window technique</strong> in combination with a <strong>hash map</strong> to keep track of the frequency of elements within the window. Here&rsquo;s how we can break down the approach:</p>
<ol>
<li>
<p><strong>Sliding Window</strong>: The idea is to maintain a sliding window of size <code>k</code> that moves across the array, updating the sum of the window and the count of distinct elements as we go. The window starts at the first element and expands to the right until it reaches size <code>k</code>. If the window exceeds size <code>k</code>, we shrink it from the left.</p>
</li>
<li>
<p><strong>Hash Map for Frequency Count</strong>: A hash map is used to store the frequency of each element in the current window. This helps us quickly track how many distinct elements are present in the window. As the window expands and contracts, we update the hash map by adding or removing elements.</p>
</li>
<li>
<p><strong>Check for Valid Window</strong>: Once the window reaches size <code>k</code>, we check if the number of distinct elements in the window is greater than or equal to <code>size</code>. If so, we update the maximum sum encountered.</p>
</li>
<li>
<p><strong>Efficiency Considerations</strong>: Since the sliding window moves one step at a time, and we only perform constant-time operations for each element (updating the sum and the hash map), the time complexity of this approach is linear, O(n), where <code>n</code> is the length of the input array.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<h4 id="step-1-initialize-variables">Step 1: Initialize Variables</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>unordered_map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> m; <span style="color:#080;font-style:italic">// Hash map to store the frequency of elements in the current window
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> sum <span style="color:#666">=</span> <span style="color:#666">0</span>; <span style="color:#080;font-style:italic">// To store the sum of the current window
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> maxi <span style="color:#666">=</span> <span style="color:#666">0</span>; <span style="color:#080;font-style:italic">// To store the maximum sum encountered
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>, j <span style="color:#666">=</span> <span style="color:#666">0</span>; <span style="color:#080;font-style:italic">// Two pointers to define the sliding window
</span></span></span></code></pre></div><ul>
<li>We use an unordered map <code>m</code> to track the frequency of elements in the current window.</li>
<li><code>sum</code> holds the sum of the elements in the current window.</li>
<li><code>maxi</code> keeps track of the maximum sum of subarrays that have at least <code>size</code> distinct elements.</li>
<li><code>i</code> and <code>j</code> are the pointers that define the boundaries of the sliding window.</li>
</ul>
<h4 id="step-2-expand-the-window">Step 2: Expand the Window</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">while</span>(j <span style="color:#666">&lt;</span> nums.size()) {
</span></span><span style="display:flex;"><span>    m[nums[j]]<span style="color:#666">++</span>; <span style="color:#080;font-style:italic">// Add the element at position j to the window
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    sum <span style="color:#666">+=</span> nums[j]; <span style="color:#080;font-style:italic">// Add the element to the current sum
</span></span></span></code></pre></div><ul>
<li>We expand the window by moving the <code>j</code> pointer to the right. Each time we add a new element to the window, we update the frequency map and the sum of the window.</li>
</ul>
<h4 id="step-3-shrink-the-window-if-it-exceeds-size-k">Step 3: Shrink the Window if It Exceeds Size <code>k</code></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">if</span>(j <span style="color:#666">-</span> i <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">&gt;</span> k) {
</span></span><span style="display:flex;"><span>    m[nums[i]]<span style="color:#666">--</span>; <span style="color:#080;font-style:italic">// Remove the element at position i from the window
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    sum <span style="color:#666">-=</span> nums[i]; <span style="color:#080;font-style:italic">// Subtract the element from the current sum
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">if</span>(m[nums[i]] <span style="color:#666">==</span> <span style="color:#666">0</span>) {
</span></span><span style="display:flex;"><span>        m.erase(nums[i]); <span style="color:#080;font-style:italic">// If the frequency becomes zero, remove the element from the map
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    i<span style="color:#666">++</span>; <span style="color:#080;font-style:italic">// Move the left pointer to shrink the window
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>}
</span></span></code></pre></div><ul>
<li>If the window size exceeds <code>k</code>, we shrink the window by moving the <code>i</code> pointer to the right.</li>
<li>We update the sum and frequency map by removing the element at index <code>i</code> from the window.</li>
<li>If the frequency of an element becomes zero after removal, we delete it from the map.</li>
</ul>
<h4 id="step-4-check-for-valid-subarray-and-update-maximum-sum">Step 4: Check for Valid Subarray and Update Maximum Sum</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">if</span>(j <span style="color:#666">-</span> i <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">==</span> k) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(m.size() <span style="color:#666">&gt;=</span> size) { <span style="color:#080;font-style:italic">// Check if the number of distinct elements is at least &#39;size&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        maxi <span style="color:#666">=</span> max(sum, maxi); <span style="color:#080;font-style:italic">// Update the maximum sum if the current window is valid
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>When the window size is exactly <code>k</code>, we check if the number of distinct elements in the window is at least <code>size</code>. If the condition is satisfied, we update <code>maxi</code> with the maximum sum encountered so far.</li>
</ul>
<h4 id="step-5-move-the-right-pointer">Step 5: Move the Right Pointer</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>j<span style="color:#666">++</span>; <span style="color:#080;font-style:italic">// Move the right pointer to expand the window
</span></span></span></code></pre></div><ul>
<li>After processing the current window, we move the right pointer <code>j</code> to expand the window further.</li>
</ul>
<h4 id="step-6-return-the-maximum-sum">Step 6: Return the Maximum Sum</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> maxi; <span style="color:#080;font-style:italic">// Return the maximum sum of subarrays with at least &#39;size&#39; distinct elements
</span></span></span></code></pre></div><ul>
<li>After processing all possible subarrays, we return the maximum sum found that meets the condition of having at least <code>size</code> distinct elements.</li>
</ul>
<h3 id="complexity">Complexity</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<ul>
<li><strong>O(n)</strong>: The algorithm iterates through the array once with the sliding window technique. Each element is processed once when added to the window and potentially once when removed from the window. The operations on the hash map (insertion, deletion, and lookup) are O(1) on average. Therefore, the overall time complexity is O(n), where <code>n</code> is the length of the input array.</li>
</ul>
<h4 id="space-complexity">Space Complexity:</h4>
<ul>
<li><strong>O(n)</strong>: The space complexity is O(n) due to the use of the hash map, which may store up to <code>n</code> distinct elements in the worst case. The space used for the sum and <code>maxi</code> variables is constant, O(1).</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>This solution efficiently solves the problem of finding the maximum sum of a subarray of size <code>k</code> with at least <code>size</code> distinct elements using the sliding window technique and a hash map. By maintaining a sliding window of fixed size <code>k</code> and dynamically adjusting the frequency of elements within the window, we ensure that the algorithm runs in linear time, making it well-suited for large input arrays. This approach ensures that the problem is solved optimally both in terms of time and space complexity.</p>
<p><a href="https://leetcode.com/problems/maximum-sum-of-almost-unique-subarray/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/L8BHtlpLCQw?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
