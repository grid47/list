<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 2615: Sum of Distances | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 2615: Sum of Distances">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 2615: Sum of Distances in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-2615-sum-of-distances/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 2615: Sum of Distances">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 2615: Sum of Distances in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-02-19T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Hash Table">
    <meta property="article:tag" content="Prefix Sum">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 2615: Sum of Distances</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode876s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;</span> distance(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> nums) {
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">/*
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        [1,3,1,1,2]
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">         0,1,2,3,4
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">         0
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">           0  
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">         2   2
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">         5   3 4
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">                 0
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        */</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        unordered_map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">double</span><span style="color:#666">&gt;</span> mp, cnt;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> nums.size();
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;</span> arr(n, <span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            arr[i] <span style="color:#666">=</span> cnt[nums[i]] <span style="color:#666">*</span> i <span style="color:#666">-</span> mp[nums[i]];
</span></span><span style="display:flex;"><span>            mp[nums[i]] <span style="color:#666">+=</span> i;
</span></span><span style="display:flex;"><span>            cnt[nums[i]] <span style="color:#666">+=</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        mp.clear(), cnt.clear();        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> n <span style="color:#666">-</span> <span style="color:#666">1</span>; i <span style="color:#666">&gt;=</span> <span style="color:#666">0</span>; i<span style="color:#666">--</span>) {
</span></span><span style="display:flex;"><span>            arr[i] <span style="color:#666">+=</span> mp[nums[i]] <span style="color:#666">-</span> cnt[nums[i]] <span style="color:#666">*</span> i;
</span></span><span style="display:flex;"><span>            mp[nums[i]] <span style="color:#666">+=</span> i;
</span></span><span style="display:flex;"><span>            cnt[nums[i]] <span style="color:#666">+=</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> arr;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>In this problem, we are given an array <code>nums</code> of size <code>n</code>, and we need to compute a new array <code>arr</code> such that for each element <code>arr[i]</code> in the array, it stores the sum of the absolute differences between <code>nums[i]</code> and each of its occurrences to the left and right in the array. The value at <code>arr[i]</code> will represent how far each occurrence of <code>nums[i]</code> is from the current index <code>i</code> in the array.</p>
<h3 id="approach">Approach</h3>
<p>To solve this problem efficiently, a brute force approach that checks each index against all other indices would be too slow, especially for large input sizes. Instead, we can leverage data structures to store cumulative information and reduce redundant computations. Specifically, we will use two passes through the array and two hash maps (<code>mp</code> and <code>cnt</code>) to compute the required distances efficiently in linear time.</p>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<ol>
<li><strong>Initialization</strong>:
We start by initializing a few variables:
<ul>
<li><code>mp</code>: This unordered map will store the cumulative sum of indices for each number in the array as we iterate through the array.</li>
<li><code>cnt</code>: This unordered map will track how many times each number has been encountered so far.</li>
<li><code>arr</code>: This vector will store the final results (i.e., the sum of absolute differences for each index in <code>nums</code>).</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>unordered_map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">double</span><span style="color:#666">&gt;</span> mp, cnt;
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> nums.size();
</span></span><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;</span> arr(n, <span style="color:#666">0</span>);
</span></span></code></pre></div><p>Here, we initialize <code>mp</code> and <code>cnt</code> as empty hash maps. <code>arr</code> is initialized with all zeros, and its size is equal to the size of the input array <code>nums</code>.</p>
<ol start="2">
<li>
<p><strong>First Pass - Left Side Calculation</strong>:
In the first loop, we traverse the array from left to right. For each index <code>i</code>, we compute the sum of the absolute differences between the current element <code>nums[i]</code> and all previous occurrences of <code>nums[i]</code>.</p>
<p>The formula for calculating the sum of the absolute differences for the current index <code>i</code> is:</p>
<ul>
<li><code>arr[i] = cnt[nums[i]] * i - mp[nums[i]]</code></li>
</ul>
<p>Here:</p>
<ul>
<li><code>cnt[nums[i]]</code> keeps track of how many times <code>nums[i]</code> has appeared so far (since the previous index).</li>
<li><code>mp[nums[i]]</code> stores the cumulative sum of indices where <code>nums[i]</code> appeared before index <code>i</code>. By multiplying the count by <code>i</code> and subtracting the cumulative sum of indices, we calculate the sum of absolute differences for all the previous occurrences of <code>nums[i]</code>.</li>
</ul>
<p>After calculating <code>arr[i]</code>, we update the <code>mp</code> and <code>cnt</code> maps to include the current index <code>i</code>:</p>
<ul>
<li><code>mp[nums[i]] += i</code>: Update the cumulative sum of indices.</li>
<li><code>cnt[nums[i]] += 1</code>: Increment the count of occurrences of <code>nums[i]</code>.</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    arr[i] <span style="color:#666">=</span> cnt[nums[i]] <span style="color:#666">*</span> i <span style="color:#666">-</span> mp[nums[i]];
</span></span><span style="display:flex;"><span>    mp[nums[i]] <span style="color:#666">+=</span> i;
</span></span><span style="display:flex;"><span>    cnt[nums[i]] <span style="color:#666">+=</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol start="3">
<li>
<p><strong>Second Pass - Right Side Calculation</strong>:
After the first pass, we have computed the sum of absolute differences for each index on the left side of <code>nums[i]</code>. Now we need to compute the distances for the right side (i.e., for indices after <code>i</code>).</p>
<p>In the second loop, we traverse the array from right to left. Similar to the first pass, we update <code>arr[i]</code> by adding the sum of absolute differences from all occurrences of <code>nums[i]</code> on the right side.</p>
<p>The formula for the right-side distance is:</p>
<ul>
<li><code>arr[i] += mp[nums[i]] - cnt[nums[i]] * i</code></li>
</ul>
<p>Here:</p>
<ul>
<li><code>mp[nums[i]]</code> holds the cumulative sum of indices for <code>nums[i]</code> from the right side.</li>
<li><code>cnt[nums[i]] * i</code> accounts for the total contribution of the right-side elements to the absolute differences.</li>
</ul>
<p>After updating <code>arr[i]</code>, we update the <code>mp</code> and <code>cnt</code> maps again:</p>
<ul>
<li><code>mp[nums[i]] += i</code>: Update the cumulative sum of indices.</li>
<li><code>cnt[nums[i]] += 1</code>: Increment the count of occurrences of <code>nums[i]</code>.</li>
</ul>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>mp.clear(), cnt.clear();        
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> n <span style="color:#666">-</span> <span style="color:#666">1</span>; i <span style="color:#666">&gt;=</span> <span style="color:#666">0</span>; i<span style="color:#666">--</span>) {
</span></span><span style="display:flex;"><span>    arr[i] <span style="color:#666">+=</span> mp[nums[i]] <span style="color:#666">-</span> cnt[nums[i]] <span style="color:#666">*</span> i;
</span></span><span style="display:flex;"><span>    mp[nums[i]] <span style="color:#666">+=</span> i;
</span></span><span style="display:flex;"><span>    cnt[nums[i]] <span style="color:#666">+=</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol start="4">
<li><strong>Final Result</strong>:
After both passes, the <code>arr</code> array will contain the sum of the absolute differences for each element <code>nums[i]</code> with respect to all other occurrences of <code>nums[i]</code> to the left and right. The function returns the array <code>arr</code>.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> arr;
</span></span></code></pre></div><h3 id="complexity-analysis">Complexity Analysis</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<ul>
<li>
<p><strong>First Pass (Left-to-Right)</strong>:</p>
<ul>
<li>We traverse the array <code>nums</code> once, performing constant-time operations (map lookups and updates) at each index. Thus, the time complexity of the first pass is (O(n)), where <code>n</code> is the size of the array.</li>
</ul>
</li>
<li>
<p><strong>Second Pass (Right-to-Left)</strong>:</p>
<ul>
<li>Similarly, the second pass also requires traversing the array once and performing constant-time operations at each index. Thus, the time complexity of the second pass is also (O(n)).</li>
</ul>
</li>
<li>
<p><strong>Overall Time Complexity</strong>:</p>
<ul>
<li>Since both passes are linear, the overall time complexity is (O(n)).</li>
</ul>
</li>
</ul>
<h4 id="space-complexity">Space Complexity:</h4>
<ul>
<li>
<p><strong>Space for Maps (<code>mp</code> and <code>cnt</code>)</strong>:</p>
<ul>
<li>The two maps (<code>mp</code> and <code>cnt</code>) store information about the elements in the array, and in the worst case, they store data for all distinct elements. Thus, the space complexity for these maps is (O(n)).</li>
</ul>
</li>
<li>
<p><strong>Space for Output Array <code>arr</code></strong>:</p>
<ul>
<li>We use an additional array <code>arr</code> of size <code>n</code> to store the results. This also contributes (O(n)) space.</li>
</ul>
</li>
<li>
<p><strong>Overall Space Complexity</strong>:</p>
<ul>
<li>The overall space complexity is (O(n)), as both the maps and the output array require linear space.</li>
</ul>
</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>This solution efficiently computes the sum of absolute differences between each element and all its occurrences in the array using two linear passes through the array. By utilizing hash maps to store cumulative information about each elementâ€™s index and count, we avoid the need for nested loops, resulting in an optimal (O(n)) time complexity solution. This makes the approach scalable for large input sizes.</p>
<p><a href="https://leetcode.com/problems/sum-of-distances/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/b620guqinSc?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
