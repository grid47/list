<!DOCTYPE html>
<html lang="en-us"><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 417: Pacific Atlantic Water Flow | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 417: Pacific Atlantic Water Flow">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 417: Pacific Atlantic Water Flow in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="https://www.grid47.xyz/leetcode/solution-417-pacific-atlantic-water-flow/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 417: Pacific Atlantic Water Flow">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 417: Pacific Atlantic Water Flow in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-09-26T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Depth-First Search">
    <meta property="article:tag" content="Breadth-First Search">
    <meta property="article:tag" content="Matrix">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="https://www.grid47.xyz/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="https://www.grid47.xyz/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="https://www.grid47.xyz//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/courses/">Course</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
    <div class="main-content">
        
        <div class="container">
            <div class="row">
                
                <div class="col-md-2 pl-0"><div class="share sticky-top sticky-top-offset">
    <p>Share</p>
    <ul>
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://twitter.com/intent/tweet?text=Leetcode%20417%3a%20Pacific%20Atlantic%20Water%20Flow&url=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-417-pacific-atlantic-water-flow%2f" 
               onclick="window.open(this.href, 'twitter-share', 'width=550,height=435');return false;">
                <i class="fab fa-twitter"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://facebook.com/sharer.php?u=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-417-pacific-atlantic-water-flow%2f" 
               onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
                <i class="fab fa-facebook-f"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-417-pacific-atlantic-water-flow%2f&title=Leetcode%20417%3a%20Pacific%20Atlantic%20Water%20Flow" 
               onclick="window.open(this.href, 'linkedin-share', 'width=550,height=435');return false;">
                <i class="fab fa-linkedin-in"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://reddit.com/submit?url=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-417-pacific-atlantic-water-flow%2f&title=Leetcode%20417%3a%20Pacific%20Atlantic%20Water%20Flow" 
               onclick="window.open(this.href, 'reddit-share', 'width=550,height=435');return false;">
                <i class="fab fa-reddit-alien"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://api.whatsapp.com/send?text=Leetcode%20417%3a%20Pacific%20Atlantic%20Water%20Flow%20https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-417-pacific-atlantic-water-flow%2f" 
               onclick="window.open(this.href, 'whatsapp-share', 'width=550,height=435');return false;">
                <i class="fab fa-whatsapp"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://telegram.me/share/url?url=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-417-pacific-atlantic-water-flow%2f&text=Leetcode%20417%3a%20Pacific%20Atlantic%20Water%20Flow" 
               onclick="window.open(this.href, 'telegram-share', 'width=550,height=435');return false;">
                <i class="fab fa-telegram-plane"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="mailto:?subject=Leetcode%20417%3a%20Pacific%20Atlantic%20Water%20Flow&body=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-417-pacific-atlantic-water-flow%2f" 
               onclick="window.open(this.href, 'email-share', 'width=550,height=435');return false;">
                <i class="fas fa-envelope"></i>
            </a>
        </li> 
    </ul>

    
</div>
</div>
                                
                <div class="col-md-9 flex-first flex-md-unordered">
                    <div class="mainheading">
                        
                        <h1 class="posttitle">Leetcode 417: Pacific Atlantic Water Flow</h1> 
                        
                        
                        
                        
                        <div class="row post-top-meta">
                            <div class="col-xs-12 col-md-3 col-lg-2 text-center text-md-left mb-4 mb-md-0 md-nopad-right">
                                <img class="author-thumb" src="/images/logo.png" alt="grid47">
                            </div>
                            <div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-left md-nopad-left">
                                <a target="_blank" class="link-dark">grid47</a><br>
                                <span class="author-description">
                                    Exploring patterns and algorithms<br>
                                    <i class="far fa-star"></i>
                                    Sep 26, 2024
                                    <i class="far fa-clock clock"></i>
                                    6 min read
                                </span>					
                            </div>
                        </div>			
                        	
                        
                                                                   
                    </div>

                    
                    
                    
                    

                    
                    <div class="article-post">
                        <h2 id="hahahugoshortcode1127s0hbhb"><figure class="remote-image" style="text-align:center; margin: 0;">
    <div style="position: relative; width:900px; max-width:100%; padding-bottom:56.25%; overflow: hidden; border-radius:0px;">
      <img src="https://raw.githubusercontent.com/grid47/list-images/refs/heads/main/list/417.webp" 
           alt="A map with water flowing from both Pacific and Atlantic oceans, gently meeting at highlighted points." 
           style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
    </div>
    
      <figcaption style="font-size: 0.8em; font-weight: 300; color:#555; margin-top: 4px; line-height: 1.2;">
        Solution to LeetCode 417: Pacific Atlantic Water Flow Problem
      </figcaption>
    
  </figure>
  </h2>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1127s1hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;</span> pacificAtlantic(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> heights) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> m <span style="color:#666">=</span> heights.size(), n <span style="color:#666">=</span> heights[<span style="color:#666">0</span>].size();
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">bool</span><span style="color:#666">&gt;&gt;</span> pac(m, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">bool</span><span style="color:#666">&gt;</span>(n, <span style="color:#a2f">false</span>));
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">bool</span><span style="color:#666">&gt;&gt;</span> atl(m, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">bool</span><span style="color:#666">&gt;</span>(n, <span style="color:#a2f">false</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>; j <span style="color:#666">&lt;</span> n; j<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            dfs(heights, pac, <span style="color:#666">0</span>, j);
</span></span><span style="display:flex;"><span>            dfs(heights, atl, m <span style="color:#666">-</span><span style="color:#666">1</span>, j);            
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>; j <span style="color:#666">&lt;</span> m; j<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            dfs(heights, pac, j, <span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>            dfs(heights, atl, j, n <span style="color:#666">-</span> <span style="color:#666">1</span>);            
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;</span> ans;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> m; i<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>; j <span style="color:#666">&lt;</span> n; j<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(pac[i][j] <span style="color:#666">&amp;&amp;</span> atl[i][j])
</span></span><span style="display:flex;"><span>                ans.push_back({i, j});
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> ans;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">dfs</span>(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> h, vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">bool</span><span style="color:#666">&gt;&gt;</span> <span style="color:#666">&amp;</span>vis, <span style="color:#0b0;font-weight:bold">int</span> i, <span style="color:#0b0;font-weight:bold">int</span> j) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        vis[i][j] <span style="color:#666">=</span> <span style="color:#a2f">true</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">&gt;</span> <span style="color:#666">0</span> <span style="color:#666">&amp;&amp;</span> <span style="color:#666">!</span>vis[i <span style="color:#666">-</span> <span style="color:#666">1</span>][j] <span style="color:#666">&amp;&amp;</span> h[i <span style="color:#666">-</span> <span style="color:#666">1</span>][j] <span style="color:#666">&gt;=</span> h[i][j])
</span></span><span style="display:flex;"><span>            dfs(h, vis, i <span style="color:#666">-</span> <span style="color:#666">1</span>, j);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(j <span style="color:#666">&gt;</span> <span style="color:#666">0</span> <span style="color:#666">&amp;&amp;</span> <span style="color:#666">!</span>vis[i][j <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">&amp;&amp;</span> h[i][j <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">&gt;=</span> h[i][j])
</span></span><span style="display:flex;"><span>            dfs(h, vis, i, j <span style="color:#666">-</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">&lt;</span> h.size() <span style="color:#666">-</span> <span style="color:#666">1</span> <span style="color:#666">&amp;&amp;</span> <span style="color:#666">!</span>vis[i <span style="color:#666">+</span> <span style="color:#666">1</span>][j] <span style="color:#666">&amp;&amp;</span> h[i <span style="color:#666">+</span> <span style="color:#666">1</span>][j] <span style="color:#666">&gt;=</span> h[i][j])
</span></span><span style="display:flex;"><span>            dfs(h, vis, i <span style="color:#666">+</span> <span style="color:#666">1</span>, j);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(j <span style="color:#666">&lt;</span> h[<span style="color:#666">0</span>].size() <span style="color:#666">-</span> <span style="color:#666">1</span> <span style="color:#666">&amp;&amp;</span> <span style="color:#666">!</span>vis[i][j <span style="color:#666">+</span> <span style="color:#666">1</span>] <span style="color:#666">&amp;&amp;</span> h[i][j <span style="color:#666">+</span> <span style="color:#666">1</span>] <span style="color:#666">&gt;=</span> h[i][j])
</span></span><span style="display:flex;"><span>            dfs(h, vis, i, j <span style="color:#666">+</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem asks us to find all the coordinates in a given matrix of heights where water can flow to both the Pacific and Atlantic oceans. The matrix represents an elevation map where each cell contains the height of that point. Water can flow from a cell to its neighboring cell if the height of the neighboring cell is greater than or equal to the current cell&rsquo;s height. The task is to return all the coordinates where water can flow to both oceans. The Pacific Ocean touches the left and top borders, while the Atlantic Ocean touches the right and bottom borders.</p>
<h3 id="approach">Approach</h3>
<p>The approach to solving this problem uses depth-first search (DFS) and two separate DFS traversals: one for the Pacific Ocean and one for the Atlantic Ocean. The idea is to track which cells can flow into each ocean by starting from the borders corresponding to each ocean and using DFS to propagate possible water flows.</p>
<p>Here’s the step-by-step approach:</p>
<ol>
<li>
<p><strong>Initial Setup</strong>:</p>
<ul>
<li>We have a grid <code>heights</code> with dimensions <code>m x n</code> representing the elevation of different cells.</li>
<li>We need to determine for each cell whether water can flow to the Pacific and/or Atlantic oceans.</li>
</ul>
</li>
<li>
<p><strong>Water Flow Direction</strong>:</p>
<ul>
<li>Water can only flow to neighboring cells (up, down, left, or right) if the neighboring cell&rsquo;s height is greater than or equal to the current cell&rsquo;s height.</li>
<li>We will start from the borders of the matrix: the top and left borders for the Pacific Ocean, and the bottom and right borders for the Atlantic Ocean.</li>
</ul>
</li>
<li>
<p><strong>DFS Traversal</strong>:</p>
<ul>
<li>We will use DFS to propagate possible water flows from the borders to the inner cells, marking cells that can flow to the corresponding ocean.</li>
<li>The DFS is initiated from all cells along the Pacific and Atlantic borders.</li>
</ul>
</li>
<li>
<p><strong>Result Calculation</strong>:</p>
<ul>
<li>After running the DFS for both oceans, the final answer will consist of the coordinates of cells that can flow to both the Pacific and Atlantic oceans. These are the cells where both the corresponding matrices (one for Pacific and one for Atlantic) are marked <code>true</code>.</li>
</ul>
</li>
<li>
<p><strong>Time Complexity</strong>:</p>
<ul>
<li>The DFS runs in <code>O(m * n)</code> time for each ocean, where <code>m</code> and <code>n</code> are the number of rows and columns in the matrix. Since we perform two DFS traversals, the time complexity is <code>O(2 * m * n)</code> or simply <code>O(m * n)</code>.</li>
</ul>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<h4 id="step-1-initializing-helper-data-structures">Step 1: Initializing Helper Data Structures</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> m <span style="color:#666">=</span> heights.size(), n <span style="color:#666">=</span> heights[<span style="color:#666">0</span>].size();
</span></span><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">bool</span><span style="color:#666">&gt;&gt;</span> pac(m, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">bool</span><span style="color:#666">&gt;</span>(n, <span style="color:#a2f">false</span>));
</span></span><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">bool</span><span style="color:#666">&gt;&gt;</span> atl(m, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">bool</span><span style="color:#666">&gt;</span>(n, <span style="color:#a2f">false</span>));
</span></span></code></pre></div><ul>
<li>We calculate the dimensions <code>m</code> and <code>n</code> of the matrix <code>heights</code>.</li>
<li>We initialize two 2D boolean matrices, <code>pac</code> and <code>atl</code>, each of size <code>m x n</code>. These matrices will be used to track which cells can flow to the Pacific Ocean (<code>pac</code>) and the Atlantic Ocean (<code>atl</code>). All cells are initially marked as <code>false</code>.</li>
</ul>
<h4 id="step-2-dfs-for-pacific-and-atlantic-ocean">Step 2: DFS for Pacific and Atlantic Ocean</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>; j <span style="color:#666">&lt;</span> n; j<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    dfs(heights, pac, <span style="color:#666">0</span>, j);
</span></span><span style="display:flex;"><span>    dfs(heights, atl, m <span style="color:#666">-</span><span style="color:#666">1</span>, j);            
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>; j <span style="color:#666">&lt;</span> m; j<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    dfs(heights, pac, j, <span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>    dfs(heights, atl, j, n <span style="color:#666">-</span> <span style="color:#666">1</span>);            
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>The outer loops iterate through the borders of the matrix. The Pacific Ocean touches the top row (<code>0, j</code>) and the left column (<code>j, 0</code>), so we initiate DFS from these cells to propagate possible water flow.</li>
<li>Similarly, the Atlantic Ocean touches the bottom row (<code>m - 1, j</code>) and the right column (<code>j, n - 1</code>), so we initiate DFS from these cells for the Atlantic Ocean.</li>
</ul>
<h4 id="step-3-dfs-function-for-propagating-water-flow">Step 3: DFS Function for Propagating Water Flow</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">dfs</span>(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> h, vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">bool</span><span style="color:#666">&gt;&gt;</span> <span style="color:#666">&amp;</span>vis, <span style="color:#0b0;font-weight:bold">int</span> i, <span style="color:#0b0;font-weight:bold">int</span> j) {
</span></span><span style="display:flex;"><span>    vis[i][j] <span style="color:#666">=</span> <span style="color:#a2f">true</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">&gt;</span> <span style="color:#666">0</span> <span style="color:#666">&amp;&amp;</span> <span style="color:#666">!</span>vis[i <span style="color:#666">-</span> <span style="color:#666">1</span>][j] <span style="color:#666">&amp;&amp;</span> h[i <span style="color:#666">-</span> <span style="color:#666">1</span>][j] <span style="color:#666">&gt;=</span> h[i][j])
</span></span><span style="display:flex;"><span>        dfs(h, vis, i <span style="color:#666">-</span> <span style="color:#666">1</span>, j);
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(j <span style="color:#666">&gt;</span> <span style="color:#666">0</span> <span style="color:#666">&amp;&amp;</span> <span style="color:#666">!</span>vis[i][j <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">&amp;&amp;</span> h[i][j <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">&gt;=</span> h[i][j])
</span></span><span style="display:flex;"><span>        dfs(h, vis, i, j <span style="color:#666">-</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">&lt;</span> h.size() <span style="color:#666">-</span> <span style="color:#666">1</span> <span style="color:#666">&amp;&amp;</span> <span style="color:#666">!</span>vis[i <span style="color:#666">+</span> <span style="color:#666">1</span>][j] <span style="color:#666">&amp;&amp;</span> h[i <span style="color:#666">+</span> <span style="color:#666">1</span>][j] <span style="color:#666">&gt;=</span> h[i][j])
</span></span><span style="display:flex;"><span>        dfs(h, vis, i <span style="color:#666">+</span> <span style="color:#666">1</span>, j);
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(j <span style="color:#666">&lt;</span> h[<span style="color:#666">0</span>].size() <span style="color:#666">-</span> <span style="color:#666">1</span> <span style="color:#666">&amp;&amp;</span> <span style="color:#666">!</span>vis[i][j <span style="color:#666">+</span> <span style="color:#666">1</span>] <span style="color:#666">&amp;&amp;</span> h[i][j <span style="color:#666">+</span> <span style="color:#666">1</span>] <span style="color:#666">&gt;=</span> h[i][j])
</span></span><span style="display:flex;"><span>        dfs(h, vis, i, j <span style="color:#666">+</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>The DFS function is called for each cell. The <code>vis</code> matrix tracks the visited cells for the given ocean (<code>pac</code> or <code>atl</code>).</li>
<li>At each cell <code>(i, j)</code>, we mark it as visited (<code>vis[i][j] = true</code>).</li>
<li>The DFS continues to neighboring cells in the up, down, left, and right directions if the neighboring cell has a greater or equal height (<code>h[i - 1][j] &gt;= h[i][j]</code> for up, and similarly for other directions).</li>
<li>This recursive propagation ensures that all cells that can flow to the respective ocean (Pacific or Atlantic) are marked.</li>
</ul>
<h4 id="step-4-collecting-the-result">Step 4: Collecting the Result</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;</span> ans;
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> m; i<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>; j <span style="color:#666">&lt;</span> n; j<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(pac[i][j] <span style="color:#666">&amp;&amp;</span> atl[i][j])
</span></span><span style="display:flex;"><span>            ans.push_back({i, j});
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> ans;
</span></span></code></pre></div><ul>
<li>After both DFS traversals are complete, we iterate through the matrix.</li>
<li>For each cell <code>(i, j)</code>, if the cell can flow to both the Pacific (<code>pac[i][j] == true</code>) and Atlantic oceans (<code>atl[i][j] == true</code>), we add the cell coordinates to the result vector <code>ans</code>.</li>
<li>Finally, we return the result vector <code>ans</code>, which contains all the coordinates where water can flow to both oceans.</li>
</ul>
<h3 id="complexity">Complexity</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<ul>
<li><strong>DFS Complexity</strong>: For each DFS traversal, we visit every cell once, making the time complexity for one DFS <code>O(m * n)</code>, where <code>m</code> and <code>n</code> are the number of rows and columns of the matrix.</li>
<li><strong>Overall Complexity</strong>: Since we perform two DFS traversals (one for the Pacific Ocean and one for the Atlantic Ocean), the overall time complexity is <code>O(2 * m * n)</code> or simply <code>O(m * n)</code>.</li>
</ul>
<h4 id="space-complexity">Space Complexity:</h4>
<ul>
<li>We use two 2D matrices (<code>pac</code> and <code>atl</code>) to track whether each cell can reach the respective ocean. Each matrix takes <code>O(m * n)</code> space.</li>
<li>The recursion stack for DFS can also take up to <code>O(m * n)</code> space in the worst case.</li>
<li>Thus, the overall space complexity is <code>O(m * n)</code>.</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>The solution effectively solves the problem of finding cells where water can flow to both the Pacific and Atlantic oceans by using depth-first search (DFS). The approach involves marking cells that can reach each ocean, and then collecting the coordinates where both oceans can be reached. The time and space complexity of the solution are both optimal for this problem, making it efficient even for larger matrices.</p>
<p><a href="https://leetcode.com/problems/pacific-atlantic-water-flow/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/1HDq998kmio?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

                    </div>
                    
                    
                    <div class="after-post-tags">
                        <ul class="tags">
                        
                        <li>
                        <a href="/tags/array">Array</a>
                        </li>
                        
                        <li>
                        <a href="/tags/depth-first-search">Depth-First Search</a>
                        </li>
                        
                        <li>
                        <a href="/tags/breadth-first-search">Breadth-First Search</a>
                        </li>
                        
                        <li>
                        <a href="/tags/matrix">Matrix</a>
                        </li>
                        
                        </ul>
                    </div>
                                        
                    
                    <div class="row PageNavigation d-flex justify-content-between font-weight-bold">
                    
                        <a class="d-block col-md-6" href="https://www.grid47.xyz/leetcode/solution-416-partition-equal-subset-sum/"> &laquo; Leetcode 416: Partition Equal Subset Sum</a>
                    
                    
                        <a class="d-block col-md-6 text-lg-right" href="https://www.grid47.xyz/leetcode/solution-419-battleships-in-a-board/">Leetcode 419: Battleships in a Board &raquo;</a>
                    
                    <div class="clearfix"></div>
                    </div>                                                            
                    
                </div>
                
            </div>
        </div>
        
        
    </div>


            </div>
<div class="jumbotron fortags">
	<div class="d-md-flex h-100">
		<div class="col-md-4 transpdark align-self-center text-center h-100">
			<div class="d-md-flex align-items-center justify-content-center h-100">
				<h2 class="d-md-block d-none align-self-center py-1 font-weight-light">Explore <span class="d-none d-md-inline">→</span></h2>
			</div>
		</div>
		<div class="col-md-8 p-5 align-self-center text-center">
			
			<a class="mt-1 mb-1" href="/tags/array">array</a>
			
			<a class="mt-1 mb-1" href="/tags/backtracking">backtracking</a>
			
			<a class="mt-1 mb-1" href="/tags/binary-indexed-tree">binary indexed tree</a>
			
			<a class="mt-1 mb-1" href="/tags/binary-search">binary search</a>
			
			<a class="mt-1 mb-1" href="/tags/binary-search-tree">binary search tree</a>
			
			<a class="mt-1 mb-1" href="/tags/binary-tree">binary tree</a>
			
			<a class="mt-1 mb-1" href="/tags/bit-manipulation">bit manipulation</a>
			
			<a class="mt-1 mb-1" href="/tags/bitmask">bitmask</a>
			
			<a class="mt-1 mb-1" href="/tags/brainteaser">brainteaser</a>
			
			<a class="mt-1 mb-1" href="/tags/breadth-first-search">breadth-first search</a>
			
			<a class="mt-1 mb-1" href="/tags/bucket-sort">bucket sort</a>
			
			<a class="mt-1 mb-1" href="/tags/combinatorics">combinatorics</a>
			
			<a class="mt-1 mb-1" href="/tags/concurrency">concurrency</a>
			
			<a class="mt-1 mb-1" href="/tags/counting">counting</a>
			
			<a class="mt-1 mb-1" href="/tags/counting-sort">counting sort</a>
			
			<a class="mt-1 mb-1" href="/tags/data-stream">data stream</a>
			
			<a class="mt-1 mb-1" href="/tags/database">database</a>
			
			<a class="mt-1 mb-1" href="/tags/depth-first-search">depth-first search</a>
			
			<a class="mt-1 mb-1" href="/tags/design">design</a>
			
			<a class="mt-1 mb-1" href="/tags/divide-and-conquer">divide and conquer</a>
			
			<a class="mt-1 mb-1" href="/tags/doubly-linked-list">doubly-linked list</a>
			
			<a class="mt-1 mb-1" href="/tags/dynamic-programming">dynamic programming</a>
			
			<a class="mt-1 mb-1" href="/tags/enumeration">enumeration</a>
			
			<a class="mt-1 mb-1" href="/tags/game-theory">game theory</a>
			
			<a class="mt-1 mb-1" href="/tags/geometry">geometry</a>
			
			<a class="mt-1 mb-1" href="/tags/graph">graph</a>
			
			<a class="mt-1 mb-1" href="/tags/greedy">greedy</a>
			
			<a class="mt-1 mb-1" href="/tags/hash-function">hash function</a>
			
			<a class="mt-1 mb-1" href="/tags/hash-table">hash table</a>
			
			<a class="mt-1 mb-1" href="/tags/heap-priority-queue">heap (priority queue)</a>
			
			<a class="mt-1 mb-1" href="/tags/interactive">interactive</a>
			
			<a class="mt-1 mb-1" href="/tags/iterator">iterator</a>
			
			<a class="mt-1 mb-1" href="/tags/linked-list">linked list</a>
			
			<a class="mt-1 mb-1" href="/tags/math">math</a>
			
			<a class="mt-1 mb-1" href="/tags/matrix">matrix</a>
			
			<a class="mt-1 mb-1" href="/tags/memoization">memoization</a>
			
			<a class="mt-1 mb-1" href="/tags/minimum-spanning-tree">minimum spanning tree</a>
			
			<a class="mt-1 mb-1" href="/tags/monotonic-queue">monotonic queue</a>
			
			<a class="mt-1 mb-1" href="/tags/monotonic-stack">monotonic stack</a>
			
			<a class="mt-1 mb-1" href="/tags/number-theory">number theory</a>
			
			<a class="mt-1 mb-1" href="/tags/ordered-set">ordered set</a>
			
			<a class="mt-1 mb-1" href="/tags/prefix-sum">prefix sum</a>
			
			<a class="mt-1 mb-1" href="/tags/probability-and-statistics">probability and statistics</a>
			
			<a class="mt-1 mb-1" href="/tags/queue">queue</a>
			
			<a class="mt-1 mb-1" href="/tags/quickselect">quickselect</a>
			
			<a class="mt-1 mb-1" href="/tags/radix-sort">radix sort</a>
			
			<a class="mt-1 mb-1" href="/tags/randomized">randomized</a>
			
			<a class="mt-1 mb-1" href="/tags/recursion">recursion</a>
			
			<a class="mt-1 mb-1" href="/tags/reservoir-sampling">reservoir sampling</a>
			
			<a class="mt-1 mb-1" href="/tags/rolling-hash">rolling hash</a>
			
			<a class="mt-1 mb-1" href="/tags/segment-tree">segment tree</a>
			
			<a class="mt-1 mb-1" href="/tags/shortest-path">shortest path</a>
			
			<a class="mt-1 mb-1" href="/tags/simulation">simulation</a>
			
			<a class="mt-1 mb-1" href="/tags/sliding-window">sliding window</a>
			
			<a class="mt-1 mb-1" href="/tags/sorting">sorting</a>
			
			<a class="mt-1 mb-1" href="/tags/stack">stack</a>
			
			<a class="mt-1 mb-1" href="/tags/string">string</a>
			
			<a class="mt-1 mb-1" href="/tags/string-matching">string matching</a>
			
			<a class="mt-1 mb-1" href="/tags/topological-sort">topological sort</a>
			
			<a class="mt-1 mb-1" href="/tags/tree">tree</a>
			
			<a class="mt-1 mb-1" href="/tags/trie">trie</a>
			
			<a class="mt-1 mb-1" href="/tags/two-pointers">two pointers</a>
			
			<a class="mt-1 mb-1" href="/tags/union-find">union find</a>
			
		</div>
	</div>
</div>

<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="https://www.grid47.xyz/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
