<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 842: Split Array into Fibonacci Sequence | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 842: Split Array into Fibonacci Sequence">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 842: Split Array into Fibonacci Sequence in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-842-split-array-into-fibonacci-sequence/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 842: Split Array into Fibonacci Sequence">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 842: Split Array into Fibonacci Sequence in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-08-14T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="String">
    <meta property="article:tag" content="Backtracking">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 842: Split Array into Fibonacci Sequence</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1342s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> splitIntoFibonacci(string num) {
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> res;
</span></span><span style="display:flex;"><span>        split(<span style="color:#666">0</span>, res, num);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">bool</span> <span style="color:#00a000">split</span>(<span style="color:#0b0;font-weight:bold">int</span> idx, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>res, string num) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(idx <span style="color:#666">==</span> num.size() <span style="color:#666">&amp;&amp;</span> res.size() <span style="color:#666">&gt;=</span> <span style="color:#666">3</span>) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">true</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> idx; i <span style="color:#666">&lt;</span> num.size(); i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(num[idx] <span style="color:#666">==</span> <span style="color:#b44">&#39;0&#39;</span> <span style="color:#666">&amp;&amp;</span> i <span style="color:#666">&gt;</span> idx) <span style="color:#a2f;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">int</span> sz <span style="color:#666">=</span> i <span style="color:#666">-</span> idx<span style="color:#666">+</span><span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">long</span> n <span style="color:#666">=</span> stol(<span style="color:#b44">&#34;0&#34;</span> <span style="color:#666">+</span> num.substr(idx, sz));
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(n <span style="color:#666">&gt;</span> INT_MAX) <span style="color:#a2f;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>                     
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(res.size() <span style="color:#666">&lt;=</span> <span style="color:#666">1</span> <span style="color:#666">||</span> (n <span style="color:#666">==</span> (<span style="color:#0b0;font-weight:bold">long</span>)res.back() <span style="color:#666">+</span> res[res.size() <span style="color:#666">-</span><span style="color:#666">2</span>])) {
</span></span><span style="display:flex;"><span>                res.push_back(n);
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">if</span>(split(i <span style="color:#666">+</span> <span style="color:#666">1</span>, res, num))
</span></span><span style="display:flex;"><span>                    <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">true</span>;
</span></span><span style="display:flex;"><span>                res.pop_back();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem asks to find a way to split a string of digits into a Fibonacci-like sequence. The string <code>num</code> represents a number, and the task is to split it into a sequence of integers where each integer is formed from a contiguous substring of <code>num</code>. The sequence must satisfy the condition that each number (starting from the third) is the sum of the previous two numbers. We need to return the resulting Fibonacci sequence as a list of integers, or an empty list if no such sequence exists.</p>
<h3 id="approach">Approach</h3>
<p>To solve this problem, we can use a <strong>backtracking</strong> approach. The idea is to try all possible ways of splitting the string into integers and check if the sequence formed follows the Fibonacci-like property: each number must be the sum of the previous two.</p>
<p>The key steps in the approach are:</p>
<ol>
<li>
<p><strong>Recursive Backtracking</strong>: The backtracking function explores different ways of splitting the string, trying each substring starting from the current index. For each valid substring, we try to build the Fibonacci sequence.</p>
</li>
<li>
<p><strong>Valid Substrings</strong>: For each split, we need to ensure that:</p>
<ul>
<li>The substring doesn&rsquo;t have a leading zero unless it is just &lsquo;0&rsquo;.</li>
<li>The number formed by the substring doesn&rsquo;t exceed the maximum integer limit (<code>INT_MAX</code>).</li>
</ul>
</li>
<li>
<p><strong>Fibonacci Sequence Validation</strong>: Once we have at least two numbers in the sequence, we check if the next number in the sequence is the sum of the previous two numbers. If the sequence violates this property at any point, we backtrack and try another split.</p>
</li>
<li>
<p><strong>Stopping Conditions</strong>: The recursion stops if the end of the string is reached and at least three numbers are in the sequence, indicating we’ve found a valid Fibonacci-like sequence.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<ol>
<li>
<p><strong>Main Function (<code>splitIntoFibonacci</code>)</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> splitIntoFibonacci(string num) {
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> res;
</span></span><span style="display:flex;"><span>    split(<span style="color:#666">0</span>, res, num);
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>This function initializes an empty result vector <code>res</code> and calls the helper function <code>split</code> to start the backtracking process from the 0th index.</li>
<li>Once the recursion completes, the <code>res</code> vector will contain the Fibonacci-like sequence if it is possible, and the function returns this sequence.</li>
</ul>
</li>
<li>
<p><strong>Backtracking Function (<code>split</code>)</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">bool</span> <span style="color:#00a000">split</span>(<span style="color:#0b0;font-weight:bold">int</span> idx, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>res, string num) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(idx <span style="color:#666">==</span> num.size() <span style="color:#666">&amp;&amp;</span> res.size() <span style="color:#666">&gt;=</span> <span style="color:#666">3</span>) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">true</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> idx; i <span style="color:#666">&lt;</span> num.size(); i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(num[idx] <span style="color:#666">==</span> <span style="color:#b44">&#39;0&#39;</span> <span style="color:#666">&amp;&amp;</span> i <span style="color:#666">&gt;</span> idx) <span style="color:#a2f;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> sz <span style="color:#666">=</span> i <span style="color:#666">-</span> idx <span style="color:#666">+</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">long</span> n <span style="color:#666">=</span> stol(<span style="color:#b44">&#34;0&#34;</span> <span style="color:#666">+</span> num.substr(idx, sz));
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(n <span style="color:#666">&gt;</span> INT_MAX) <span style="color:#a2f;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(res.size() <span style="color:#666">&lt;=</span> <span style="color:#666">1</span> <span style="color:#666">||</span> (n <span style="color:#666">==</span> (<span style="color:#0b0;font-weight:bold">long</span>)res.back() <span style="color:#666">+</span> res[res.size() <span style="color:#666">-</span> <span style="color:#666">2</span>])) {
</span></span><span style="display:flex;"><span>            res.push_back(n);
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(split(i <span style="color:#666">+</span> <span style="color:#666">1</span>, res, num)) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">true</span>;
</span></span><span style="display:flex;"><span>            res.pop_back();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">false</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>
<p><strong>Base Case</strong>: The recursion continues as long as <code>idx</code> (the current index) is not equal to the size of the string, and we ensure that the sequence has at least three numbers (<code>res.size() &gt;= 3</code>). If this condition is met, we return <code>true</code>, indicating we&rsquo;ve found a valid Fibonacci-like sequence.</p>
</li>
<li>
<p><strong>Loop Over Possible Splits</strong>: We use a loop to consider all substrings starting at index <code>idx</code>. For each possible substring, we:</p>
<ul>
<li><strong>Skip Invalid Substrings</strong>: We skip any substring that starts with &lsquo;0&rsquo; unless it is just &lsquo;0&rsquo; (to avoid leading zeroes).</li>
<li><strong>Convert the Substring to a Number</strong>: We use <code>stol</code> to convert the substring into a number (<code>n</code>). We ensure that the number doesn&rsquo;t exceed the integer limit (<code>INT_MAX</code>).</li>
</ul>
</li>
<li>
<p><strong>Fibonacci Validation</strong>: If the sequence already has at least two numbers, we check if the current number <code>n</code> is the sum of the last two numbers in the sequence: <code>n == res.back() + res[res.size() - 2]</code>. If this condition is met, we push <code>n</code> to the sequence and recursively try to continue building the sequence.</p>
</li>
<li>
<p><strong>Backtracking</strong>: If adding the current number doesn’t lead to a valid sequence, we pop the last number from <code>res</code> and try the next possible split.</p>
</li>
<li>
<p><strong>Termination</strong>: The function returns <code>true</code> if a valid sequence is found, and <code>false</code> if no valid sequence exists for the current split.</p>
</li>
</ul>
</li>
</ol>
<h3 id="complexity">Complexity</h3>
<ol>
<li>
<p><strong>Time Complexity</strong>:</p>
<ul>
<li>The time complexity is driven by the recursive backtracking function, which tries all possible ways of splitting the string into integers. For each recursive call, we check substrings starting from the current index <code>idx</code>, and in the worst case, we try every possible substring.</li>
<li>Since each recursive call handles a different substring and there are approximately <code>O(2^n)</code> potential splits, where <code>n</code> is the length of the string, the time complexity can be considered exponential in the worst case. However, in practice, pruning through invalid splits (such as those with leading zeros or exceeding <code>INT_MAX</code>) reduces the number of recursive calls significantly.</li>
</ul>
</li>
<li>
<p><strong>Space Complexity</strong>:</p>
<ul>
<li>The space complexity is determined by the size of the recursion stack and the storage for the result. At any point, the recursion stack can hold up to <code>O(n)</code> calls, where <code>n</code> is the length of the string.</li>
<li>Additionally, the result vector <code>res</code> can hold up to <code>O(n)</code> integers (since in the worst case, we would split the entire string into individual Fibonacci-like numbers). Therefore, the space complexity is <code>O(n)</code>.</li>
</ul>
</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>In conclusion, the provided solution efficiently solves the problem of finding a Fibonacci-like sequence from a string of digits using a backtracking approach. The key to the solution is trying different valid splits of the string and validating whether the formed numbers follow the Fibonacci property: each number is the sum of the previous two numbers. The use of recursion ensures that all possible valid sequences are explored, and backtracking ensures that invalid paths are pruned early. Despite the exponential worst-case time complexity, the pruning mechanisms in the algorithm significantly improve performance in practice. This solution is optimal for solving problems related to string partitioning and sequence validation.</p>
<p><a href="https://leetcode.com/problems/split-array-into-fibonacci-sequence/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>
<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
