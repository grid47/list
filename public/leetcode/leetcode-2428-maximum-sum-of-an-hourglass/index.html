<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 2428: Maximum Sum of an Hourglass | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 2428: Maximum Sum of an Hourglass">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 2428: Maximum Sum of an Hourglass in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-2428-maximum-sum-of-an-hourglass/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 2428: Maximum Sum of an Hourglass">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 2428: Maximum Sum of an Hourglass in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-03-09T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Matrix">
    <meta property="article:tag" content="Prefix Sum">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 2428: Maximum Sum of an Hourglass</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode755s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> maxSum(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> grid) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> m <span style="color:#666">=</span> grid.size(), n <span style="color:#666">=</span> grid[<span style="color:#666">0</span>].size();
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> ans <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">1</span>; i <span style="color:#666">&lt;</span> m <span style="color:#666">-</span> <span style="color:#666">1</span>; i<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">1</span>; j <span style="color:#666">&lt;</span> n <span style="color:#666">-</span> <span style="color:#666">1</span>; j<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">int</span> sum <span style="color:#666">=</span> grid[i][j] <span style="color:#666">+</span> grid[i <span style="color:#666">-</span> <span style="color:#666">1</span>][j] <span style="color:#666">+</span> grid[i <span style="color:#666">+</span> <span style="color:#666">1</span>][j] <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>                grid[i <span style="color:#666">-</span> <span style="color:#666">1</span>][j <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">+</span> grid[i <span style="color:#666">-</span> <span style="color:#666">1</span>][j <span style="color:#666">+</span> <span style="color:#666">1</span>] <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>                grid[i <span style="color:#666">+</span> <span style="color:#666">1</span>][j <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">+</span> grid[i <span style="color:#666">+</span> <span style="color:#666">1</span>][j <span style="color:#666">+</span> <span style="color:#666">1</span>];
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            ans <span style="color:#666">=</span> max(ans, sum);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> ans;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem asks us to find the maximum sum of an hourglass shape within a 2D grid. An hourglass shape in the grid consists of seven elements: the center element, the two elements directly above and below it, and the two diagonal elements surrounding it. The task is to calculate the sum of these seven elements for all possible hourglasses in the grid and return the maximum sum encountered.</p>
<h3 id="approach">Approach</h3>
<p>We can break the problem into two main components:</p>
<ol>
<li>
<p><strong>Understanding the Hourglass Shape</strong>:</p>
<ul>
<li>In a given 2D grid, an hourglass shape is formed by selecting one center element and then picking its adjacent elements (both vertically and diagonally).</li>
<li>For a grid element <code>grid[i][j]</code>, the hourglass elements are:
<ul>
<li>The center: <code>grid[i][j]</code></li>
<li>The top: <code>grid[i-1][j-1]</code>, <code>grid[i-1][j]</code>, <code>grid[i-1][j+1]</code></li>
<li>The bottom: <code>grid[i+1][j-1]</code>, <code>grid[i+1][j]</code>, <code>grid[i+1][j+1]</code></li>
</ul>
</li>
</ul>
<p>The sum of these seven elements is what we need to compute for each possible hourglass.</p>
</li>
<li>
<p><strong>Traversing the Grid</strong>:</p>
<ul>
<li>We need to traverse the grid and compute the sum for each possible hourglass. An hourglass can only start at positions where the center is not at the boundary of the grid. Hence, the valid indices for the center element are <code>i</code> ranging from <code>1</code> to <code>m-2</code> and <code>j</code> ranging from <code>1</code> to <code>n-2</code>, where <code>m</code> is the number of rows and <code>n</code> is the number of columns of the grid.</li>
<li>For each valid center, we compute the sum of the seven elements and track the maximum sum encountered.</li>
</ul>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<h4 id="step-1-initialize-variables">Step 1: Initialize Variables</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> m <span style="color:#666">=</span> grid.size(), n <span style="color:#666">=</span> grid[<span style="color:#666">0</span>].size();
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> ans <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span></code></pre></div><ul>
<li>We first get the number of rows <code>m</code> and columns <code>n</code> of the grid using <code>grid.size()</code> and <code>grid[0].size()</code>, respectively.</li>
<li>We initialize a variable <code>ans</code> to store the maximum hourglass sum. Initially, we set <code>ans</code> to 0.</li>
</ul>
<h4 id="step-2-loop-over-the-valid-centers">Step 2: Loop Over the Valid Centers</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">1</span>; i <span style="color:#666">&lt;</span> m <span style="color:#666">-</span> <span style="color:#666">1</span>; i<span style="color:#666">++</span>) 
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">1</span>; j <span style="color:#666">&lt;</span> n <span style="color:#666">-</span> <span style="color:#666">1</span>; j<span style="color:#666">++</span>) {
</span></span></code></pre></div><ul>
<li>We use two nested loops to iterate over all potential valid centers for the hourglasses. The outer loop iterates over <code>i</code> from <code>1</code> to <code>m-2</code> (to avoid the first and last rows), and the inner loop iterates over <code>j</code> from <code>1</code> to <code>n-2</code> (to avoid the first and last columns).</li>
<li>This ensures that we are only considering the valid centers for the hourglasses and not at the grid boundaries.</li>
</ul>
<h4 id="step-3-calculate-the-hourglass-sum">Step 3: Calculate the Hourglass Sum</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> sum <span style="color:#666">=</span> grid[i][j] <span style="color:#666">+</span> grid[i <span style="color:#666">-</span> <span style="color:#666">1</span>][j] <span style="color:#666">+</span> grid[i <span style="color:#666">+</span> <span style="color:#666">1</span>][j] <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>          grid[i <span style="color:#666">-</span> <span style="color:#666">1</span>][j <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">+</span> grid[i <span style="color:#666">-</span> <span style="color:#666">1</span>][j <span style="color:#666">+</span> <span style="color:#666">1</span>] <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>          grid[i <span style="color:#666">+</span> <span style="color:#666">1</span>][j <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">+</span> grid[i <span style="color:#666">+</span> <span style="color:#666">1</span>][j <span style="color:#666">+</span> <span style="color:#666">1</span>];
</span></span></code></pre></div><ul>
<li>For each valid center element <code>grid[i][j]</code>, we compute the sum of the seven elements that form the hourglass:
<ul>
<li>The center: <code>grid[i][j]</code></li>
<li>The top: <code>grid[i - 1][j - 1]</code>, <code>grid[i - 1][j]</code>, <code>grid[i - 1][j + 1]</code></li>
<li>The bottom: <code>grid[i + 1][j - 1]</code>, <code>grid[i + 1][j]</code>, <code>grid[i + 1][j + 1]</code></li>
</ul>
</li>
</ul>
<h4 id="step-4-update-maximum-sum">Step 4: Update Maximum Sum</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>ans <span style="color:#666">=</span> max(ans, sum);
</span></span></code></pre></div><ul>
<li>After computing the sum of the hourglass at the current center, we update <code>ans</code> to store the maximum of the current <code>ans</code> and the calculated <code>sum</code>.</li>
</ul>
<h4 id="step-5-return-the-result">Step 5: Return the Result</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> ans;
</span></span></code></pre></div><ul>
<li>After traversing the entire grid and calculating the sum for all possible hourglasses, we return <code>ans</code>, which holds the maximum hourglass sum.</li>
</ul>
<h3 id="complexity-analysis">Complexity Analysis</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<ul>
<li><strong>Outer Loops</strong>: The two nested loops iterate over all valid centers in the grid. The valid centers range from <code>1</code> to <code>m-2</code> for rows and <code>1</code> to <code>n-2</code> for columns. Thus, the number of valid centers is approximately <code>(m - 2) * (n - 2)</code>.</li>
<li><strong>Computing the Hourglass Sum</strong>: For each valid center, we compute the sum of the seven elements in constant time (<code>O(1)</code>), since accessing the elements in the grid takes constant time.</li>
</ul>
<p>Thus, the overall time complexity is:
[
O((m - 2) \times (n - 2)) = O(m \times n)
]
In the worst case, where we consider all elements of the grid, the time complexity is proportional to the size of the grid.</p>
<h4 id="space-complexity">Space Complexity:</h4>
<ul>
<li>The solution uses only a few variables (<code>m</code>, <code>n</code>, <code>ans</code>, and <code>sum</code>) and does not require additional data structures that grow with the input size. Therefore, the space complexity is constant:
[
O(1)
]</li>
</ul>
<h3 id="example-walkthrough">Example Walkthrough</h3>
<p>Let&rsquo;s walk through a simple example to see how the algorithm works.</p>
<h4 id="example-1-grid--1-1-1-1-9-1-1-1-1">Example 1: <code>grid = [[1, 1, 1], [1, 9, 1], [1, 1, 1]]</code></h4>
<ol>
<li>
<p><strong>Initialization</strong>:</p>
<ul>
<li>The grid has dimensions <code>3 x 3</code>, so <code>m = 3</code> and <code>n = 3</code>.</li>
<li>We initialize <code>ans = 0</code>.</li>
</ul>
</li>
<li>
<p><strong>First (and only) Hourglass</strong>:</p>
<ul>
<li>The only valid center is <code>grid[1][1]</code>, with value <code>9</code>.</li>
<li>The sum of the hourglass centered at <code>(1, 1)</code> is:
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>9 + 1 + 1 + 1 + 1 + 1 + 1 = 15
</span></span></code></pre></div></li>
<li>We update <code>ans</code> to <code>15</code>.</li>
</ul>
</li>
<li>
<p><strong>Result</strong>:</p>
<ul>
<li>The maximum hourglass sum is <code>15</code>.</li>
</ul>
</li>
</ol>
<h4 id="example-2-grid--1-2-3-4-5-6-7-8-9">Example 2: <code>grid = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]</code></h4>
<ol>
<li>
<p><strong>Initialization</strong>:</p>
<ul>
<li>The grid has dimensions <code>3 x 3</code>, so <code>m = 3</code> and <code>n = 3</code>.</li>
<li>We initialize <code>ans = 0</code>.</li>
</ul>
</li>
<li>
<p><strong>First (and only) Hourglass</strong>:</p>
<ul>
<li>The only valid center is <code>grid[1][1]</code>, with value <code>5</code>.</li>
<li>The sum of the hourglass centered at <code>(1, 1)</code> is:
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>5 + 2 + 8 + 4 + 6 + 7 + 9 = 41
</span></span></code></pre></div></li>
<li>We update <code>ans</code> to <code>41</code>.</li>
</ul>
</li>
<li>
<p><strong>Result</strong>:</p>
<ul>
<li>The maximum hourglass sum is <code>41</code>.</li>
</ul>
</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>This solution efficiently calculates the maximum sum of an hourglass in a 2D grid by iterating over valid centers and summing the elements of the hourglass shape for each valid center. The time complexity is proportional to the size of the grid, and the space complexity is constant. This approach is optimal for the given problem constraints.</p>
<p><a href="https://leetcode.com/problems/maximum-sum-of-an-hourglass/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/u4dYdiBXAjI?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
