<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 2866: Beautiful Towers II | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 2866: Beautiful Towers II">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 2866: Beautiful Towers II in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-2866-beautiful-towers-ii/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 2866: Beautiful Towers II">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 2866: Beautiful Towers II in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-01-25T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Stack">
    <meta property="article:tag" content="Monotonic Stack">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 2866: Beautiful Towers II</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode988s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> maximumSumOfHeights(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> A) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> A.size();
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;</span> left(n), stack <span style="color:#666">=</span> {<span style="color:#666">-</span><span style="color:#666">1</span>};
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>, cur <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">while</span> (stack.size() <span style="color:#666">&gt;</span> <span style="color:#666">1</span> <span style="color:#666">&amp;&amp;</span> A[stack.back()] <span style="color:#666">&gt;</span> A[i]) {
</span></span><span style="display:flex;"><span>                <span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> stack.back();
</span></span><span style="display:flex;"><span>                stack.pop_back();
</span></span><span style="display:flex;"><span>                cur <span style="color:#666">-=</span> <span style="color:#666">1L</span> <span style="color:#666">*</span> (j <span style="color:#666">-</span> stack.back()) <span style="color:#666">*</span> A[j];
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            cur <span style="color:#666">+=</span> <span style="color:#666">1L</span> <span style="color:#666">*</span> (i <span style="color:#666">-</span> stack.back()) <span style="color:#666">*</span> A[i];
</span></span><span style="display:flex;"><span>            stack.push_back(i);
</span></span><span style="display:flex;"><span>            left[i] <span style="color:#666">=</span> cur;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        stack <span style="color:#666">=</span> {n};
</span></span><span style="display:flex;"><span>        cur <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> n <span style="color:#666">-</span> <span style="color:#666">1</span>; i <span style="color:#666">&gt;=</span> <span style="color:#666">0</span>; i<span style="color:#666">--</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">while</span> (stack.size() <span style="color:#666">&gt;</span> <span style="color:#666">1</span> <span style="color:#666">&amp;&amp;</span> A[stack.back()] <span style="color:#666">&gt;</span> A[i]) {
</span></span><span style="display:flex;"><span>                <span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> stack.back();
</span></span><span style="display:flex;"><span>                stack.pop_back();
</span></span><span style="display:flex;"><span>                cur <span style="color:#666">-=</span> <span style="color:#666">1L</span> <span style="color:#666">*</span> <span style="color:#666">-</span>(j <span style="color:#666">-</span> stack.back()) <span style="color:#666">*</span> A[j];
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            cur <span style="color:#666">+=</span> <span style="color:#666">1L</span> <span style="color:#666">*</span> <span style="color:#666">-</span>(i <span style="color:#666">-</span> stack.back()) <span style="color:#666">*</span> A[i];
</span></span><span style="display:flex;"><span>            stack.push_back(i);
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> max(res, left[i] <span style="color:#666">+</span> cur <span style="color:#666">-</span> A[i]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem requires us to calculate the maximum sum of heights of a subsequence derived from an array <code>A</code>. In this problem, the height of any subsequence is the sum of elements, where the contribution of each element is adjusted by the minimum height to the left and right of it. The task is to find the maximum sum of such a subsequence considering every element in the array and adjusting the heights in a way that maximizes the sum.</p>
<h3 id="approach">Approach</h3>
<p>To solve this problem efficiently, we employ the <strong>monotonic stack</strong> technique. The idea is to iterate over the array and for each element, calculate the maximum sum of heights considering it as the peak of the subsequence. We maintain two passes over the array to compute the sum of heights to the left and right of each element.</p>
<p>The stack helps in maintaining the minimum value at any point by efficiently determining which elements can &ldquo;extend&rdquo; the height subsequence. The goal is to compute the maximum sum possible for any subsequence formed by these heights.</p>
<h3 id="code-breakdown">Code Breakdown</h3>
<h4 id="step-1-initialize-variables">Step 1: Initialize Variables</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> A.size();
</span></span><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;</span> left(n), stack <span style="color:#666">=</span> {<span style="color:#666">-</span><span style="color:#666">1</span>};
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>, cur <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span></code></pre></div><ul>
<li><code>n</code> stores the size of the input array <code>A</code>.</li>
<li><code>left</code> is a vector used to store the sum of heights to the left of each index.</li>
<li><code>stack</code> is initialized with <code>-1</code> to represent the boundary for processing elements.</li>
<li><code>res</code> will store the final result, i.e., the maximum sum of heights found during the iterations.</li>
<li><code>cur</code> keeps track of the current sum as we iterate through the array.</li>
</ul>
<h4 id="step-2-compute-left-heights-using-monotonic-stack">Step 2: Compute Left Heights Using Monotonic Stack</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">while</span> (stack.size() <span style="color:#666">&gt;</span> <span style="color:#666">1</span> <span style="color:#666">&amp;&amp;</span> A[stack.back()] <span style="color:#666">&gt;</span> A[i]) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> stack.back();
</span></span><span style="display:flex;"><span>        stack.pop_back();
</span></span><span style="display:flex;"><span>        cur <span style="color:#666">-=</span> <span style="color:#666">1L</span> <span style="color:#666">*</span> (j <span style="color:#666">-</span> stack.back()) <span style="color:#666">*</span> A[j];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    cur <span style="color:#666">+=</span> <span style="color:#666">1L</span> <span style="color:#666">*</span> (i <span style="color:#666">-</span> stack.back()) <span style="color:#666">*</span> A[i];
</span></span><span style="display:flex;"><span>    stack.push_back(i);
</span></span><span style="display:flex;"><span>    left[i] <span style="color:#666">=</span> cur;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>The first loop is responsible for calculating the heights to the left of each index. This is done by iterating from left to right across the array.</li>
<li>For each element <code>A[i]</code>, we adjust the stack by popping elements from the stack that are greater than <code>A[i]</code>. This ensures that the stack always maintains elements in increasing order.</li>
<li>The <code>cur</code> value is updated with the contribution of each element. The <code>1L * (i - stack.back()) * A[i]</code> term calculates the area (height * width) formed by the current element as a &ldquo;rectangle.&rdquo;</li>
<li>We then store the current sum of heights for the left side in <code>left[i]</code>.</li>
</ul>
<h4 id="step-3-compute-right-heights-and-maximize-result">Step 3: Compute Right Heights and Maximize Result</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>stack <span style="color:#666">=</span> {n};
</span></span><span style="display:flex;"><span>cur <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> n <span style="color:#666">-</span> <span style="color:#666">1</span>; i <span style="color:#666">&gt;=</span> <span style="color:#666">0</span>; i<span style="color:#666">--</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">while</span> (stack.size() <span style="color:#666">&gt;</span> <span style="color:#666">1</span> <span style="color:#666">&amp;&amp;</span> A[stack.back()] <span style="color:#666">&gt;</span> A[i]) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> stack.back();
</span></span><span style="display:flex;"><span>        stack.pop_back();
</span></span><span style="display:flex;"><span>        cur <span style="color:#666">-=</span> <span style="color:#666">1L</span> <span style="color:#666">*</span> <span style="color:#666">-</span>(j <span style="color:#666">-</span> stack.back()) <span style="color:#666">*</span> A[j];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    cur <span style="color:#666">+=</span> <span style="color:#666">1L</span> <span style="color:#666">*</span> <span style="color:#666">-</span>(i <span style="color:#666">-</span> stack.back()) <span style="color:#666">*</span> A[i];
</span></span><span style="display:flex;"><span>    stack.push_back(i);
</span></span><span style="display:flex;"><span>    res <span style="color:#666">=</span> max(res, left[i] <span style="color:#666">+</span> cur <span style="color:#666">-</span> A[i]);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>In the second pass, we calculate the heights to the right of each index. This loop iterates from right to left across the array.</li>
<li>Similarly to the left pass, we maintain a stack and update the current sum (<code>cur</code>). The negative signs in the terms are used to handle the right side and maintain a correct calculation of heights.</li>
<li>The key step here is to calculate <code>left[i] + cur - A[i]</code>. This combines the sum of heights to the left of <code>i</code> with the sum to the right, adjusting for the contribution of the current element <code>A[i]</code> (as it was already considered in both directions).</li>
</ul>
<h4 id="step-4-return-the-result">Step 4: Return the Result</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> res;
</span></span></code></pre></div><ul>
<li>After both passes, <code>res</code> contains the maximum sum of heights that can be achieved. We return this as the final answer.</li>
</ul>
<h3 id="example-walkthrough">Example Walkthrough</h3>
<p>Let&rsquo;s go through an example to illustrate the process.</p>
<p><strong>Example 1</strong>:
Input: <code>A = [1, 3, 2, 4]</code></p>
<ul>
<li>
<p><strong>First Pass (Left Heights)</strong>:</p>
<ul>
<li>We start with the stack initialized to <code>[-1]</code>.</li>
<li>For <code>i = 0</code> (A[0] = 1), the stack becomes <code>[-1, 0]</code>. The left height sum is <code>1</code>.</li>
<li>For <code>i = 1</code> (A[1] = 3), the stack becomes <code>[-1, 0, 1]</code>. The left height sum is updated to <code>1 + 3 = 4</code>.</li>
<li>For <code>i = 2</code> (A[2] = 2), we pop elements until the stack contains <code>[0]</code>. The left height sum is updated to <code>1 + 3 + 2 = 6</code>.</li>
<li>For <code>i = 3</code> (A[3] = 4), the stack becomes <code>[0, 1, 2, 3]</code>. The left height sum is updated to <code>1 + 3 + 2 + 4 = 10</code>.</li>
</ul>
</li>
<li>
<p><strong>Second Pass (Right Heights)</strong>:</p>
<ul>
<li>We start with the stack initialized to <code>[n]</code>.</li>
<li>For <code>i = 3</code> (A[3] = 4), the stack becomes <code>[4, 3]</code>. The right height sum is <code>4</code>.</li>
<li>For <code>i = 2</code> (A[2] = 2), the stack becomes <code>[4, 2]</code>. The right height sum is updated to <code>4 + 2 = 6</code>.</li>
<li>For <code>i = 1</code> (A[1] = 3), the stack becomes <code>[4, 1]</code>. The right height sum is updated to <code>6 + 3 = 9</code>.</li>
<li>For <code>i = 0</code> (A[0] = 1), the stack becomes <code>[4, 0]</code>. The right height sum is updated to <code>9 + 1 = 10</code>.</li>
</ul>
</li>
<li>
<p><strong>Final Result</strong>: The maximum sum of heights is <code>10</code>.</p>
</li>
</ul>
<h3 id="complexity">Complexity</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<ul>
<li><strong>O(n)</strong>: Both passes over the array each take linear time. The use of the monotonic stack ensures that each element is pushed and popped from the stack at most once, making each pass linear in complexity.</li>
</ul>
<h4 id="space-complexity">Space Complexity:</h4>
<ul>
<li><strong>O(n)</strong>: The space used by the stack and the <code>left</code> array is proportional to the size of the input array.</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>The solution efficiently computes the maximum sum of heights by utilizing a monotonic stack to keep track of the minimum heights on both the left and right of each element in the array. This allows us to calculate the sum of heights in linear time, making the solution optimal for large input sizes. The two-pass approach ensures that we can calculate the contribution of each element in both directions, and the overall complexity is kept to <strong>O(n)</strong>, which is optimal for this type of problem.</p>
<p><a href="https://leetcode.com/problems/beautiful-towers-ii/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/HZVMmKR0jZw?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
