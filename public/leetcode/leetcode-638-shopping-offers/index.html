<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 638: Shopping Offers | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 638: Shopping Offers">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 638: Shopping Offers in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-638-shopping-offers/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 638: Shopping Offers">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 638: Shopping Offers in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-09-04T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Dynamic Programming">
    <meta property="article:tag" content="Backtracking">
    <meta property="article:tag" content="Bit Manipulation">
    <meta property="article:tag" content="Memoization">
    <meta property="article:tag" content="Bitmask">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 638: Shopping Offers</h1> 
            </div>
			<div class="article-post">
				<h2 id="hahahugoshortcode1227s0hbhb"><figure class="remote-image" style="text-align:center; margin: 0;">
    <div style="position: relative; width:900px; max-width:100%; padding-bottom:56.25%; overflow: hidden; border-radius:0px;">
      <img src="https://raw.githubusercontent.com/grid47/list-images/refs/heads/main/list/638.webp" 
           alt="A set of shopping offers with discounts, where each offer is softly glowing based on its value." 
           style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
    </div>
    
      <figcaption style="font-size: 0.8em; font-weight: 300; color:#555; margin-top: 4px; line-height: 1.2;">
        Solution to LeetCode 638: Shopping Offers Problem
      </figcaption>
    
  </figure>
  </h2>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1227s1hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    map<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> mp;
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">shoppingOffers</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> price, vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> special, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> needs) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(mp[needs]) <span style="color:#a2f;font-weight:bold">return</span> mp[needs];
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> best <span style="color:#666">=</span> calculate(price, needs);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#a2f;font-weight:bold">auto</span> <span style="color:#666">&amp;</span><span style="color:#a0a000">sp</span>: special) {
</span></span><span style="display:flex;"><span>            sub(needs, sp);
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(noneg(needs)) {
</span></span><span style="display:flex;"><span>                <span style="color:#0b0;font-weight:bold">int</span> woffer <span style="color:#666">=</span> sp.back() <span style="color:#666">+</span> shoppingOffers(price, special, needs);
</span></span><span style="display:flex;"><span>                best <span style="color:#666">=</span> min(best, woffer);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            add(needs, sp);
</span></span><span style="display:flex;"><span>        }        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> mp[needs] <span style="color:#666">=</span> best;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">calculate</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>prices, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>needs) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> needs.size(); i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            res <span style="color:#666">+=</span> (needs[i] <span style="color:#666">*</span> prices[i]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;        
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">add</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>needs, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>sp) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> needs.size(); i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            needs[i] <span style="color:#666">+=</span> sp[i];
</span></span><span style="display:flex;"><span>        }     
</span></span><span style="display:flex;"><span>    }    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">sub</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>needs, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>sp) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> needs.size(); i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            needs[i] <span style="color:#666">-=</span> sp[i];
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">bool</span> <span style="color:#00a000">noneg</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>needs) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> needs.size(); i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(needs[i] <span style="color:#666">&lt;</span> <span style="color:#666">0</span>) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">false</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem asks us to find the minimum cost of buying products given the prices for each item and a list of special offers. Each special offer provides a discount if certain quantities of items are bought together. We need to calculate the minimum cost to satisfy a set of product needs using the given prices and special offers.</p>
<p>We are given:</p>
<ol>
<li><code>price</code>: A list of prices for each product.</li>
<li><code>special</code>: A list of special offers, where each offer contains a set of quantities of products and the corresponding price for that set.</li>
<li><code>needs</code>: A list of quantities of products needed.</li>
</ol>
<p>Our goal is to find the minimum cost to fulfill the needs, utilizing the special offers optimally, without purchasing more than required.</p>
<h3 id="approach">Approach</h3>
<p>The key challenge in solving this problem is efficiently deciding whether to buy individual products at full price or utilize the special offers. We need to recursively explore both options while ensuring that we minimize the total cost. The approach uses <strong>memoization</strong> (dynamic programming) to avoid recomputation of previously solved subproblems.</p>
<p>We use a <strong>depth-first search (DFS)</strong> with memoization to explore all possible ways to fulfill the needs:</p>
<ol>
<li><strong>Base case</strong>: If we reach a state where no more products are needed, the cost is 0.</li>
<li><strong>Recursive case</strong>: For each special offer, we check if we can apply it and then recursively calculate the cost for the remaining needs. We keep track of the minimum cost found.</li>
</ol>
<p>In addition, we calculate the cost of buying products at the full price for the current needs and compare it with the costs obtained by applying the special offers.</p>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<p>Let&rsquo;s break down the code and understand how it works:</p>
<h4 id="1-data-structures-and-initialization">1. <strong>Data Structures and Initialization</strong></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>map<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> mp;
</span></span></code></pre></div><ul>
<li><code>mp</code> is a memoization map that stores the minimum cost for a given state of <code>needs</code>. This map helps avoid redundant calculations for the same needs.</li>
</ul>
<h4 id="2-recursive-function-shoppingoffers">2. <strong>Recursive Function <code>shoppingOffers</code></strong></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">shoppingOffers</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> price, vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> special, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> needs) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(mp[needs]) <span style="color:#a2f;font-weight:bold">return</span> mp[needs];
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> best <span style="color:#666">=</span> calculate(price, needs);
</span></span></code></pre></div><ul>
<li>The function <code>shoppingOffers</code> is the main entry point. It checks if the current <code>needs</code> have been computed previously using the <code>mp</code> map. If yes, it returns the stored result.</li>
<li>Otherwise, it calculates the cost of fulfilling the current <code>needs</code> without any offers using the <code>calculate</code> function and stores it in <code>best</code>.</li>
</ul>
<h4 id="3-processing-special-offers">3. <strong>Processing Special Offers</strong></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#a2f;font-weight:bold">auto</span> <span style="color:#666">&amp;</span><span style="color:#a0a000">sp</span>: special) {
</span></span><span style="display:flex;"><span>    sub(needs, sp);
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(noneg(needs)) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> woffer <span style="color:#666">=</span> sp.back() <span style="color:#666">+</span> shoppingOffers(price, special, needs);
</span></span><span style="display:flex;"><span>        best <span style="color:#666">=</span> min(best, woffer);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    add(needs, sp);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>The function then iterates through each special offer in <code>special</code>. For each offer, it first attempts to apply the offer by subtracting the quantities of the items in the offer from the current <code>needs</code> using the <code>sub</code> function.</li>
<li>If the result is valid (i.e., no negative needs remain), it recursively calculates the total cost of using the special offer (which is the offer&rsquo;s cost plus the cost of the remaining needs).</li>
<li>The <code>best</code> variable is updated to store the minimum cost encountered.</li>
</ul>
<h4 id="4-calculate-full-price-for-current-needs">4. <strong>Calculate Full Price for Current Needs</strong></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> mp[needs] <span style="color:#666">=</span> best;
</span></span></code></pre></div><ul>
<li>After considering all possible special offers, the function stores the minimum cost found for the current <code>needs</code> in the memoization map <code>mp</code>.</li>
</ul>
<h4 id="5-helper-functions">5. <strong>Helper Functions</strong></h4>
<ul>
<li><strong><code>calculate</code></strong>: This function calculates the cost of fulfilling the current <code>needs</code> without any offers.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">calculate</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>prices, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>needs) {
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> needs.size(); i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>        res <span style="color:#666">+=</span> (needs[i] <span style="color:#666">*</span> prices[i]);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong><code>add</code></strong>: This function adds the quantities from a special offer to the <code>needs</code> vector.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">add</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>needs, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>sp) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> needs.size(); i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>        needs[i] <span style="color:#666">+=</span> sp[i];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong><code>sub</code></strong>: This function subtracts the quantities from a special offer from the <code>needs</code> vector.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">sub</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>needs, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>sp) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> needs.size(); i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>        needs[i] <span style="color:#666">-=</span> sp[i];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong><code>noneg</code></strong>: This function checks if any of the values in the <code>needs</code> vector are negative. If any value is negative, it means the offer cannot be applied, so the function returns false.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">bool</span> <span style="color:#00a000">noneg</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>needs) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> needs.size(); i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(needs[i] <span style="color:#666">&lt;</span> <span style="color:#666">0</span>) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">false</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">true</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="complexity">Complexity</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<ul>
<li>
<p><strong>O(n * m * k)</strong>, where:</p>
<ul>
<li><code>n</code> is the number of products (size of <code>needs</code> and <code>price</code>),</li>
<li><code>m</code> is the number of special offers (size of <code>special</code>),</li>
<li><code>k</code> is the size of the state vector (size of <code>needs</code>).</li>
</ul>
<p>The algorithm explores all possible ways to fulfill the <code>needs</code> recursively, while memoizing the results to avoid redundant calculations.</p>
</li>
</ul>
<h4 id="space-complexity">Space Complexity:</h4>
<ul>
<li>
<p><strong>O(n * k)</strong>, where:</p>
<ul>
<li><code>n</code> is the number of products,</li>
<li><code>k</code> is the size of the state vector (size of <code>needs</code>).</li>
</ul>
<p>The space complexity is determined by the memoization map <code>mp</code>, which stores the minimum cost for each unique state of <code>needs</code>.</p>
</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>This solution efficiently calculates the minimum cost to fulfill the shopping needs using dynamic programming and memoization. By recursively exploring all combinations of full price and special offers, we ensure that the minimum cost is obtained. The use of helper functions like <code>sub</code>, <code>add</code>, and <code>noneg</code> ensures that the state transitions (i.e., applying and removing special offers) are correctly handled. This approach allows the solution to scale well even with a large number of products and special offers.</p>
<p><a href="https://leetcode.com/problems/shopping-offers/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/t6atP4Yv7_4?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
