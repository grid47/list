<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 837: New 21 Game | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 837: New 21 Game">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 837: New 21 Game in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-837-new-21-game/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 837: New 21 Game">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 837: New 21 Game in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-08-15T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Math">
    <meta property="article:tag" content="Dynamic Programming">
    <meta property="article:tag" content="Sliding Window">
    <meta property="article:tag" content="Probability and Statistics">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 837: New 21 Game</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1338s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">double</span> new21Game(<span style="color:#0b0;font-weight:bold">int</span> n, <span style="color:#0b0;font-weight:bold">int</span> k, <span style="color:#0b0;font-weight:bold">int</span> w) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(k <span style="color:#666">==</span> <span style="color:#666">0</span> <span style="color:#666">||</span> n <span style="color:#666">&gt;=</span> k <span style="color:#666">+</span> w)
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">/*
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        You will get number x (1 to w) in a draw, with probablity 1 / w
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        if you need probablity of getting i points in a draw
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        we can do slecting (i - x) points with probablity dp[i - x] and
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        selecting x with probablity x
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        so doing it together dp[i - x] * 1 / w
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        and this to every x in [1, w] to get net prob of dp[i].
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        once the pionts has crossed a limit k, there will be no more selections.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        then we look for only the over flows from previous trials.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        why target probablity counted from k onward instead of dp[n].
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">        */</span>        
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">double</span><span style="color:#666">&gt;</span> dp(n<span style="color:#666">+</span><span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>        dp[<span style="color:#666">0</span>] <span style="color:#666">=</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">double</span> Wsum <span style="color:#666">=</span> <span style="color:#666">1.0</span>, res <span style="color:#666">=</span> <span style="color:#666">0.0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">1</span>; i <span style="color:#666">&lt;=</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            dp[i] <span style="color:#666">=</span> Wsum<span style="color:#666">/</span> w;
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">&lt;</span> k) Wsum <span style="color:#666">+=</span> dp[i];
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">else</span> res <span style="color:#666">+=</span> dp[i];
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">-</span> w <span style="color:#666">&gt;=</span> <span style="color:#666">0</span>) Wsum <span style="color:#666">-=</span> dp[i <span style="color:#666">-</span> w];
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>In this problem, we are tasked with solving a variant of the &ldquo;21 Game&rdquo; in a probabilistic setting. In the game, we are given a total number of points <code>n</code>, a threshold value <code>k</code> (which is the target), and a range <code>w</code> of possible points you can get in each draw. The task is to calculate the probability of achieving exactly <code>n</code> points or fewer, starting from a score of <code>0</code>, without exceeding <code>n</code> points.</p>
<ul>
<li><strong>n</strong>: The total score we aim to achieve or exceed.</li>
<li><strong>k</strong>: The threshold score, at which we stop drawing cards (if the score is greater than or equal to <code>k</code>, no more cards are drawn).</li>
<li><strong>w</strong>: The maximum value a single card can have in a draw.</li>
</ul>
<h3 id="approach">Approach</h3>
<p>The goal is to compute the probability of reaching a score less than or equal to <code>n</code> without exceeding <code>n</code>. The game has certain dynamics, where you draw cards, and each card has a value from <code>1</code> to <code>w</code>. If a score <code>i</code> exceeds <code>n</code>, the game ends, and we do not continue drawing cards. We need to calculate the probability that the game ends in a score less than or equal to <code>n</code>.</p>
<h4 id="key-observations">Key Observations:</h4>
<ol>
<li>The game ends as soon as your score reaches or exceeds <code>k</code>. If the score exceeds <code>n</code>, it is also an end condition.</li>
<li>Every time you draw a card, you gain between 1 and <code>w</code> points, and the probability of drawing a particular card value is <code>1/w</code>.</li>
<li>The dynamic programming approach works well here. We use a DP array, <code>dp[i]</code>, to store the probability of reaching exactly <code>i</code> points at any given time. The main challenge is to efficiently calculate these probabilities without redundantly computing subproblems.</li>
<li>We start by initializing <code>dp[0] = 1</code> because starting from score <code>0</code> is guaranteed. Then, we calculate probabilities for each score up to <code>n</code>.</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">double</span><span style="color:#666">&gt;</span> dp(n<span style="color:#666">+</span><span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>dp[<span style="color:#666">0</span>] <span style="color:#666">=</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">double</span> Wsum <span style="color:#666">=</span> <span style="color:#666">1.0</span>, res <span style="color:#666">=</span> <span style="color:#666">0.0</span>;
</span></span></code></pre></div><ul>
<li>We initialize an array <code>dp</code> of size <code>n + 1</code> to store the probabilities. The element <code>dp[i]</code> will represent the probability of having exactly <code>i</code> points.</li>
<li>We set <code>dp[0] = 1</code> because the probability of starting from <code>0</code> is always 1.</li>
<li><code>Wsum</code> is used to maintain the sum of the probabilities from the previous <code>w</code> states (i.e., the sum of probabilities for scores that can contribute to the current score).</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">1</span>; i <span style="color:#666">&lt;=</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    dp[i] <span style="color:#666">=</span> Wsum <span style="color:#666">/</span> w;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">&lt;</span> k) Wsum <span style="color:#666">+=</span> dp[i];
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">else</span> res <span style="color:#666">+=</span> dp[i];
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">-</span> w <span style="color:#666">&gt;=</span> <span style="color:#666">0</span>) Wsum <span style="color:#666">-=</span> dp[i <span style="color:#666">-</span> w];
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>For each score <code>i</code> from <code>1</code> to <code>n</code>, we compute the probability of reaching <code>i</code> points by considering all possible previous states that can contribute to this score.
<ul>
<li>The probability <code>dp[i]</code> is computed as the sum of probabilities of drawing any card that leads to score <code>i</code>, which is given by <code>Wsum / w</code> (as we divide the sum by <code>w</code> because each draw has an equal probability).</li>
</ul>
</li>
<li>If <code>i &lt; k</code>, we add <code>dp[i]</code> to <code>Wsum</code> since we are still drawing cards and the score has not reached the threshold <code>k</code>.</li>
<li>If <code>i &gt;= k</code>, we stop drawing cards and add <code>dp[i]</code> to the result <code>res</code> because this is the score we are interested in.</li>
<li>If <code>i - w &gt;= 0</code>, we subtract <code>dp[i - w]</code> from <code>Wsum</code> to ensure that the sliding window of probabilities is kept up to date.</li>
</ul>
<p>Finally, the result <code>res</code> will contain the total probability of reaching a score from <code>k</code> to <code>n</code> without exceeding <code>n</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> res;
</span></span></code></pre></div><ul>
<li>Return the result <code>res</code>, which contains the total probability of achieving a score within the required range.</li>
</ul>
<h3 id="complexity">Complexity</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<ul>
<li><strong>O(n)</strong>: We loop through each score from <code>1</code> to <code>n</code>. For each score, we perform constant time operations (adding and subtracting values to/from <code>Wsum</code>). Thus, the overall time complexity is linear with respect to the number of scores <code>n</code>.</li>
</ul>
<h4 id="space-complexity">Space Complexity:</h4>
<ul>
<li><strong>O(n)</strong>: We use an array <code>dp</code> of size <code>n + 1</code> to store the probabilities for each score from <code>0</code> to <code>n</code>. The space complexity is therefore proportional to <code>n</code>.</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>The <code>new21Game</code> function computes the probability of achieving a score within the allowed range by using dynamic programming. By maintaining a running sum of probabilities (<code>Wsum</code>), the solution efficiently calculates the required probability for each score. The sliding window technique ensures that we do not redundantly compute overlapping subproblems, making this approach both time and space efficient.</p>
<p>This solution is optimal for solving the problem with a time complexity of <strong>O(n)</strong> and space complexity of <strong>O(n)</strong>, making it scalable for large inputs.</p>
<p>This approach uses concepts of dynamic programming, sliding window, and probabilistic calculations, all of which contribute to its efficiency in solving the &ldquo;new21Game&rdquo; problem.</p>
<p><a href="https://leetcode.com/problems/new-21-game/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/zKi4LzjK27k?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
