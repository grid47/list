<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 688: Knight Probability in Chessboard | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 688: Knight Probability in Chessboard">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 688: Knight Probability in Chessboard in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-688-knight-probability-in-chessboard/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 688: Knight Probability in Chessboard">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 688: Knight Probability in Chessboard in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-08-30T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Dynamic Programming">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 688: Knight Probability in Chessboard</h1> 
            </div>
			<div class="article-post">
				<h2 id="hahahugoshortcode1255s0hbhb"><figure class="remote-image" style="text-align:center; margin: 0;">
    <div style="position: relative; width:900px; max-width:100%; padding-bottom:56.25%; overflow: hidden; border-radius:0px;">
      <img src="https://raw.githubusercontent.com/grid47/list-images/refs/heads/main/list/688.webp" 
           alt="A chessboard where the knightâ€™s possible moves are calculated, with the highest probability glowing softly." 
           style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
    </div>
    
      <figcaption style="font-size: 0.8em; font-weight: 300; color:#555; margin-top: 4px; line-height: 1.2;">
        Solution to LeetCode 688: Knight Probability in Chessboard Problem
      </figcaption>
    
  </figure>
  </h2>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1255s1hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">double</span><span style="color:#666">&gt;&gt;&gt;</span> memo;
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">double</span> <span style="color:#00a000">knightProbability</span>(<span style="color:#0b0;font-weight:bold">int</span> n, <span style="color:#0b0;font-weight:bold">int</span> k, <span style="color:#0b0;font-weight:bold">int</span> row, <span style="color:#0b0;font-weight:bold">int</span> col) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">-&gt;</span>n <span style="color:#666">=</span> n;
</span></span><span style="display:flex;"><span>        memo.resize(k <span style="color:#666">+</span> <span style="color:#666">1</span>, vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">double</span><span style="color:#666">&gt;&gt;</span>(n, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">double</span><span style="color:#666">&gt;</span>(n, <span style="color:#666">0</span>)));
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> dfs(k, row, col);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">double</span> <span style="color:#00a000">dfs</span>(<span style="color:#0b0;font-weight:bold">int</span> k, <span style="color:#0b0;font-weight:bold">int</span> i, <span style="color:#0b0;font-weight:bold">int</span> j) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">&lt;</span> <span style="color:#666">0</span> <span style="color:#666">||</span> j <span style="color:#666">&lt;</span> <span style="color:#666">0</span> <span style="color:#666">||</span> i <span style="color:#666">&gt;=</span> n <span style="color:#666">||</span> j <span style="color:#666">&gt;=</span> n) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(k <span style="color:#666">==</span> <span style="color:#666">0</span>) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(memo[k][i][j] <span style="color:#666">!=</span> <span style="color:#666">0</span> ) <span style="color:#a2f;font-weight:bold">return</span> memo[k][i][j];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">double</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        res <span style="color:#666">+=</span> <span style="color:#666">0.125</span> <span style="color:#666">*</span> dfs(k <span style="color:#666">-</span> <span style="color:#666">1</span>, i <span style="color:#666">+</span> <span style="color:#666">1</span>, j <span style="color:#666">-</span> <span style="color:#666">2</span>);
</span></span><span style="display:flex;"><span>        res <span style="color:#666">+=</span> <span style="color:#666">0.125</span> <span style="color:#666">*</span> dfs(k <span style="color:#666">-</span> <span style="color:#666">1</span>, i <span style="color:#666">+</span> <span style="color:#666">1</span>, j <span style="color:#666">+</span> <span style="color:#666">2</span>);
</span></span><span style="display:flex;"><span>        res <span style="color:#666">+=</span> <span style="color:#666">0.125</span> <span style="color:#666">*</span> dfs(k <span style="color:#666">-</span> <span style="color:#666">1</span>, i <span style="color:#666">+</span> <span style="color:#666">2</span>, j <span style="color:#666">+</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>        res <span style="color:#666">+=</span> <span style="color:#666">0.125</span> <span style="color:#666">*</span> dfs(k <span style="color:#666">-</span> <span style="color:#666">1</span>, i <span style="color:#666">+</span> <span style="color:#666">2</span>, j <span style="color:#666">-</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>        res <span style="color:#666">+=</span> <span style="color:#666">0.125</span> <span style="color:#666">*</span> dfs(k <span style="color:#666">-</span> <span style="color:#666">1</span>, i <span style="color:#666">-</span> <span style="color:#666">1</span>, j <span style="color:#666">+</span> <span style="color:#666">2</span>);
</span></span><span style="display:flex;"><span>        res <span style="color:#666">+=</span> <span style="color:#666">0.125</span> <span style="color:#666">*</span> dfs(k <span style="color:#666">-</span> <span style="color:#666">1</span>, i <span style="color:#666">-</span> <span style="color:#666">1</span>, j <span style="color:#666">-</span> <span style="color:#666">2</span>);
</span></span><span style="display:flex;"><span>        res <span style="color:#666">+=</span> <span style="color:#666">0.125</span> <span style="color:#666">*</span> dfs(k <span style="color:#666">-</span> <span style="color:#666">1</span>, i <span style="color:#666">-</span> <span style="color:#666">2</span>, j <span style="color:#666">+</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>        res <span style="color:#666">+=</span> <span style="color:#666">0.125</span> <span style="color:#666">*</span> dfs(k <span style="color:#666">-</span> <span style="color:#666">1</span>, i <span style="color:#666">-</span> <span style="color:#666">2</span>, j <span style="color:#666">-</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> memo[k][i][j] <span style="color:#666">=</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement:</h3>
<p>In this problem, we are tasked with finding the probability that a knight, starting from a given position on an <code>n x n</code> chessboard, remains on the board after making exactly <code>k</code> moves. The knight follows the typical movement rules, which means it can move in an &ldquo;L&rdquo; shape: two squares in one direction and one square in a perpendicular direction.</p>
<p>The objective is to compute the probability that after <code>k</code> moves, the knight stays within the bounds of the board. The problem can be solved using a <strong>dynamic programming (DP)</strong> approach with <strong>memoization</strong> to efficiently calculate the probability of staying on the board after each move.</p>
<h3 id="approach">Approach:</h3>
<p>To solve this problem, we use a recursive approach with <strong>memoization</strong> to avoid redundant calculations. The recursion explores all possible moves the knight can make, and at each step, it calculates the probability of staying on the board.</p>
<ul>
<li><strong>Recursive DFS</strong>: We use Depth-First Search (DFS) to explore all possible knight moves recursively.</li>
<li><strong>Memoization</strong>: The results of previously computed states are cached to avoid redundant calculations, making the solution efficient.</li>
<li><strong>Knightâ€™s Movement</strong>: From each position, the knight can move to eight possible new positions. For each of these positions, we recursively calculate the probability that the knight stays on the board after the remaining moves.</li>
</ul>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step):</h3>
<h4 id="1-class-definition">1. <strong>Class Definition</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">double</span><span style="color:#666">&gt;&gt;&gt;</span> memo;
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">double</span> <span style="color:#00a000">knightProbability</span>(<span style="color:#0b0;font-weight:bold">int</span> n, <span style="color:#0b0;font-weight:bold">int</span> k, <span style="color:#0b0;font-weight:bold">int</span> row, <span style="color:#0b0;font-weight:bold">int</span> col) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">-&gt;</span>n <span style="color:#666">=</span> n;
</span></span><span style="display:flex;"><span>        memo.resize(k <span style="color:#666">+</span> <span style="color:#666">1</span>, vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">double</span><span style="color:#666">&gt;&gt;</span>(n, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">double</span><span style="color:#666">&gt;</span>(n, <span style="color:#666">0</span>)));
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> dfs(k, row, col);
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>The class <code>Solution</code> defines a method to calculate the probability. It first initializes the grid size <code>n</code> and the 3D vector <code>memo</code> that will store the results of subproblems.</p>
<ul>
<li><strong>Parameters</strong>:
<ul>
<li><code>n</code>: The size of the chessboard (an <code>n x n</code> grid).</li>
<li><code>k</code>: The number of moves the knight will make.</li>
<li><code>row</code> and <code>col</code>: The starting position of the knight on the chessboard.</li>
</ul>
</li>
</ul>
<p>The <code>memo</code> vector is a 3D matrix where:</p>
<ul>
<li>The first dimension represents the number of moves left (<code>k</code>).</li>
<li>The second and third dimensions represent the rows and columns of the board, respectively.</li>
</ul>
<h4 id="2-dfs-function">2. <strong>DFS Function</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">double</span> <span style="color:#00a000">dfs</span>(<span style="color:#0b0;font-weight:bold">int</span> k, <span style="color:#0b0;font-weight:bold">int</span> i, <span style="color:#0b0;font-weight:bold">int</span> j) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span> (i <span style="color:#666">&lt;</span> <span style="color:#666">0</span> <span style="color:#666">||</span> j <span style="color:#666">&lt;</span> <span style="color:#666">0</span> <span style="color:#666">||</span> i <span style="color:#666">&gt;=</span> n <span style="color:#666">||</span> j <span style="color:#666">&gt;=</span> n) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">0</span>;  <span style="color:#080;font-style:italic">// If out of bounds, return probability 0.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">if</span> (k <span style="color:#666">==</span> <span style="color:#666">0</span>) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">1</span>;  <span style="color:#080;font-style:italic">// If no moves left, return probability 1 (we are on the board).
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">if</span> (memo[k][i][j] <span style="color:#666">!=</span> <span style="color:#666">0</span>) <span style="color:#a2f;font-weight:bold">return</span> memo[k][i][j];  <span style="color:#080;font-style:italic">// Return cached result if available.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">double</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span></code></pre></div><ul>
<li>The <code>dfs</code> function is the recursive function that explores the knight&rsquo;s movements.</li>
<li><strong>Base Cases</strong>:
<ul>
<li>If the knight is out of bounds (<code>i &lt; 0 || j &lt; 0 || i &gt;= n || j &gt;= n</code>), it returns <code>0</code> because the knight has left the board.</li>
<li>If there are no moves left (<code>k == 0</code>), it returns <code>1</code>, meaning the knight is still on the board.</li>
<li>If the result has already been computed for the current state (<code>memo[k][i][j] != 0</code>), the cached value is returned to save computation time.</li>
</ul>
</li>
</ul>
<h4 id="3-knights-movement-and-recursive-calls">3. <strong>Knightâ€™s Movement and Recursive Calls</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">// Recursive calls for all 8 possible knight moves.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        res <span style="color:#666">+=</span> <span style="color:#666">0.125</span> <span style="color:#666">*</span> dfs(k <span style="color:#666">-</span> <span style="color:#666">1</span>, i <span style="color:#666">+</span> <span style="color:#666">1</span>, j <span style="color:#666">-</span> <span style="color:#666">2</span>);  <span style="color:#080;font-style:italic">// Move 1
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        res <span style="color:#666">+=</span> <span style="color:#666">0.125</span> <span style="color:#666">*</span> dfs(k <span style="color:#666">-</span> <span style="color:#666">1</span>, i <span style="color:#666">+</span> <span style="color:#666">1</span>, j <span style="color:#666">+</span> <span style="color:#666">2</span>);  <span style="color:#080;font-style:italic">// Move 2
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        res <span style="color:#666">+=</span> <span style="color:#666">0.125</span> <span style="color:#666">*</span> dfs(k <span style="color:#666">-</span> <span style="color:#666">1</span>, i <span style="color:#666">+</span> <span style="color:#666">2</span>, j <span style="color:#666">+</span> <span style="color:#666">1</span>);  <span style="color:#080;font-style:italic">// Move 3
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        res <span style="color:#666">+=</span> <span style="color:#666">0.125</span> <span style="color:#666">*</span> dfs(k <span style="color:#666">-</span> <span style="color:#666">1</span>, i <span style="color:#666">+</span> <span style="color:#666">2</span>, j <span style="color:#666">-</span> <span style="color:#666">1</span>);  <span style="color:#080;font-style:italic">// Move 4
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        res <span style="color:#666">+=</span> <span style="color:#666">0.125</span> <span style="color:#666">*</span> dfs(k <span style="color:#666">-</span> <span style="color:#666">1</span>, i <span style="color:#666">-</span> <span style="color:#666">1</span>, j <span style="color:#666">+</span> <span style="color:#666">2</span>);  <span style="color:#080;font-style:italic">// Move 5
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        res <span style="color:#666">+=</span> <span style="color:#666">0.125</span> <span style="color:#666">*</span> dfs(k <span style="color:#666">-</span> <span style="color:#666">1</span>, i <span style="color:#666">-</span> <span style="color:#666">1</span>, j <span style="color:#666">-</span> <span style="color:#666">2</span>);  <span style="color:#080;font-style:italic">// Move 6
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        res <span style="color:#666">+=</span> <span style="color:#666">0.125</span> <span style="color:#666">*</span> dfs(k <span style="color:#666">-</span> <span style="color:#666">1</span>, i <span style="color:#666">-</span> <span style="color:#666">2</span>, j <span style="color:#666">+</span> <span style="color:#666">1</span>);  <span style="color:#080;font-style:italic">// Move 7
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        res <span style="color:#666">+=</span> <span style="color:#666">0.125</span> <span style="color:#666">*</span> dfs(k <span style="color:#666">-</span> <span style="color:#666">1</span>, i <span style="color:#666">-</span> <span style="color:#666">2</span>, j <span style="color:#666">-</span> <span style="color:#666">1</span>);  <span style="color:#080;font-style:italic">// Move 8
</span></span></span></code></pre></div><ul>
<li>The knight has 8 possible moves from any position, and the probability of each move is <code>1/8</code> (since the knight is equally likely to move to any of the 8 positions).</li>
<li>The <code>dfs(k - 1, i + dx, j + dy)</code> represents a recursive call for each possible move, where <code>dx</code> and <code>dy</code> are the changes in the row and column for each of the knight&rsquo;s moves.</li>
</ul>
<h4 id="4-memoization">4. <strong>Memoization</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> memo[k][i][j] <span style="color:#666">=</span> res;  <span style="color:#080;font-style:italic">// Store the result in memoization table and return it.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ul>
<li>After calculating the probability for all 8 possible moves, the result is stored in the <code>memo</code> table for the current state (<code>k</code> moves left, position <code>(i, j)</code>).</li>
<li>The function then returns the computed probability.</li>
</ul>
<h4 id="5-main-function-knightprobability">5. <strong>Main Function (<code>knightProbability</code>)</strong>:</h4>
<p>The main function is the entry point for calculating the knight&rsquo;s probability. It initializes the <code>memo</code> table and starts the recursive process by calling <code>dfs(k, row, col)</code>.</p>
<h3 id="complexity">Complexity:</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<p>The time complexity of this approach is <strong>O(k * n * n)</strong>, where:</p>
<ul>
<li><code>k</code> is the number of moves the knight has to make.</li>
<li><code>n * n</code> represents the size of the chessboard (since we may need to compute the result for every position on the board).</li>
</ul>
<p>For each of the <code>k</code> moves, we explore 8 possible positions (8 recursive calls), and each of these recursive calls may potentially visit each cell on the board. Memoization ensures that each state is calculated only once, saving time in redundant calls.</p>
<h4 id="space-complexity">Space Complexity:</h4>
<p>The space complexity is <strong>O(k * n * n)</strong> due to the 3D <code>memo</code> table. The depth of the recursion can be at most <code>k</code>, and at each recursive step, the board state <code>(i, j)</code> is stored for each move count <code>k</code>. Therefore, the overall space used is proportional to <code>k * n * n</code>.</p>
<h3 id="conclusion">Conclusion:</h3>
<p>This solution efficiently calculates the probability that a knight stays on the board after <code>k</code> moves using a dynamic programming approach with memoization. By leveraging the recursive DFS traversal of all possible moves and storing intermediate results, the algorithm avoids redundant computations, making it efficient even for large values of <code>n</code> and <code>k</code>. The use of memoization ensures that the time complexity is kept manageable, while the space complexity is proportional to the number of states that need to be stored.</p>
<p><a href="https://leetcode.com/problems/knight-probability-in-chessboard/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/hNovJsUbNjo?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
