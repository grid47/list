<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 1498: Number of Subsequences That Satisfy the Given Sum Condition | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1498: Number of Subsequences That Satisfy the Given Sum Condition">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1498: Number of Subsequences That Satisfy the Given Sum Condition in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-1498-number-of-subsequences-that-satisfy-the-given-sum-condition/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1498: Number of Subsequences That Satisfy the Given Sum Condition">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1498: Number of Subsequences That Satisfy the Given Sum Condition in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-06-10T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Two Pointers">
    <meta property="article:tag" content="Binary Search">
    <meta property="article:tag" content="Sorting">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 1498: Number of Subsequences That Satisfy the Given Sum Condition</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode246s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> mod <span style="color:#666">=</span> (<span style="color:#0b0;font-weight:bold">int</span>) <span style="color:#666">1e9</span> <span style="color:#666">+</span> <span style="color:#666">7</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">pow2</span>(<span style="color:#0b0;font-weight:bold">int</span> idx) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(idx <span style="color:#666">==</span> <span style="color:#666">0</span>) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">long</span> res;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(idx <span style="color:#666">%</span> <span style="color:#666">2</span>) {
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> pow2(idx <span style="color:#666">/</span> <span style="color:#666">2</span>);
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> (res <span style="color:#666">*</span> res <span style="color:#666">*</span> <span style="color:#666">2</span>) <span style="color:#666">%</span> mod;
</span></span><span style="display:flex;"><span>        }<span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> pow2(idx <span style="color:#666">/</span> <span style="color:#666">2</span>);
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> (res <span style="color:#666">*</span> res) <span style="color:#666">%</span> mod;            
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">numSubseq</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> nums, <span style="color:#0b0;font-weight:bold">int</span> target) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        sort(nums.begin(), nums.end());
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">long</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>, n <span style="color:#666">=</span> nums.size();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(nums[i] <span style="color:#666">*</span> <span style="color:#666">2</span> <span style="color:#666">&gt;</span> target) <span style="color:#a2f;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">int</span> end <span style="color:#666">=</span> target <span style="color:#666">-</span> nums[i];
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">auto</span> it <span style="color:#666">=</span> upper_bound(nums.begin(), nums.end(), end);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">int</span> idx <span style="color:#666">=</span> it <span style="color:#666">-</span> nums.begin();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> (res <span style="color:#666">+</span> pow2(idx <span style="color:#666">-</span> i <span style="color:#666">-</span> <span style="color:#666">1</span>)) <span style="color:#666">%</span> mod;
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem requires us to find the number of non-empty subsequences of a given array <code>nums</code> such that the sum of the minimum and maximum elements in each subsequence is less than or equal to a specified value <code>target</code>. Given the potential size of the input and the constraints, we need an efficient approach to count these subsequences.</p>
<h3 id="approach">Approach</h3>
<p>To solve this problem efficiently, we can leverage sorting and binary search, along with properties of subsequences. Hereâ€™s a high-level breakdown of our approach:</p>
<ol>
<li><strong>Sorting</strong>: First, we sort the input array. Sorting allows us to easily identify the minimum and maximum elements of any subsequence.</li>
<li><strong>Two-Pointer Technique</strong>: By iterating over each element of the sorted array as a potential minimum, we can use binary search to find the maximum valid element that, when combined with the current minimum, satisfies the target condition.</li>
<li><strong>Counting Subsequences</strong>: For each valid pair of minimum and maximum, we can compute the number of valid subsequences that can be formed by combining elements between these two indices using the formula (2^{(index_{max} - index_{min} - 1)}). This is derived from the fact that each element can either be included or excluded in the subsequence.</li>
<li><strong>Modular Arithmetic</strong>: Since the result can be large, we perform calculations modulo (10^9 + 7).</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> mod <span style="color:#666">=</span> (<span style="color:#0b0;font-weight:bold">int</span>) <span style="color:#666">1e9</span> <span style="color:#666">+</span> <span style="color:#666">7</span>;
</span></span></code></pre></div><p>Here, we define a class <code>Solution</code> with a member variable <code>mod</code>, which is the modulus used for calculations to prevent overflow.</p>
<h4 id="step-1-power-of-2-function">Step 1: Power of 2 Function</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">pow2</span>(<span style="color:#0b0;font-weight:bold">int</span> idx) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(idx <span style="color:#666">==</span> <span style="color:#666">0</span>) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">long</span> res;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(idx <span style="color:#666">%</span> <span style="color:#666">2</span>) {
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> pow2(idx <span style="color:#666">/</span> <span style="color:#666">2</span>);
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> (res <span style="color:#666">*</span> res <span style="color:#666">*</span> <span style="color:#666">2</span>) <span style="color:#666">%</span> mod;
</span></span><span style="display:flex;"><span>        } <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> pow2(idx <span style="color:#666">/</span> <span style="color:#666">2</span>);
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> (res <span style="color:#666">*</span> res) <span style="color:#666">%</span> mod;            
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>This recursive function computes (2^{idx} \mod \text{mod}):</p>
<ul>
<li>If ( idx ) is 0, we return 1 (the base case).</li>
<li>If ( idx ) is odd, we compute the power for half the index, square it, and multiply by 2.</li>
<li>If ( idx ) is even, we just square the power computed for half the index.</li>
</ul>
<p>This function allows us to efficiently calculate powers of 2 using recursion and modular arithmetic.</p>
<h4 id="step-2-main-function-to-count-subsequences">Step 2: Main Function to Count Subsequences</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">numSubseq</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> nums, <span style="color:#0b0;font-weight:bold">int</span> target) {
</span></span><span style="display:flex;"><span>        sort(nums.begin(), nums.end());
</span></span></code></pre></div><p>We define the main function <code>numSubseq</code>, which first sorts the input array <code>nums</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">long</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>, n <span style="color:#666">=</span> nums.size();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(nums[i] <span style="color:#666">*</span> <span style="color:#666">2</span> <span style="color:#666">&gt;</span> target) <span style="color:#a2f;font-weight:bold">break</span>;
</span></span></code></pre></div><ul>
<li>We initialize <code>res</code> to accumulate the count of valid subsequences.</li>
<li>If the current minimum element multiplied by 2 exceeds the target, we break out of the loop as no valid maximum can be found.</li>
</ul>
<h4 id="step-3-finding-valid-maximum-elements">Step 3: Finding Valid Maximum Elements</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">int</span> end <span style="color:#666">=</span> target <span style="color:#666">-</span> nums[i];
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">auto</span> it <span style="color:#666">=</span> upper_bound(nums.begin(), nums.end(), end);
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">int</span> idx <span style="color:#666">=</span> it <span style="color:#666">-</span> nums.begin();
</span></span></code></pre></div><ul>
<li>We compute <code>end</code>, which is the maximum valid value that can be paired with the current minimum <code>nums[i]</code>.</li>
<li>Using <code>upper_bound</code>, we find the first index in <code>nums</code> that exceeds <code>end</code>. This allows us to count how many elements can be paired with the current minimum.</li>
</ul>
<h4 id="step-4-counting-subsequences">Step 4: Counting Subsequences</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>            res <span style="color:#666">=</span> (res <span style="color:#666">+</span> pow2(idx <span style="color:#666">-</span> i <span style="color:#666">-</span> <span style="color:#666">1</span>)) <span style="color:#666">%</span> mod;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ul>
<li>For each valid pair of indices, we compute the number of subsequences formed by the elements between the indices (i.e., <code>idx - i - 1</code>), and add this to <code>res</code>, taking care to apply the modulus to keep the number manageable.</li>
<li>Finally, we return the result <code>res</code>.</li>
</ul>
<h3 id="complexity">Complexity</h3>
<h4 id="time-complexity">Time Complexity</h4>
<ul>
<li>Sorting the array takes (O(n \log n)).</li>
<li>The loop iterates through the array once, and for each element, we perform a binary search, leading to a complexity of (O(n \log n)).</li>
<li>Thus, the overall time complexity is (O(n \log n)).</li>
</ul>
<h4 id="space-complexity">Space Complexity</h4>
<ul>
<li>The space complexity is (O(1)) if we consider only variables used in calculations. However, the input array may be considered to use additional space for sorting.</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>The solution effectively counts the valid subsequences where the sum of the minimum and maximum elements does not exceed the target value. By combining sorting with binary search and leveraging modular arithmetic for efficiency, we ensure that the approach is both optimal and scalable for larger inputs.</p>
<p><strong>Key Points</strong>:</p>
<ul>
<li><strong>Efficiency</strong>: The combination of sorting and binary search enables an efficient solution.</li>
<li><strong>Modular Arithmetic</strong>: Ensures results remain within manageable bounds.</li>
<li><strong>Power of Two Calculation</strong>: The recursive approach for calculating powers is elegant and efficient.</li>
</ul>
<p>Overall, this approach provides a robust framework for solving similar combinatorial problems involving subsequences and conditions based on their values.</p>
<p><a href="https://leetcode.com/problems/number-of-subsequences-that-satisfy-the-given-sum-condition/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/WZhNEfbGYEo?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
