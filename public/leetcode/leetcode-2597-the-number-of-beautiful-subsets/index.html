<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 2597: The Number of Beautiful Subsets | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 2597: The Number of Beautiful Subsets">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 2597: The Number of Beautiful Subsets in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-2597-the-number-of-beautiful-subsets/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 2597: The Number of Beautiful Subsets">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 2597: The Number of Beautiful Subsets in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-02-21T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Hash Table">
    <meta property="article:tag" content="Math">
    <meta property="article:tag" content="Dynamic Programming">
    <meta property="article:tag" content="Backtracking">
    <meta property="article:tag" content="Sorting">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 2597: The Number of Beautiful Subsets</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode864s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> cnt, nums;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">dp</span>(<span style="color:#0b0;font-weight:bold">int</span> idx, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(idx <span style="color:#666">==</span> nums.size()) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> ans <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(nums[idx] <span style="color:#666">-</span> k <span style="color:#666">&gt;=</span> <span style="color:#666">0</span> <span style="color:#666">&amp;&amp;</span> (cnt[nums[idx] <span style="color:#666">-</span> k] <span style="color:#666">&gt;</span> <span style="color:#666">0</span>)) {
</span></span><span style="display:flex;"><span>            ans <span style="color:#666">+=</span> dp(idx <span style="color:#666">+</span> <span style="color:#666">1</span>, k);
</span></span><span style="display:flex;"><span>        } <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            ans <span style="color:#666">+=</span> dp(idx <span style="color:#666">+</span> <span style="color:#666">1</span>, k);
</span></span><span style="display:flex;"><span>            cnt[nums[idx]]<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>            ans <span style="color:#666">+=</span> dp(idx <span style="color:#666">+</span> <span style="color:#666">1</span>, k);
</span></span><span style="display:flex;"><span>            cnt[nums[idx]]<span style="color:#666">--</span>;            
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> ans;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">beautifulSubsets</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> nums, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>        sort(nums.begin(), nums.end());
</span></span><span style="display:flex;"><span>        cnt.resize(<span style="color:#666">1001</span>, <span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">-&gt;</span>nums <span style="color:#666">=</span> nums;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> dp(<span style="color:#666">0</span>, k) <span style="color:#666">-</span> <span style="color:#666">1</span>; <span style="color:#080;font-style:italic">// exluding none selected
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>Given an array <code>nums</code> and a positive integer <code>k</code>, the goal is to find the number of &ldquo;beautiful subsets&rdquo; of <code>nums</code>. A subset is defined as beautiful if for every two elements <code>a</code> and <code>b</code> in the subset, the difference <code>|a - b|</code> is greater than or equal to <code>k</code>.</p>
<h3 id="approach">Approach</h3>
<p>The problem boils down to counting subsets that satisfy the condition that the absolute difference between any two elements in the subset is at least <code>k</code>. A direct approach of checking all possible subsets is inefficient, especially as the size of the input array grows. Therefore, a more efficient strategy using <strong>dynamic programming (DP)</strong> and <strong>backtracking</strong> is employed to efficiently explore all possible subsets.</p>
<ol>
<li>
<p><strong>Sorting the Array</strong>:</p>
<ul>
<li>We begin by sorting the array <code>nums</code>. Sorting ensures that as we explore subsets, we can efficiently check the condition for each number in relation to the previous ones. By sorting, we can use a recursive approach to explore subsets, ensuring that no duplicates are created.</li>
</ul>
</li>
<li>
<p><strong>Dynamic Programming with Backtracking</strong>:</p>
<ul>
<li>A recursive function (<code>dp</code>) is defined to explore all subsets starting from index <code>0</code> and consider whether to include each element in the current subset.</li>
<li>For each element, we decide whether to include it in the subset or not. When including an element, we check if it satisfies the condition <code>|nums[i] - nums[j]| &gt;= k</code> for all previously included elements. If the condition holds, we continue the exploration.</li>
</ul>
</li>
<li>
<p><strong>Memoization with Count Array</strong>:</p>
<ul>
<li>To avoid recomputing solutions for overlapping subproblems, a memoization technique is employed using a count array (<code>cnt</code>) that tracks the number of times a number has been included in the subset. This helps to maintain subsets that meet the required condition without recalculating them repeatedly.</li>
<li>The count array (<code>cnt</code>) ensures that we track the number of times a number appears in the subset and ensure that the difference condition <code>|a - b| &gt;= k</code> holds by checking whether <code>cnt[nums[i] - k]</code> is greater than zero.</li>
</ul>
</li>
<li>
<p><strong>Base Case</strong>:</p>
<ul>
<li>The base case occurs when the recursive function reaches the end of the array. At this point, we return 1, indicating that a valid subset has been found. We also need to subtract 1 at the end to exclude the empty subset, which is counted as a valid subset by default.</li>
</ul>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<h4 id="1-initialization">1. <strong>Initialization</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> cnt, nums;
</span></span></code></pre></div><ul>
<li>We define two vectors: <code>cnt</code> (a count array to track the occurrences of numbers) and <code>nums</code> (to store the input array).</li>
</ul>
<h4 id="2-the-recursive-dp-function">2. <strong>The Recursive DP Function</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">dp</span>(<span style="color:#0b0;font-weight:bold">int</span> idx, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(idx <span style="color:#666">==</span> nums.size()) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> ans <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span></code></pre></div><ul>
<li>The <code>dp</code> function takes two parameters: <code>idx</code>, the current index in the <code>nums</code> array, and <code>k</code>, the required difference between elements in the subset.</li>
<li>The base case occurs when <code>idx</code> reaches the size of <code>nums</code>, indicating that we’ve considered all elements. At this point, we return 1, representing a valid subset.</li>
</ul>
<h4 id="3-exploring-the-current-element">3. <strong>Exploring the Current Element</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">if</span>(nums[idx] <span style="color:#666">-</span> k <span style="color:#666">&gt;=</span> <span style="color:#666">0</span> <span style="color:#666">&amp;&amp;</span> (cnt[nums[idx] <span style="color:#666">-</span> k] <span style="color:#666">&gt;</span> <span style="color:#666">0</span>)) {
</span></span><span style="display:flex;"><span>    ans <span style="color:#666">+=</span> dp(idx <span style="color:#666">+</span> <span style="color:#666">1</span>, k);
</span></span><span style="display:flex;"><span>} <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>    ans <span style="color:#666">+=</span> dp(idx <span style="color:#666">+</span> <span style="color:#666">1</span>, k);
</span></span><span style="display:flex;"><span>    cnt[nums[idx]]<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>    ans <span style="color:#666">+=</span> dp(idx <span style="color:#666">+</span> <span style="color:#666">1</span>, k);
</span></span><span style="display:flex;"><span>    cnt[nums[idx]]<span style="color:#666">--</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>If the current element <code>nums[idx]</code> can form a valid subset (i.e., <code>nums[idx] - k &gt;= 0</code> and <code>cnt[nums[idx] - k] &gt; 0</code>), we continue exploring the next index with <code>dp(idx + 1, k)</code>, without including the current element in the subset.</li>
<li>If the element cannot form a valid subset (either because it would violate the difference condition or we haven’t yet included the appropriate element), we consider two possibilities:
<ol>
<li>Skip the current element and proceed to the next index.</li>
<li>Include the current element in the subset, incrementing its count in <code>cnt</code>, and then proceed to the next index. After the recursive call, we decrement the count to backtrack and explore the next possibilities.</li>
</ol>
</li>
</ul>
<h4 id="4-return-the-result">4. <strong>Return the Result</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> ans;
</span></span></code></pre></div><ul>
<li>Finally, the function returns the count of valid subsets that include or exclude the current element at <code>idx</code>.</li>
</ul>
<h4 id="5-main-function">5. <strong>Main Function</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">beautifulSubsets</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> nums, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>    sort(nums.begin(), nums.end());
</span></span><span style="display:flex;"><span>    cnt.resize(<span style="color:#666">1001</span>, <span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">-&gt;</span>nums <span style="color:#666">=</span> nums;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> dp(<span style="color:#666">0</span>, k) <span style="color:#666">-</span> <span style="color:#666">1</span>; <span style="color:#080;font-style:italic">// excluding none selected
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>}
</span></span></code></pre></div><ul>
<li>We begin by sorting the input array <code>nums</code>. Sorting simplifies the process of checking the difference condition between elements.</li>
<li>The count array <code>cnt</code> is initialized with 1001 elements (to handle all possible values of <code>nums</code>), and we set the size of <code>nums</code> to the class-level <code>nums</code> vector.</li>
<li>We call the recursive <code>dp</code> function starting from index <code>0</code> with the difference <code>k</code>. Since the <code>dp</code> function counts the empty subset as valid, we subtract <code>1</code> to exclude it from the final result.</li>
</ul>
<h3 id="complexity-analysis">Complexity Analysis</h3>
<ul>
<li>
<p><strong>Time Complexity</strong>:
The recursive function explores each element in the array, and for each element, we make two recursive calls (one for including the element and one for excluding it). In the worst case, this leads to an exponential time complexity of (O(2^n)), where <code>n</code> is the size of the array. However, the use of the count array (<code>cnt</code>) helps to memoize overlapping subproblems, reducing the redundant work. While the exact complexity depends on the specific values of <code>nums</code> and <code>k</code>, it remains exponential in nature due to the large number of possible subsets.</p>
</li>
<li>
<p><strong>Space Complexity</strong>:
The space complexity is (O(n)) for the recursive call stack and (O(1001)) for the count array <code>cnt</code> (since the possible values of <code>nums</code> are limited to 1001 distinct numbers). Thus, the overall space complexity is (O(n + 1001)), which simplifies to (O(n)) if we ignore the constant factor.</p>
</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>This solution efficiently explores all subsets of the array <code>nums</code> that satisfy the condition that the absolute difference between any two elements in the subset is at least <code>k</code>. Using dynamic programming and backtracking, the function effectively counts the number of valid subsets. The recursive approach, along with memoization using the count array <code>cnt</code>, ensures that we avoid redundant calculations, although the time complexity remains exponential. This approach is optimal for small to moderate-sized inputs but may face performance issues for very large arrays due to the inherent exponential complexity. Nonetheless, the method is effective for typical use cases in competitive programming and other algorithmic challenges.</p>
<p><a href="https://leetcode.com/problems/the-number-of-beautiful-subsets/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/Dle_SpjHTio?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
