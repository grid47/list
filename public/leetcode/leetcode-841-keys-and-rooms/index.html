<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 841: Keys and Rooms | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 841: Keys and Rooms">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 841: Keys and Rooms in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-841-keys-and-rooms/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 841: Keys and Rooms">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 841: Keys and Rooms in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-08-14T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Depth-First Search">
    <meta property="article:tag" content="Breadth-First Search">
    <meta property="article:tag" content="Graph">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 841: Keys and Rooms</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1341s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">bool</span> canVisitAllRooms(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> rooms) {
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">bool</span><span style="color:#666">&gt;</span> vis(rooms.size(), <span style="color:#a2f">false</span>);
</span></span><span style="display:flex;"><span>        vis[<span style="color:#666">0</span>] <span style="color:#666">=</span> <span style="color:#a2f">true</span>;
</span></span><span style="display:flex;"><span>        dfs(rooms, vis, <span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#a2f;font-weight:bold">auto</span> <span style="color:#a0a000">x</span>: vis)
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(<span style="color:#666">!</span>x) <span style="color:#a2f;font-weight:bold">return</span> x;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">dfs</span>(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> rooms, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">bool</span><span style="color:#666">&gt;</span> <span style="color:#666">&amp;</span>vis, <span style="color:#0b0;font-weight:bold">int</span> cur) {
</span></span><span style="display:flex;"><span>        vis[cur] <span style="color:#666">=</span> <span style="color:#a2f">true</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#a2f;font-weight:bold">auto</span> <span style="color:#a0a000">x</span>: rooms[cur]) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(<span style="color:#666">!</span>vis[x])
</span></span><span style="display:flex;"><span>                dfs(rooms, vis, x);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem asks whether it is possible to visit all rooms starting from room 0 in a house represented by a 2D array, where each room contains a list of keys to other rooms. Specifically, the problem involves determining whether starting from room 0, we can use the keys in each room to unlock all other rooms. Each key in a room allows you to open a specific other room, and once opened, you can access the keys from that room and continue your exploration.</p>
<p>The task is to return <code>true</code> if it is possible to visit all rooms starting from room 0, and <code>false</code> otherwise.</p>
<h3 id="approach">Approach</h3>
<p>To solve this problem, we can treat the house as a graph, where each room is a node, and the keys represent edges between the rooms. The goal is to check if, starting from room 0, we can reach all other rooms. This problem can be solved using graph traversal techniques, specifically Depth-First Search (DFS), since it allows us to explore all reachable nodes from a starting node.</p>
<p>Here’s how we approach the solution:</p>
<ol>
<li>
<p><strong>Graph Representation</strong>:</p>
<ul>
<li>The rooms are represented as a 2D vector where each index corresponds to a room, and each entry in a room is a list of keys (room indices) that the room provides.</li>
<li>We start at room 0 and aim to explore all rooms by visiting each room’s keys.</li>
</ul>
</li>
<li>
<p><strong>Tracking Visited Rooms</strong>:</p>
<ul>
<li>To track the rooms we’ve already visited, we use a <code>visited</code> vector initialized to <code>false</code> for all rooms. When we visit a room, we mark it as <code>true</code> in the <code>visited</code> array.</li>
<li>The traversal is initiated from room 0, and we explore all connected rooms by visiting each room’s keys.</li>
</ul>
</li>
<li>
<p><strong>Depth-First Search (DFS)</strong>:</p>
<ul>
<li>The DFS algorithm is ideal for this problem because it explores as far as possible along each branch before backtracking. Starting from room 0, we recursively visit all rooms that can be unlocked by the keys in each room.</li>
<li>If, at the end of the traversal, all rooms are marked as visited, then all rooms are reachable, and we return <code>true</code>. If any room is not visited, we return <code>false</code>.</li>
</ul>
</li>
<li>
<p><strong>Termination</strong>:</p>
<ul>
<li>After performing DFS, we simply check if all rooms are visited. If any room is unvisited, it means that room is inaccessible from room 0, and the answer should be <code>false</code>.</li>
</ul>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<p>Let’s break down the code into its main components:</p>
<ol>
<li>
<p><strong>Function Signature</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">bool</span> canVisitAllRooms(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> rooms)
</span></span></code></pre></div><p>This function takes a 2D vector <code>rooms</code>, where each subvector represents the list of keys available in each room. It returns <code>true</code> if all rooms are accessible from room 0, and <code>false</code> otherwise.</p>
</li>
<li>
<p><strong>Initialize Visited Vector</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">bool</span><span style="color:#666">&gt;</span> vis(rooms.size(), <span style="color:#a2f">false</span>);
</span></span><span style="display:flex;"><span>vis[<span style="color:#666">0</span>] <span style="color:#666">=</span> <span style="color:#a2f">true</span>;
</span></span></code></pre></div><ul>
<li><code>vis</code> is a boolean vector of size equal to the number of rooms. It tracks whether each room has been visited during DFS.</li>
<li>We initialize all rooms as not visited (<code>false</code>), and we set room 0 as visited (<code>true</code>) because we start from there.</li>
</ul>
</li>
<li>
<p><strong>Perform Depth-First Search (DFS)</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>dfs(rooms, vis, <span style="color:#666">0</span>);
</span></span></code></pre></div><ul>
<li>We call the DFS function to start the exploration from room 0. This will visit all reachable rooms from room 0.</li>
</ul>
</li>
<li>
<p><strong>DFS Function</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">dfs</span>(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> rooms, vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">bool</span><span style="color:#666">&gt;&amp;</span> vis, <span style="color:#0b0;font-weight:bold">int</span> cur) {
</span></span><span style="display:flex;"><span>    vis[cur] <span style="color:#666">=</span> <span style="color:#a2f">true</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#a2f;font-weight:bold">auto</span> <span style="color:#a0a000">x</span> : rooms[cur]) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span> (<span style="color:#666">!</span>vis[x]) {
</span></span><span style="display:flex;"><span>            dfs(rooms, vis, x);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>The DFS function takes the <code>rooms</code> array, the <code>visited</code> vector <code>vis</code>, and the current room index <code>cur</code> as arguments.</li>
<li>We first mark the current room as visited (<code>vis[cur] = true</code>).</li>
<li>Then, for each key in the current room (<code>rooms[cur]</code>), we recursively call DFS for any room that has not been visited yet (<code>if (!vis[x])</code>).</li>
</ul>
</li>
<li>
<p><strong>Check if All Rooms are Visited</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#a2f;font-weight:bold">auto</span> <span style="color:#a0a000">x</span> : vis)
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span> (<span style="color:#666">!</span>x) <span style="color:#a2f;font-weight:bold">return</span> x;
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">true</span>;
</span></span></code></pre></div><ul>
<li>After the DFS traversal, we check if all rooms have been visited. If any room is unvisited (<code>!x</code>), we return <code>false</code>. If all rooms have been visited, we return <code>true</code>.</li>
</ul>
</li>
<li>
<p><strong>Return Result</strong>:</p>
<ul>
<li>Finally, we return <code>true</code> if all rooms are visited, meaning all rooms can be accessed starting from room 0.</li>
</ul>
</li>
</ol>
<h3 id="complexity">Complexity</h3>
<ol>
<li>
<p><strong>Time Complexity</strong>:</p>
<ul>
<li>The time complexity of this solution is <strong>O(R + K)</strong>, where <code>R</code> is the number of rooms, and <code>K</code> is the total number of keys (i.e., the total number of elements in all the rooms&rsquo; key lists). This is because, in the worst case, we visit each room once and each key once while performing DFS. Therefore, the time complexity is linear in terms of the number of rooms and keys in total.</li>
</ul>
</li>
<li>
<p><strong>Space Complexity</strong>:</p>
<ul>
<li>The space complexity is <strong>O(R + K)</strong> as well because we store the <code>visited</code> vector of size <code>R</code> and the recursive call stack for DFS, which can be at most <code>R</code> deep. Additionally, the space required to store the keys in each room contributes to the total space complexity.</li>
</ul>
</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>In conclusion, this solution efficiently checks whether all rooms can be visited starting from room 0 using Depth-First Search (DFS). By marking rooms as visited and recursively exploring each room’s keys, we ensure that we only visit each room once. The time and space complexities of the solution are both linear in terms of the number of rooms and keys, making this approach efficient for solving the problem even for large grids. This method leverages standard graph traversal techniques and is well-suited for problems involving connectivity in graphs or grids.</p>
<p><a href="https://leetcode.com/problems/keys-and-rooms/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/i89fYz8JX7U?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
