<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 1488: Avoid Flood in The City | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1488: Avoid Flood in The City">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1488: Avoid Flood in The City in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-1488-avoid-flood-in-the-city/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1488: Avoid Flood in The City">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1488: Avoid Flood in The City in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-06-11T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Hash Table">
    <meta property="article:tag" content="Binary Search">
    <meta property="article:tag" content="Greedy">
    <meta property="article:tag" content="Heap (Priority Queue)">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 1488: Avoid Flood in The City</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode240s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> avoidFlood(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> rains) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        set<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> dry;
</span></span><span style="display:flex;"><span>        unordered_map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> mp;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> rains.size();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> ans;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(rains[i] <span style="color:#666">==</span> <span style="color:#666">0</span>) {
</span></span><span style="display:flex;"><span>                dry.insert(i);
</span></span><span style="display:flex;"><span>                ans.push_back(<span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>            } <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#0b0;font-weight:bold">int</span> lake <span style="color:#666">=</span> rains[i];
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">if</span>(mp.count(lake)) {
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    <span style="color:#a2f;font-weight:bold">auto</span> it <span style="color:#666">=</span> dry.lower_bound(mp[lake]);
</span></span><span style="display:flex;"><span>                    <span style="color:#a2f;font-weight:bold">if</span>(it <span style="color:#666">==</span> dry.end()) <span style="color:#a2f;font-weight:bold">return</span> {};
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    ans[<span style="color:#666">*</span>it] <span style="color:#666">=</span> lake;
</span></span><span style="display:flex;"><span>                    dry.erase(<span style="color:#666">*</span>it);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                mp[lake] <span style="color:#666">=</span> i;
</span></span><span style="display:flex;"><span>                ans.push_back(<span style="color:#666">-</span><span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> ans;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem at hand is to determine the behavior of lakes in a given sequence of rainfalls, represented by an array <code>rains</code>. Each index of the array represents a day, and the value indicates the lake that receives rain on that day. If the value is <code>0</code>, it means no rain falls on that day, and the ground can be dry. The objective is to avoid flooding in the lakes by strategically choosing which dry days to use for draining the lakes when they overflow. The solution must return an array where each element corresponds to a day in <code>rains</code>, with the following meanings:</p>
<ul>
<li>If it rains on a lake, the output is <code>-1</code>.</li>
<li>If it&rsquo;s a dry day that is used to drain a lake, the output is the lake&rsquo;s identifier.</li>
<li>If a lake overflows and there are no dry days available to drain it, the output should be an empty array indicating the impossibility of avoiding flooding.</li>
</ul>
<h3 id="approach">Approach</h3>
<p>To solve this problem, we need to maintain a record of the lakes and their corresponding rain days, as well as a set of dry days available for draining. Hereâ€™s a step-by-step breakdown of the approach:</p>
<ol>
<li>
<p><strong>Data Structures</strong>: Utilize a set to keep track of dry days and an unordered map to record the last rainy day for each lake.</p>
</li>
<li>
<p><strong>Iterate Through Rains</strong>: Loop through the <code>rains</code> array. For each day:</p>
<ul>
<li>If it rains (<code>rains[i] != 0</code>), check if the corresponding lake has rained before.</li>
<li>If it has rained before, find the nearest available dry day after the last rainy day for that lake.</li>
<li>If such a dry day exists, drain the lake on that day.</li>
<li>If it is a dry day (<code>rains[i] == 0</code>), add it to the set of dry days.</li>
</ul>
</li>
<li>
<p><strong>Fill the Answer Array</strong>: Create an answer array to store the results for each day as described above.</p>
</li>
<li>
<p><strong>Return Result</strong>: Finally, return the constructed answer array.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> avoidFlood(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> rains) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        set<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> dry;  <span style="color:#080;font-style:italic">// Set to store indices of dry days
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        unordered_map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> mp;  <span style="color:#080;font-style:italic">// Map to track the last rainy day for each lake
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> rains.size();  <span style="color:#080;font-style:italic">// Size of the input array
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> ans;  <span style="color:#080;font-style:italic">// Result array to be returned
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(rains[i] <span style="color:#666">==</span> <span style="color:#666">0</span>) {  <span style="color:#080;font-style:italic">// If it&#39;s a dry day
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                dry.insert(i);  <span style="color:#080;font-style:italic">// Add the index to the dry set
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                ans.push_back(<span style="color:#666">1</span>);  <span style="color:#080;font-style:italic">// Mark it as a dry day in the answer
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            } <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#0b0;font-weight:bold">int</span> lake <span style="color:#666">=</span> rains[i];  <span style="color:#080;font-style:italic">// Identify the lake that is receiving rain
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">if</span>(mp.count(lake)) {  <span style="color:#080;font-style:italic">// If this lake has rained before
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                    <span style="color:#a2f;font-weight:bold">auto</span> it <span style="color:#666">=</span> dry.lower_bound(mp[lake]);  <span style="color:#080;font-style:italic">// Find the next available dry day
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                    
</span></span><span style="display:flex;"><span>                    <span style="color:#a2f;font-weight:bold">if</span>(it <span style="color:#666">==</span> dry.end()) <span style="color:#a2f;font-weight:bold">return</span> {};  <span style="color:#080;font-style:italic">// If no dry day is available, return empty array
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                    
</span></span><span style="display:flex;"><span>                    ans[<span style="color:#666">*</span>it] <span style="color:#666">=</span> lake;  <span style="color:#080;font-style:italic">// Drain the lake on the dry day found
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                    dry.erase(<span style="color:#666">*</span>it);  <span style="color:#080;font-style:italic">// Remove that day from the dry set
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                }
</span></span><span style="display:flex;"><span>                mp[lake] <span style="color:#666">=</span> i;  <span style="color:#080;font-style:italic">// Update the last rainy day for this lake
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                ans.push_back(<span style="color:#666">-</span><span style="color:#666">1</span>);  <span style="color:#080;font-style:italic">// Mark the day as a rainy day in the answer
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> ans;  <span style="color:#080;font-style:italic">// Return the final answer
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ol>
<li>
<p><strong>Set Initialization</strong>: A <code>set&lt;int&gt; dry</code> is used to track indices of dry days, allowing for efficient insertion and lookups.</p>
</li>
<li>
<p><strong>Map Initialization</strong>: An <code>unordered_map&lt;int, int&gt; mp</code> keeps the last day when it rained for each lake, allowing for quick access.</p>
</li>
<li>
<p><strong>Loop Through the Input</strong>: The main loop iterates through the <code>rains</code> array, checking each day&rsquo;s weather conditions.</p>
</li>
<li>
<p><strong>Handling Dry Days</strong>: When encountering a dry day, the index is added to the <code>dry</code> set and <code>1</code> is appended to the result array.</p>
</li>
<li>
<p><strong>Handling Rainy Days</strong>:</p>
<ul>
<li>If it rains on a lake that has rained before, the code checks for a dry day to drain it.</li>
<li>Using <code>lower_bound</code>, it finds the smallest index in the dry set that is greater than or equal to the last rainy day of the lake.</li>
<li>If a suitable dry day is found, the lake is drained on that day by updating the result array and removing that index from the dry set.</li>
</ul>
</li>
<li>
<p><strong>Returning the Result</strong>: The function returns the result array, which contains the operations performed on each day.</p>
</li>
</ol>
<h3 id="complexity">Complexity</h3>
<ul>
<li>
<p><strong>Time Complexity</strong>: The time complexity of this solution is (O(n \log n)), where (n) is the length of the <code>rains</code> array. This is due to the logarithmic time complexity for operations on the set (insertion, deletion, and finding the lower bound).</p>
</li>
<li>
<p><strong>Space Complexity</strong>: The space complexity is (O(n)), as we maintain a set for dry days and a map for the last rainy days, which can grow up to the size of the input.</p>
</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>The <code>avoidFlood</code> function efficiently determines how to manage lake flooding based on a given sequence of rainfall events. It adeptly utilizes a combination of a set and a hash map to track dry days and rainy occurrences, ensuring optimal performance even with large inputs.</p>
<p>Key highlights include:</p>
<ol>
<li>
<p><strong>Effective Use of Data Structures</strong>: The solution employs <code>set</code> and <code>unordered_map</code> to facilitate quick lookups and updates, enhancing performance.</p>
</li>
<li>
<p><strong>Logical Flow</strong>: The step-by-step approach logically handles different scenarios (rainy and dry days) in a clear manner.</p>
</li>
<li>
<p><strong>Real-world Applications</strong>: This solution is applicable in scenarios involving resource management, such as water reservoir systems, where the optimal handling of resources is critical.</p>
</li>
</ol>
<p>Overall, this solution effectively addresses the problem while demonstrating good coding practices and efficient algorithms, making it a robust and scalable implementation for managing lake flooding during rain events.</p>
<p><a href="https://leetcode.com/problems/avoid-flood-in-the-city/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/EcvhHoFaDoU?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
