<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 3026: Maximum Good Subarray Sum | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 3026: Maximum Good Subarray Sum">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 3026: Maximum Good Subarray Sum in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-3026-maximum-good-subarray-sum/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 3026: Maximum Good Subarray Sum">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 3026: Maximum Good Subarray Sum in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-01-09T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Hash Table">
    <meta property="article:tag" content="Prefix Sum">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 3026: Maximum Good Subarray Sum</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1042s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> maximumSubarraySum(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> nums, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> ans <span style="color:#666">=</span> LLONG_MIN;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> nums.size();
</span></span><span style="display:flex;"><span>        map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> mp;
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;</span> pre;
</span></span><span style="display:flex;"><span>        pre.push_back(<span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            pre.push_back(pre.back() <span style="color:#666">+</span> nums[i]);
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(mp.count(nums[i] <span style="color:#666">-</span> k)) ans <span style="color:#666">=</span> max(ans, pre[i <span style="color:#666">+</span> <span style="color:#666">1</span>] <span style="color:#666">-</span> pre[mp[nums[i] <span style="color:#666">-</span> k]]);
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(mp.count(nums[i] <span style="color:#666">+</span> k)) ans <span style="color:#666">=</span> max(ans, pre[i <span style="color:#666">+</span> <span style="color:#666">1</span>] <span style="color:#666">-</span> pre[mp[nums[i] <span style="color:#666">+</span> k]]);
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">auto</span> it <span style="color:#666">=</span> mp.find(nums[i]);
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(it <span style="color:#666">==</span> mp.end() <span style="color:#666">||</span> pre[i] <span style="color:#666">-</span> pre[it<span style="color:#666">-&gt;</span>second] <span style="color:#666">&lt;=</span> <span style="color:#666">0</span>) mp[nums[i]] <span style="color:#666">=</span> i;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> ans <span style="color:#666">==</span> LLONG_MIN<span style="color:#666">?</span> <span style="color:#666">0</span><span style="color:#666">:</span> ans;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement:</h3>
<p>Given an array of integers <code>nums</code>, the problem asks to find the maximum subarray sum such that for any subarray in the solution, the absolute difference between any two consecutive elements in the subarray is at least <code>k</code>. The function should return the maximum sum of the subarray that satisfies this condition, or <code>0</code> if no valid subarray exists.</p>
<h3 id="approach">Approach:</h3>
<p>To solve the problem efficiently, the following approach can be utilized:</p>
<ol>
<li>
<p><strong>Prefix Sum</strong>:
We will use a prefix sum array (<code>pre[]</code>) to track cumulative sums of elements in <code>nums</code> up to each index. This allows quick computation of subarray sums in constant time.</p>
</li>
<li>
<p><strong>Hash Map (Map)</strong>:
A hash map (<code>mp</code>) will store the most recent index of each number. This helps track the positions of previous elements that are within the required difference of <code>k</code> from the current element.</p>
</li>
<li>
<p><strong>Iterative Calculation</strong>:
For each element <code>nums[i]</code>, we calculate the sum of subarrays ending at <code>i</code> and check if it satisfies the condition based on the difference <code>k</code>.</p>
</li>
<li>
<p><strong>Max Subarray Sum Calculation</strong>:
By keeping track of the prefix sums and utilizing the map to access previous sums efficiently, we can calculate the maximum valid subarray sum.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step):</h3>
<h4 id="step-1-initialize-variables">Step 1: Initialize Variables</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> ans <span style="color:#666">=</span> LLONG_MIN;
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> nums.size();
</span></span><span style="display:flex;"><span>map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> mp;
</span></span><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;</span> pre;
</span></span><span style="display:flex;"><span>pre.push_back(<span style="color:#666">0</span>);
</span></span></code></pre></div><ul>
<li><strong><code>long long ans = LLONG_MIN;</code></strong>: This variable <code>ans</code> stores the maximum subarray sum found. Initially set to the smallest possible value (<code>LLONG_MIN</code>).</li>
<li><strong><code>int n = nums.size();</code></strong>: <code>n</code> stores the size of the input array <code>nums</code>.</li>
<li><strong><code>map&lt;int, int&gt; mp;</code></strong>: A map <code>mp</code> is used to store the most recent index of each element in <code>nums</code>.</li>
<li><strong><code>vector&lt;long long&gt; pre; pre.push_back(0);</code></strong>: A vector <code>pre</code> is used to store the prefix sums, with an initial value of <code>0</code> to represent the sum before the first element.</li>
</ul>
<h4 id="step-2-build-prefix-sum-array-and-update-maximum-subarray-sum">Step 2: Build Prefix Sum Array and Update Maximum Subarray Sum</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    pre.push_back(pre.back() <span style="color:#666">+</span> nums[i]);
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(mp.count(nums[i] <span style="color:#666">-</span> k)) ans <span style="color:#666">=</span> max(ans, pre[i <span style="color:#666">+</span> <span style="color:#666">1</span>] <span style="color:#666">-</span> pre[mp[nums[i] <span style="color:#666">-</span> k]]);
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(mp.count(nums[i] <span style="color:#666">+</span> k)) ans <span style="color:#666">=</span> max(ans, pre[i <span style="color:#666">+</span> <span style="color:#666">1</span>] <span style="color:#666">-</span> pre[mp[nums[i] <span style="color:#666">+</span> k]]);
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">auto</span> it <span style="color:#666">=</span> mp.find(nums[i]);
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(it <span style="color:#666">==</span> mp.end() <span style="color:#666">||</span> pre[i] <span style="color:#666">-</span> pre[it<span style="color:#666">-&gt;</span>second] <span style="color:#666">&lt;=</span> <span style="color:#666">0</span>) mp[nums[i]] <span style="color:#666">=</span> i;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li><strong>Prefix Sum Calculation</strong>:
<ul>
<li><code>pre.push_back(pre.back() + nums[i]);</code> updates the prefix sum for the current element by adding it to the previous sum. This allows quick access to the sum of any subarray from the start to the current element.</li>
</ul>
</li>
<li><strong>Check for Valid Subarray (Absolute Difference Check)</strong>:
<ul>
<li><code>if(mp.count(nums[i] - k)) ans = max(ans, pre[i + 1] - pre[mp[nums[i] - k]]);</code> checks if there exists a previous element such that the absolute difference between the current element <code>nums[i]</code> and the previous element is exactly <code>k</code>. If it does, we compute the sum of the subarray from that previous index to the current index and update <code>ans</code>.</li>
<li>Similarly, <code>if(mp.count(nums[i] + k)) ans = max(ans, pre[i + 1] - pre[mp[nums[i] + k]]);</code> does the same for the difference of <code>-k</code>.</li>
</ul>
</li>
<li><strong>Update Map</strong>:
<ul>
<li><code>auto it = mp.find(nums[i]);</code> searches for the current element in the map to determine if it has been encountered before.</li>
<li><code>if(it == mp.end() || pre[i] - pre[it-&gt;second] &lt;= 0)</code> ensures that if the current element has not been encountered or the subarray sum from the previous index is non-positive, the current element is added to the map with its index.</li>
<li><code>mp[nums[i]] = i;</code> updates the map to store the index of the current element.</li>
</ul>
</li>
</ul>
<h4 id="step-3-return-the-result">Step 3: Return the Result</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> ans <span style="color:#666">==</span> LLONG_MIN<span style="color:#666">?</span> <span style="color:#666">0</span><span style="color:#666">:</span> ans;
</span></span></code></pre></div><ul>
<li>After iterating through all elements, if no valid subarray sum was found, <code>ans</code> will still be <code>LLONG_MIN</code>, so we return <code>0</code>. Otherwise, we return the computed maximum subarray sum.</li>
</ul>
<h3 id="complexity-analysis">Complexity Analysis:</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<ul>
<li><strong>Prefix Sum Calculation</strong>: The loop iterates over all elements of the array <code>nums</code>, so the time complexity for calculating the prefix sums is <strong>O(n)</strong>.</li>
<li><strong>Map Operations</strong>: Each map operation (insertion, search) takes <strong>O(log n)</strong> time because an <code>unordered_map</code> in C++ is implemented as a balanced binary search tree.
<ul>
<li>For each element, we check and update the map up to two times (once for <code>nums[i] - k</code> and once for <code>nums[i] + k</code>), which results in a time complexity of <strong>O(log n)</strong> per element.</li>
</ul>
</li>
<li><strong>Overall Time Complexity</strong>: The total time complexity is <strong>O(n log n)</strong> due to the iteration through the elements and map operations.</li>
</ul>
<h4 id="space-complexity">Space Complexity:</h4>
<ul>
<li><strong>Prefix Sum Array</strong>: The prefix sum array stores one value for each element, so its space complexity is <strong>O(n)</strong>.</li>
<li><strong>Map</strong>: The map stores an entry for each distinct element in <code>nums</code>. In the worst case, where all elements are unique, the space complexity for the map is <strong>O(n)</strong>.</li>
<li><strong>Overall Space Complexity</strong>: The total space complexity is <strong>O(n)</strong>, accounting for the prefix sum array and the map.</li>
</ul>
<h3 id="conclusion">Conclusion:</h3>
<p>The algorithm efficiently computes the maximum sum of valid subarrays where the absolute difference between consecutive elements is at least <code>k</code>. By utilizing a prefix sum array and a map to track element indices, the solution achieves <strong>O(n log n)</strong> time complexity, which is optimal for large input sizes. The space complexity is <strong>O(n)</strong>, making it suitable for scenarios where memory usage is also a concern. This approach ensures that we can handle large arrays effectively, providing both correctness and efficiency.</p>
<p><a href="https://leetcode.com/problems/maximum-good-subarray-sum/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/v-IFLS8-Haw?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
