<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 1155: Number of Dice Rolls With Target Sum | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1155: Number of Dice Rolls With Target Sum">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1155: Number of Dice Rolls With Target Sum in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-1155-number-of-dice-rolls-with-target-sum/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1155: Number of Dice Rolls With Target Sum">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1155: Number of Dice Rolls With Target Sum in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-07-14T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Dynamic Programming">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 1155: Number of Dice Rolls With Target Sum</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode87s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> dp[<span style="color:#666">31</span>][<span style="color:#666">1001</span>] <span style="color:#666">=</span> {};
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">numRollsToTarget</span>(<span style="color:#0b0;font-weight:bold">int</span> d, <span style="color:#0b0;font-weight:bold">int</span> f, <span style="color:#0b0;font-weight:bold">int</span> target, <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span> (d <span style="color:#666">==</span> <span style="color:#666">0</span> <span style="color:#666">||</span> target <span style="color:#666">&lt;=</span> <span style="color:#666">0</span>) <span style="color:#a2f;font-weight:bold">return</span> d <span style="color:#666">==</span> target;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span> (dp[d][target]) <span style="color:#a2f;font-weight:bold">return</span> dp[d][target] <span style="color:#666">-</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#a2f;font-weight:bold">auto</span> i <span style="color:#666">=</span> <span style="color:#666">1</span>; i <span style="color:#666">&lt;=</span> f; <span style="color:#666">++</span>i)
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> (res <span style="color:#666">+</span> numRollsToTarget(d <span style="color:#666">-</span> <span style="color:#666">1</span>, f, target <span style="color:#666">-</span> i)) <span style="color:#666">%</span> <span style="color:#666">1000000007</span>;
</span></span><span style="display:flex;"><span>        dp[d][target] <span style="color:#666">=</span> res <span style="color:#666">+</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem requires calculating the number of ways to reach an exact target sum by rolling a specific number of dice. Each die has <code>f</code> faces, numbered from 1 to <code>f</code>. The function should return the result modulo (10^9 + 7) due to the large number of possible combinations.</p>
<p>The function signature is as follows:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> numRollsToTarget(<span style="color:#0b0;font-weight:bold">int</span> d, <span style="color:#0b0;font-weight:bold">int</span> f, <span style="color:#0b0;font-weight:bold">int</span> target)
</span></span></code></pre></div><p>Where:</p>
<ul>
<li><code>d</code> represents the number of dice.</li>
<li><code>f</code> represents the number of faces each die has.</li>
<li><code>target</code> is the sum we want to achieve by rolling the dice.</li>
</ul>
<h3 id="approach">Approach</h3>
<p>This code uses dynamic programming (DP) and recursion to solve the problem. The primary idea is to break down the problem of finding the ways to achieve the target sum using <code>d</code> dice by recursively examining smaller subproblems with fewer dice and lower target values.</p>
<ol>
<li>
<p><strong>Dynamic Programming Array (dp)</strong>: <code>dp[d][target]</code> is a memoization table that stores previously computed results for a given number of dice (<code>d</code>) and a given target (<code>target</code>). This avoids recalculating the number of ways for the same <code>d</code> and <code>target</code> combination.</p>
</li>
<li>
<p><strong>Recursive Calls with Subproblems</strong>: Each recursive call reduces the number of dice (<code>d</code>) and the target value by the face value rolled on the die, allowing us to explore all possible outcomes for each roll.</p>
</li>
<li>
<p><strong>Base Conditions</strong>:</p>
<ul>
<li><strong>Exact match with zero dice left</strong>: If <code>d == 0</code> and <code>target == 0</code>, it means that we’ve successfully achieved the target, so we return 1 to count this as a valid way.</li>
<li><strong>Early exit for invalid conditions</strong>: If we run out of dice or the target is non-positive when <code>d &gt; 0</code>, it’s impossible to reach the target, so we return 0.</li>
</ul>
</li>
<li>
<p><strong>Modulo Constraint</strong>: The result is taken modulo (10^9 + 7) in each step to handle large values, as the number of combinations can grow rapidly.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<p>Let’s walk through each section of the code in detail:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> dp[<span style="color:#666">31</span>][<span style="color:#666">1001</span>] <span style="color:#666">=</span> {};
</span></span></code></pre></div><ul>
<li><strong>Line 1-3</strong>: This is the class definition and declaration of the DP array <code>dp</code>. It’s initialized to zero and sized according to the constraints: up to 30 dice and a target of up to 1000.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">numRollsToTarget</span>(<span style="color:#0b0;font-weight:bold">int</span> d, <span style="color:#0b0;font-weight:bold">int</span> f, <span style="color:#0b0;font-weight:bold">int</span> target, <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span> (d <span style="color:#666">==</span> <span style="color:#666">0</span> <span style="color:#666">||</span> target <span style="color:#666">&lt;=</span> <span style="color:#666">0</span>) <span style="color:#a2f;font-weight:bold">return</span> d <span style="color:#666">==</span> target;
</span></span></code></pre></div><ul>
<li><strong>Base Cases (Lines 5-6)</strong>:
<ul>
<li>If <code>d == 0</code>, the function checks if <code>target</code> is also <code>0</code>. If both are zero, it means we’ve exactly met the target, so we return <code>1</code> (true case). If only one of them is zero, we return <code>0</code> (false case) since the target was not reached.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span> (dp[d][target]) <span style="color:#a2f;font-weight:bold">return</span> dp[d][target] <span style="color:#666">-</span> <span style="color:#666">1</span>;
</span></span></code></pre></div><ul>
<li><strong>Memoization Check (Line 7)</strong>: If <code>dp[d][target]</code> is already computed, the function directly returns it, minus one (to account for initial array zeroing). This saves computational time by avoiding repeated calculations.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span> (<span style="color:#a2f;font-weight:bold">auto</span> i <span style="color:#666">=</span> <span style="color:#666">1</span>; i <span style="color:#666">&lt;=</span> f; <span style="color:#666">++</span>i)
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> (res <span style="color:#666">+</span> numRollsToTarget(d <span style="color:#666">-</span> <span style="color:#666">1</span>, f, target <span style="color:#666">-</span> i)) <span style="color:#666">%</span> <span style="color:#666">1000000007</span>;
</span></span></code></pre></div><ul>
<li><strong>Loop through Die Faces (Lines 8-9)</strong>:
<ul>
<li>The loop iterates over all possible face values (<code>i</code> from <code>1</code> to <code>f</code>), attempting each as a potential outcome.</li>
<li>For each face value, it recursively calls <code>numRollsToTarget</code> with one less die (<code>d - 1</code>) and a reduced target (<code>target - i</code>). This breakdown allows the function to explore all potential ways to reach the target with <code>d</code> dice.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        dp[d][target] <span style="color:#666">=</span> res <span style="color:#666">+</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ul>
<li><strong>Memoization Update and Return (Lines 10-11)</strong>:
<ul>
<li>After the loop, the result <code>res</code> (total count of ways) is stored in <code>dp[d][target]</code>, incremented by 1 to distinguish it from initial zeros in <code>dp</code>.</li>
<li>Finally, <code>res</code> is returned, representing the number of ways to reach the target sum with <code>d</code> dice.</li>
</ul>
</li>
</ul>
<h3 id="complexity">Complexity</h3>
<ol>
<li>
<p><strong>Time Complexity</strong>: (O(d \times \text{target} \times f)), where <code>d</code> is the number of dice, <code>target</code> is the desired sum, and <code>f</code> is the number of faces per die. Each recursive call processes all <code>f</code> faces, making the algorithm efficient for reasonable values.</p>
</li>
<li>
<p><strong>Space Complexity</strong>: (O(d \times \text{target})) due to the DP table. This array stores intermediate results, saving time by preventing redundant calculations.</p>
</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>This <code>numRollsToTarget</code> function provides an efficient way to calculate the number of ways to achieve a target sum by rolling dice with a specified number of faces. By using dynamic programming and memoization, the solution avoids redundant calculations, making it suitable for large input sizes. This algorithm is versatile for solving dice probability problems, as it efficiently handles large targets and face values through recursion and modular arithmetic. The solution’s complexity is optimized to prevent excessive calculations and storage, ensuring high performance.</p>
<p><a href="https://leetcode.com/problems/number-of-dice-rolls-with-target-sum/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/y1PUOTOr-qU?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
