<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 2522: Partition String Into Substrings With Values at Most K | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 2522: Partition String Into Substrings With Values at Most K">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 2522: Partition String Into Substrings With Values at Most K in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-2522-partition-string-into-substrings-with-values-at-most-k/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 2522: Partition String Into Substrings With Values at Most K">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 2522: Partition String Into Substrings With Values at Most K in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-02-28T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="String">
    <meta property="article:tag" content="Dynamic Programming">
    <meta property="article:tag" content="Greedy">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 2522: Partition String Into Substrings With Values at Most K</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode813s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    string str;
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span>map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;</span> mem;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">dp</span>(<span style="color:#0b0;font-weight:bold">int</span> idx, <span style="color:#0b0;font-weight:bold">int</span> k, <span style="color:#0b0;font-weight:bold">int</span> num) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(idx <span style="color:#666">==</span> str.size()) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(mem[idx].count(num)) <span style="color:#a2f;font-weight:bold">return</span> mem[idx][num];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> ans <span style="color:#666">=</span> <span style="color:#666">1</span> <span style="color:#666">+</span> dp(idx <span style="color:#666">+</span> <span style="color:#666">1</span>, k, str[idx] <span style="color:#666">-</span> <span style="color:#b44">&#39;0&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> net <span style="color:#666">=</span> (<span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span>)num <span style="color:#666">*</span> <span style="color:#666">10</span> <span style="color:#666">+</span> (str[idx] <span style="color:#666">-</span> <span style="color:#b44">&#39;0&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(net <span style="color:#666">&lt;=</span> k) {
</span></span><span style="display:flex;"><span>            ans <span style="color:#666">=</span> min(ans, dp(idx <span style="color:#666">+</span> <span style="color:#666">1</span>, k, net));
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> mem[idx][num] <span style="color:#666">=</span> ans;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">minimumPartition</span>(string s, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>        str <span style="color:#666">=</span> s;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">char</span> <span style="color:#a0a000">x</span>: s)
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(x <span style="color:#666">-</span> <span style="color:#b44">&#39;0&#39;</span> <span style="color:#666">&gt;</span> k) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">-</span><span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        mem.resize(s.size());
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> ans <span style="color:#666">=</span> dp(<span style="color:#666">0</span>, k, <span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> ans;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>Given a string <code>s</code> consisting of digits, and an integer <code>k</code>, the task is to partition the string into the minimum number of parts such that each part represents a number less than or equal to <code>k</code>. In each partition, the number formed by the digits should be valid (i.e., no leading zeros), and the goal is to minimize the number of partitions needed. If it&rsquo;s impossible to partition the string in such a way that each part is less than or equal to <code>k</code>, return <code>-1</code>.</p>
<h3 id="approach">Approach</h3>
<p>To solve this problem, we can approach it using <strong>Dynamic Programming (DP)</strong>. Here&rsquo;s the detailed breakdown of the approach:</p>
<ol>
<li>
<p><strong>Representation of the Problem</strong>:</p>
<ul>
<li>We will traverse the string <code>s</code> from left to right, at each step considering if we can form a valid partition from the current position <code>idx</code> up to some further position <code>j</code>.</li>
<li>For each partition, we will check if the number formed by the substring is less than or equal to <code>k</code>. If yes, we will consider it as a valid partition and continue the search for the next partitions.</li>
</ul>
</li>
<li>
<p><strong>Recursive DP Approach</strong>:</p>
<ul>
<li>The idea is to use a recursive function <code>dp(idx, k, num)</code> where <code>idx</code> represents the current index in the string, <code>k</code> is the maximum allowable value for each number, and <code>num</code> is the number formed by the substring so far.</li>
<li>The recursion will try to extend the number by including more digits, checking if the number stays within the bounds of <code>k</code>. If not, it will start a new partition.</li>
</ul>
</li>
<li>
<p><strong>Memoization</strong>:</p>
<ul>
<li>We use memoization to store the results of previously computed subproblems. This will help avoid redundant calculations and speed up the process, especially for overlapping subproblems.</li>
</ul>
</li>
<li>
<p><strong>Base Case and Recursive Case</strong>:</p>
<ul>
<li>The base case occurs when <code>idx</code> reaches the end of the string, which means we’ve found a valid partitioning, so we return <code>1</code> (indicating that one more partition is added).</li>
<li>For each index, we try to either extend the current partition or start a new one if the number exceeds the allowed limit <code>k</code>.</li>
</ul>
</li>
<li>
<p><strong>Early Exit for Invalid Numbers</strong>:</p>
<ul>
<li>If a digit in the string is greater than <code>k</code>, it&rsquo;s impossible to form a valid number, and we immediately return <code>-1</code>.</li>
</ul>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<h4 id="class-and-member-variables">Class and Member Variables:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    string str;
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span>map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;</span> mem;
</span></span></code></pre></div><ul>
<li>We define a class <code>Solution</code>, which contains a string <code>str</code> representing the input string, and <code>mem</code> which is a vector of maps used for memoization. Each map at index <code>i</code> stores the results for various numbers that can be formed starting from position <code>i</code> in the string.</li>
</ul>
<h4 id="recursive-dp-function">Recursive DP Function:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">dp</span>(<span style="color:#0b0;font-weight:bold">int</span> idx, <span style="color:#0b0;font-weight:bold">int</span> k, <span style="color:#0b0;font-weight:bold">int</span> num) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(idx <span style="color:#666">==</span> str.size()) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(mem[idx].count(num)) <span style="color:#a2f;font-weight:bold">return</span> mem[idx][num];
</span></span></code></pre></div><ul>
<li>The function <code>dp</code> is called with <code>idx</code> representing the current index in the string, <code>k</code> representing the maximum allowable number, and <code>num</code> representing the current number formed by the digits processed so far.</li>
<li>If we reach the end of the string (<code>idx == str.size()</code>), it means we&rsquo;ve successfully partitioned the string, so we return <code>1</code>.</li>
<li>If the result for the current subproblem (starting from <code>idx</code> and forming a number <code>num</code>) is already computed, we return the stored result from the memoization map.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> ans <span style="color:#666">=</span> <span style="color:#666">1</span> <span style="color:#666">+</span> dp(idx <span style="color:#666">+</span> <span style="color:#666">1</span>, k, str[idx] <span style="color:#666">-</span> <span style="color:#b44">&#39;0&#39;</span>);
</span></span></code></pre></div><ul>
<li>We attempt to form a partition starting from the current index. The recursive call <code>dp(idx + 1, k, str[idx] - '0')</code> checks the number formed by just the current digit (this is the smallest partition we can form).</li>
<li>We increment the answer by 1, since we are considering a new partition.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> net <span style="color:#666">=</span> (<span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span>)num <span style="color:#666">*</span> <span style="color:#666">10</span> <span style="color:#666">+</span> (str[idx] <span style="color:#666">-</span> <span style="color:#b44">&#39;0&#39;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(net <span style="color:#666">&lt;=</span> k) {
</span></span><span style="display:flex;"><span>            ans <span style="color:#666">=</span> min(ans, dp(idx <span style="color:#666">+</span> <span style="color:#666">1</span>, k, net));
</span></span><span style="display:flex;"><span>        }
</span></span></code></pre></div><ul>
<li>We attempt to extend the current number by adding the next digit (<code>str[idx]</code>). The value of <code>net</code> is calculated as the number formed by the current number <code>num</code> multiplied by 10 (to shift the digits left) plus the current digit (<code>str[idx] - '0'</code>).</li>
<li>If <code>net</code> is less than or equal to <code>k</code>, we make a recursive call to <code>dp(idx + 1, k, net)</code> to continue building the current number. We update the <code>ans</code> by taking the minimum of the current <code>ans</code> and the result of the recursive call, ensuring that we are minimizing the number of partitions.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> mem[idx][num] <span style="color:#666">=</span> ans;
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><ul>
<li>After exploring both options (continuing with the current number or starting a new one), we store the result for the current subproblem in <code>mem[idx][num]</code>.</li>
</ul>
<h4 id="main-function">Main Function:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">minimumPartition</span>(string s, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>        str <span style="color:#666">=</span> s;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">char</span> <span style="color:#a0a000">x</span>: s)
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(x <span style="color:#666">-</span> <span style="color:#b44">&#39;0&#39;</span> <span style="color:#666">&gt;</span> k) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">-</span><span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        mem.resize(s.size());
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> ans <span style="color:#666">=</span> dp(<span style="color:#666">0</span>, k, <span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> ans;
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><ul>
<li>The function <code>minimumPartition</code> starts by initializing the string <code>str</code> with the input string <code>s</code>.</li>
<li>It checks if any digit in the string is greater than <code>k</code>. If such a digit exists, it’s impossible to form a valid partition, and we return <code>-1</code> immediately.</li>
<li>We then initialize the memoization table <code>mem</code> to store the results for each position in the string.</li>
<li>Finally, we call the <code>dp</code> function starting from index 0 with an initial <code>num</code> of 0, which represents the initial state with no digits processed yet. The result of <code>dp(0, k, 0)</code> is returned as the answer.</li>
</ul>
<h3 id="complexity">Complexity</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<ul>
<li>The time complexity is driven by the number of recursive calls and the size of the memoization table. The function <code>dp</code> explores each index <code>idx</code> and each possible value of <code>num</code> that can be formed from that position.</li>
<li>Since the recursion is bounded by the length of the string <code>n</code> and the number of possible values for <code>num</code> is limited (because <code>num</code> can be at most <code>k</code>), the time complexity is ( O(n \times k) ), where <code>n</code> is the length of the string and <code>k</code> is the maximum allowable value for each partition.</li>
</ul>
<h4 id="space-complexity">Space Complexity:</h4>
<ul>
<li>The space complexity is ( O(n \times k) ), where <code>n</code> is the length of the string and <code>k</code> is the maximum value for each partition. This space is used for storing the memoization table <code>mem</code> and recursive function calls.</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>This solution uses dynamic programming with memoization to minimize the number of partitions needed to break the string <code>s</code> into valid parts, each less than or equal to <code>k</code>. By recursively trying to extend the current number or start a new partition, we efficiently compute the minimum number of partitions. Memoization helps optimize the solution by storing results of overlapping subproblems, reducing redundant computations. The approach works well within the problem constraints, providing an optimal solution with a time complexity of ( O(n \times k) ).</p>
<p><a href="https://leetcode.com/problems/partition-string-into-substrings-with-values-at-most-k/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/XQh9V8PEIiI?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
