<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 2596: Check Knight Tour Configuration | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 2596: Check Knight Tour Configuration">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 2596: Check Knight Tour Configuration in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-2596-check-knight-tour-configuration/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 2596: Check Knight Tour Configuration">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 2596: Check Knight Tour Configuration in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-02-21T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Depth-First Search">
    <meta property="article:tag" content="Breadth-First Search">
    <meta property="article:tag" content="Matrix">
    <meta property="article:tag" content="Simulation">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 2596: Check Knight Tour Configuration</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode863s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">bool</span> checkValidGrid(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> grid) {
</span></span><span style="display:flex;"><span>        map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, pair<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;</span> mp;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> grid.size();
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>; j <span style="color:#666">&lt;</span> n; j<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>                mp[grid[i][j]] <span style="color:#666">=</span> {i, j};
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(mp[<span style="color:#666">0</span>] <span style="color:#666">!=</span> make_pair(<span style="color:#666">0</span>,<span style="color:#666">0</span>)) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">false</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> p <span style="color:#666">=</span> <span style="color:#666">0</span>, q <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">1</span>; i <span style="color:#666">&lt;</span> n <span style="color:#666">*</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">auto</span> it <span style="color:#666">=</span> mp[i];
</span></span><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">int</span> x <span style="color:#666">=</span> it.first;
</span></span><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">int</span> y <span style="color:#666">=</span> it.second;
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>((abs(x <span style="color:#666">-</span> p) <span style="color:#666">==</span> <span style="color:#666">1</span> <span style="color:#666">&amp;&amp;</span> abs(y <span style="color:#666">-</span> q) <span style="color:#666">==</span> <span style="color:#666">2</span>) <span style="color:#666">||</span>
</span></span><span style="display:flex;"><span>               (abs(x <span style="color:#666">-</span> p) <span style="color:#666">==</span> <span style="color:#666">2</span> <span style="color:#666">&amp;&amp;</span> abs(y <span style="color:#666">-</span> q) <span style="color:#666">==</span> <span style="color:#666">1</span>)) {
</span></span><span style="display:flex;"><span>                p <span style="color:#666">=</span> x;
</span></span><span style="display:flex;"><span>                q <span style="color:#666">=</span> y;
</span></span><span style="display:flex;"><span>            } <span style="color:#a2f;font-weight:bold">else</span> <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">false</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>You are given an <code>n x n</code> grid where each cell contains a unique number between <code>0</code> and <code>n^2 - 1</code>. Your task is to check if the grid can be traversed in a valid sequence following the movement pattern of a knight in chess.</p>
<p>A knight moves in an &ldquo;L&rdquo; shape: it can either move two squares in one direction and one square in the perpendicular direction, or vice versa. For a grid to be valid, the numbers must follow this pattern: starting from <code>0</code> at the top-left corner, each successive number must appear at a valid knight move from the previous number. Specifically, for any number <code>i</code>, the knight must move from position <code>i</code> to position <code>i+1</code> in the grid. The task is to determine whether such a valid sequence exists for the entire grid.</p>
<h3 id="approach">Approach</h3>
<ol>
<li>
<p><strong>Grid Setup</strong>: We are given an <code>n x n</code> grid where each cell contains a unique number from <code>0</code> to <code>n^2 - 1</code>. The key insight is that the knight’s moves must be checked starting from <code>0</code> (which must be located at the top-left corner) and then for each subsequent number, we need to check whether it is reachable via a valid knight move from the previous number.</p>
</li>
<li>
<p><strong>Mapping the Grid</strong>: To facilitate quick lookup of the positions of each number in the grid, we store the coordinates of each number in a map. This allows us to easily find the position of any number <code>i</code> and its subsequent number <code>i+1</code> during the traversal.</p>
</li>
<li>
<p><strong>Knight&rsquo;s Move Validation</strong>: The movement of a knight follows specific patterns:</p>
<ul>
<li>It can move two squares in one direction and one square in the perpendicular direction, or vice versa. This means we need to check whether the position of <code>i+1</code> is either:
<ul>
<li>Two steps in one direction and one step in the perpendicular direction.</li>
<li>Or one step in one direction and two steps in the perpendicular direction.</li>
</ul>
</li>
</ul>
<p>The move condition can be mathematically described as:</p>
<ul>
<li><code>(abs(x - p) == 1 &amp;&amp; abs(y - q) == 2) || (abs(x - p) == 2 &amp;&amp; abs(y - q) == 1)</code>
Here, <code>(x, y)</code> represents the current position of the number, and <code>(p, q)</code> is the position of the previous number. If the condition holds for each number <code>i</code>, then the grid is valid.</li>
</ul>
</li>
<li>
<p><strong>Traversal</strong>: Starting from <code>0</code> at the top-left corner, we check each number from <code>1</code> to <code>n^2 - 1</code> to ensure that it can be reached from the previous number through a valid knight&rsquo;s move. If at any point a valid move is not found, we return <code>false</code>. If all numbers satisfy the knight’s move condition, the grid is valid, and we return <code>true</code>.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<h4 id="1-mapping-the-grid-positions">1. <strong>Mapping the Grid Positions</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, pair<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;</span> mp;
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> grid.size();
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>; j <span style="color:#666">&lt;</span> n; j<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>        mp[grid[i][j]] <span style="color:#666">=</span> {i, j};
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>We create a <code>map</code> where the key is the number in the grid, and the value is a pair representing the row and column of that number.</li>
<li>The <code>grid.size()</code> gives us the dimension <code>n</code> of the <code>n x n</code> grid.</li>
<li>We iterate through the grid, filling the map with the positions of each number.</li>
</ul>
<h4 id="2-initial-validation-for-position-of-0">2. <strong>Initial Validation for Position of 0</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">if</span>(mp[<span style="color:#666">0</span>] <span style="color:#666">!=</span> make_pair(<span style="color:#666">0</span>, <span style="color:#666">0</span>)) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">false</span>;
</span></span></code></pre></div><ul>
<li>The number <code>0</code> must be located at the top-left corner of the grid, i.e., at position <code>(0, 0)</code>. If this is not the case, we immediately return <code>false</code>.</li>
</ul>
<h4 id="3-checking-the-validity-of-knights-moves">3. <strong>Checking the Validity of Knight&rsquo;s Moves</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> p <span style="color:#666">=</span> <span style="color:#666">0</span>, q <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">1</span>; i <span style="color:#666">&lt;</span> n <span style="color:#666">*</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">auto</span> it <span style="color:#666">=</span> mp[i];
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> x <span style="color:#666">=</span> it.first;
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> y <span style="color:#666">=</span> it.second;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>((abs(x <span style="color:#666">-</span> p) <span style="color:#666">==</span> <span style="color:#666">1</span> <span style="color:#666">&amp;&amp;</span> abs(y <span style="color:#666">-</span> q) <span style="color:#666">==</span> <span style="color:#666">2</span>) <span style="color:#666">||</span>
</span></span><span style="display:flex;"><span>       (abs(x <span style="color:#666">-</span> p) <span style="color:#666">==</span> <span style="color:#666">2</span> <span style="color:#666">&amp;&amp;</span> abs(y <span style="color:#666">-</span> q) <span style="color:#666">==</span> <span style="color:#666">1</span>)) {
</span></span><span style="display:flex;"><span>        p <span style="color:#666">=</span> x;
</span></span><span style="display:flex;"><span>        q <span style="color:#666">=</span> y;
</span></span><span style="display:flex;"><span>    } <span style="color:#a2f;font-weight:bold">else</span> <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">false</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>We initialize <code>p = 0</code> and <code>q = 0</code> to track the current position of the knight.</li>
<li>We iterate through the numbers <code>1</code> to <code>n^2 - 1</code>. For each number, we look up its position <code>(x, y)</code> in the <code>map</code>.</li>
<li>We then check if the move from the previous position <code>(p, q)</code> to the current position <code>(x, y)</code> satisfies the knight’s move condition using the formula mentioned earlier.
<ul>
<li>If the condition holds, we update <code>p</code> and <code>q</code> to the current position <code>(x, y)</code>.</li>
<li>If the condition does not hold, we return <code>false</code>, as this means the grid is not valid.</li>
</ul>
</li>
</ul>
<h4 id="4-final-return">4. <strong>Final Return</strong>:</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">true</span>;
</span></span></code></pre></div><ul>
<li>If we successfully check all the numbers and all moves are valid, we return <code>true</code>, indicating that the grid is valid.</li>
</ul>
<h3 id="complexity-analysis">Complexity Analysis</h3>
<ul>
<li>
<p><strong>Time Complexity</strong>:</p>
<ul>
<li><strong>Mapping the Grid</strong>: We loop through each cell of the <code>n x n</code> grid, which takes (O(n^2)).</li>
<li><strong>Checking Validity of Moves</strong>: We loop through the numbers from <code>1</code> to <code>n^2 - 1</code>, and for each number, we check if it can be reached from the previous one. This check involves a constant-time lookup in the map and some constant-time arithmetic, so this part takes (O(n^2)) as well.</li>
<li>Thus, the total time complexity is (O(n^2)), where <code>n</code> is the grid size.</li>
</ul>
</li>
<li>
<p><strong>Space Complexity</strong>:</p>
<ul>
<li>The map <code>mp</code> stores <code>n^2</code> key-value pairs, so the space complexity is (O(n^2)).</li>
<li>The rest of the space used by variables is constant, so the overall space complexity is (O(n^2)).</li>
</ul>
</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>This solution efficiently checks if the numbers in the <code>n x n</code> grid follow a valid knight&rsquo;s move sequence. By using a map to store the positions of each number, we can quickly verify whether each number can be reached from the previous one using valid knight moves. The algorithm runs in (O(n^2)) time, which is optimal for a grid of size <code>n x n</code>, and uses (O(n^2)) space to store the positions. This approach is both time-efficient and space-efficient for solving the problem.</p>
<p><a href="https://leetcode.com/problems/check-knight-tour-configuration/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/OBht8NT_09c?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
