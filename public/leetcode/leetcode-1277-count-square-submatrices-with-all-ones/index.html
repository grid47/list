<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 1277: Count Square Submatrices with All Ones | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1277: Count Square Submatrices with All Ones">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1277: Count Square Submatrices with All Ones in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-1277-count-square-submatrices-with-all-ones/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1277: Count Square Submatrices with All Ones">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1277: Count Square Submatrices with All Ones in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-07-02T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Dynamic Programming">
    <meta property="article:tag" content="Matrix">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 1277: Count Square Submatrices with All Ones</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode130s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> countSquares(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> matrix) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>, m <span style="color:#666">=</span> matrix.size(), n <span style="color:#666">=</span> matrix[<span style="color:#666">0</span>].size();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> m; i<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>; j <span style="color:#666">&lt;</span> n; j<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(matrix[i][j] <span style="color:#666">&amp;&amp;</span> i <span style="color:#666">&amp;&amp;</span> j)
</span></span><span style="display:flex;"><span>            matrix[i][j] <span style="color:#666">+=</span> min({matrix[i <span style="color:#666">-</span> <span style="color:#666">1</span>][j], matrix[i <span style="color:#666">-</span><span style="color:#666">1</span>][j<span style="color:#666">-</span><span style="color:#666">1</span>], matrix[i][j <span style="color:#666">-</span><span style="color:#666">1</span>]});
</span></span><span style="display:flex;"><span>            res <span style="color:#666">+=</span> matrix[i][j];
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem at hand is to count the total number of square submatrices that have all 1s in a given binary matrix. A square submatrix is defined as a collection of elements arranged in a square shape, where all elements in that square are equal to 1. For example, in the matrix below:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>1 0 1
</span></span><span style="display:flex;"><span>1 1 1
</span></span><span style="display:flex;"><span>1 1 1
</span></span></code></pre></div><p>The square submatrices of 1s are:</p>
<ul>
<li>Four 1x1 squares (each individual &lsquo;1&rsquo;).</li>
<li>One 2x2 square (the center four &lsquo;1&rsquo;s).</li>
<li>One 3x3 square (the entire 3x3 matrix).</li>
</ul>
<p>In this case, the function should return 13 as the total count of these square submatrices.</p>
<h3 id="approach">Approach</h3>
<p>To solve the problem efficiently, we will use dynamic programming. The idea is to iterate through the matrix while maintaining a count of the largest square that can end at each cell. The key observation is:</p>
<ul>
<li>If the current cell (i, j) in the matrix is <code>1</code>, the size of the largest square submatrix ending at that cell can be determined by the minimum of the squares that can end at the adjacent cells:
<ul>
<li>Directly above (i-1, j)</li>
<li>Directly to the left (i, j-1)</li>
<li>Diagonally upper-left (i-1, j-1)</li>
</ul>
</li>
</ul>
<p>Thus, for each cell <code>(i, j)</code>, if <code>matrix[i][j] == 1</code>, we can update it to the size of the largest square that can end at that position by taking:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>matrix[i][j] = 1 + min(matrix[i-1][j], matrix[i][j-1], matrix[i-1][j-1])
</span></span></code></pre></div><p>After updating, we will add the size of the square ending at that cell to our total count.</p>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> countSquares(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> matrix) {
</span></span></code></pre></div><ul>
<li><strong>Line 1-2</strong>: We define a class <code>Solution</code> and start the <code>countSquares</code> method, which takes a reference to a 2D vector <code>matrix</code> as input.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>, m <span style="color:#666">=</span> matrix.size(), n <span style="color:#666">=</span> matrix[<span style="color:#666">0</span>].size();
</span></span></code></pre></div><ul>
<li><strong>Line 3</strong>: We initialize <code>res</code> to zero to keep track of the total count of square submatrices. We also retrieve the dimensions of the matrix <code>m</code> (number of rows) and <code>n</code> (number of columns).</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> m; i<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>; j <span style="color:#666">&lt;</span> n; j<span style="color:#666">++</span>) {
</span></span></code></pre></div><ul>
<li><strong>Line 4-6</strong>: We begin nested loops to traverse through each cell of the matrix. The outer loop iterates through each row <code>i</code>, while the inner loop iterates through each column <code>j</code>.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(matrix[i][j] <span style="color:#666">&amp;&amp;</span> i <span style="color:#666">&amp;&amp;</span> j)
</span></span></code></pre></div><ul>
<li><strong>Line 7</strong>: We check if the current cell <code>matrix[i][j]</code> is <code>1</code> and ensure that we are not on the first row or first column (i.e., <code>i</code> and <code>j</code> should be greater than 0). This is necessary because a square cannot extend into non-existent indices.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>            matrix[i][j] <span style="color:#666">+=</span> min({matrix[i <span style="color:#666">-</span> <span style="color:#666">1</span>][j], matrix[i <span style="color:#666">-</span><span style="color:#666">1</span>][j<span style="color:#666">-</span><span style="color:#666">1</span>], matrix[i][j <span style="color:#666">-</span><span style="color:#666">1</span>});
</span></span></code></pre></div><ul>
<li><strong>Line 8</strong>: If the above condition is satisfied, we update the current cell <code>matrix[i][j]</code>. We add the minimum of the three adjacent cells to <code>matrix[i][j]</code>. The operation <code>min({matrix[i - 1][j], matrix[i -1][j-1], matrix[i][j -1]})</code> calculates the size of the largest square submatrix that can be formed up to this point, effectively building the size of the square ending at <code>matrix[i][j]</code>.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>            res <span style="color:#666">+=</span> matrix[i][j];
</span></span></code></pre></div><ul>
<li><strong>Line 9</strong>: We add the updated value of <code>matrix[i][j]</code> to <code>res</code>. This count represents the number of squares of various sizes that end at that cell.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ul>
<li><strong>Line 10-12</strong>: After completing the iteration through all cells, we return the total count stored in <code>res</code>.</li>
</ul>
<h3 id="complexity-analysis">Complexity Analysis</h3>
<ol>
<li>
<p><strong>Time Complexity</strong>:</p>
<ul>
<li>The time complexity of this algorithm is (O(m \times n)), where (m) is the number of rows and (n) is the number of columns in the matrix. This is because we traverse each cell of the matrix exactly once.</li>
</ul>
</li>
<li>
<p><strong>Space Complexity</strong>:</p>
<ul>
<li>The space complexity is (O(1)) if we consider the input matrix itself as the only space used. We are modifying the matrix in place to store the counts, and no additional data structures that scale with input size are used.</li>
</ul>
</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>The <code>countSquares</code> function effectively counts the number of square submatrices with all 1s by employing a dynamic programming approach. This method is efficient, with both time and space complexities being manageable even for larger matrices. The algorithm smartly leverages the relationships between neighboring cells to build up the solution incrementally, demonstrating the power of dynamic programming in solving combinatorial problems.</p>
<p>By following this structured breakdown, readers can appreciate not only how the solution works but also its efficiency and the thought process behind it. This insight into the code will be beneficial for anyone looking to understand dynamic programming or tackle similar problems in algorithm design.</p>
<p><a href="https://leetcode.com/problems/count-square-submatrices-with-all-ones/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/PBZCmMugu5Q?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
