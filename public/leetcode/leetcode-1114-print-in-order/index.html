<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 1114: Print in Order | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1114: Print in Order">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1114: Print in Order in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-1114-print-in-order/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1114: Print in Order">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1114: Print in Order in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-07-18T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Concurrency">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 1114: Print in Order</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode68s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Foo</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> curVal;
</span></span><span style="display:flex;"><span>    std<span style="color:#666">::</span>mutex mtx;
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    Foo() {
</span></span><span style="display:flex;"><span>        curVal <span style="color:#666">=</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">first</span>(function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> printFirst) {
</span></span><span style="display:flex;"><span>        mtx.lock();
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">// printFirst() outputs &#34;first&#34;. Do not change or remove this line.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        printFirst();
</span></span><span style="display:flex;"><span>        curVal<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>        mtx.unlock();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">second</span>(function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> printSecond) {
</span></span><span style="display:flex;"><span>        mtx.lock();
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">while</span>(curVal <span style="color:#666">!=</span> <span style="color:#666">2</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            mtx.unlock();
</span></span><span style="display:flex;"><span>            mtx.lock();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        mtx.unlock();
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">// printSecond() outputs &#34;second&#34;. Do not change or remove this line.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        printSecond();
</span></span><span style="display:flex;"><span>        curVal<span style="color:#666">++</span> ;       
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">third</span>(function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> printThird) {
</span></span><span style="display:flex;"><span>        mtx.lock();
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">while</span>(curVal <span style="color:#666">!=</span> <span style="color:#666">3</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            mtx.unlock();
</span></span><span style="display:flex;"><span>            mtx.lock();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        mtx.unlock();
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">// printThird() outputs &#34;third&#34;. Do not change or remove this line.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        printThird();
</span></span><span style="display:flex;"><span>        curVal<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The task is to implement a class <code>Foo</code> that can synchronize the execution of three methods: <code>first</code>, <code>second</code>, and <code>third</code>. The goal is to ensure that:</p>
<ol>
<li>The <code>first</code> method prints &ldquo;first&rdquo;.</li>
<li>The <code>second</code> method prints &ldquo;second&rdquo;.</li>
<li>The <code>third</code> method prints &ldquo;third&rdquo;.</li>
</ol>
<p>The challenge is to ensure that these methods are called in the correct order: <code>first</code> must be called before <code>second</code>, and <code>second</code> must be called before <code>third</code>. The class must be thread-safe, meaning that multiple threads may call these methods concurrently without leading to race conditions or incorrect ordering.</p>
<h3 id="approach">Approach</h3>
<p>To solve this problem, we can utilize a mutex for synchronization and an integer to keep track of the current method being executed. The main steps involved in the implementation are:</p>
<ol>
<li><strong>Initialization</strong>: A mutex is used to protect shared state, and an integer variable (<code>curVal</code>) is initialized to 1 to indicate that the <code>first</code> method should be called first.</li>
<li><strong>Method Implementations</strong>:
<ul>
<li>In the <code>first</code> method, the thread will lock the mutex, execute the provided function to print &ldquo;first&rdquo;, increment the tracking variable, and unlock the mutex.</li>
<li>In the <code>second</code> method, the thread will lock the mutex and check whether it is its turn to execute. If not, it will repeatedly unlock and relock the mutex until it is allowed to print &ldquo;second&rdquo;.</li>
<li>In the <code>third</code> method, a similar approach is taken, ensuring that it waits until <code>second</code> has been executed.</li>
</ul>
</li>
<li><strong>Synchronization</strong>: Proper locking and unlocking of the mutex ensures that the shared variable is accessed in a thread-safe manner, preventing race conditions.</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<ol>
<li>
<p><strong>Class Definition</strong>: The <code>Foo</code> class is defined with private members to manage state and synchronization.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Foo</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> curVal;      <span style="color:#080;font-style:italic">// Tracks the current method that can execute
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    std<span style="color:#666">::</span>mutex mtx;  <span style="color:#080;font-style:italic">// Mutex for synchronizing access
</span></span></span></code></pre></div></li>
<li>
<p><strong>Constructor</strong>: The constructor initializes <code>curVal</code> to 1, indicating that the <code>first</code> method should be executed first.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>        Foo() {
</span></span><span style="display:flex;"><span>            curVal <span style="color:#666">=</span> <span style="color:#666">1</span>;  <span style="color:#080;font-style:italic">// Start with curVal set to 1
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        }
</span></span></code></pre></div></li>
<li>
<p><strong>First Method</strong>: The <code>first</code> method locks the mutex, prints &ldquo;first&rdquo;, increments <code>curVal</code>, and then unlocks the mutex.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">first</span>(function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> printFirst) {
</span></span><span style="display:flex;"><span>            mtx.lock();          <span style="color:#080;font-style:italic">// Lock the mutex
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            printFirst();        <span style="color:#080;font-style:italic">// Print &#34;first&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            curVal<span style="color:#666">++</span>;            <span style="color:#080;font-style:italic">// Move to the next method
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            mtx.unlock();        <span style="color:#080;font-style:italic">// Unlock the mutex
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        }
</span></span></code></pre></div></li>
<li>
<p><strong>Second Method</strong>: The <code>second</code> method locks the mutex and uses a while loop to check whether it&rsquo;s the correct turn to execute. If not, it releases the lock and rechecks.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">second</span>(function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> printSecond) {
</span></span><span style="display:flex;"><span>            mtx.lock();          <span style="color:#080;font-style:italic">// Lock the mutex
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#a2f;font-weight:bold">while</span>(curVal <span style="color:#666">!=</span> <span style="color:#666">2</span>) { <span style="color:#080;font-style:italic">// Wait until it&#39;s this method&#39;s turn
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                mtx.unlock();    <span style="color:#080;font-style:italic">// Unlock and wait
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                mtx.lock();      <span style="color:#080;font-style:italic">// Lock again for rechecking
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            }
</span></span><span style="display:flex;"><span>            mtx.unlock();        <span style="color:#080;font-style:italic">// Unlock the mutex
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            printSecond();       <span style="color:#080;font-style:italic">// Print &#34;second&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            curVal<span style="color:#666">++</span>;            <span style="color:#080;font-style:italic">// Move to the next method
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        }
</span></span></code></pre></div></li>
<li>
<p><strong>Third Method</strong>: The <code>third</code> method follows the same pattern as <code>second</code>, waiting for <code>curVal</code> to equal 3 before proceeding.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">third</span>(function<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">void</span>()<span style="color:#666">&gt;</span> printThird) {
</span></span><span style="display:flex;"><span>            mtx.lock();          <span style="color:#080;font-style:italic">// Lock the mutex
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#a2f;font-weight:bold">while</span>(curVal <span style="color:#666">!=</span> <span style="color:#666">3</span>) { <span style="color:#080;font-style:italic">// Wait until it&#39;s this method&#39;s turn
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                mtx.unlock();    <span style="color:#080;font-style:italic">// Unlock and wait
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                mtx.lock();      <span style="color:#080;font-style:italic">// Lock again for rechecking
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            }
</span></span><span style="display:flex;"><span>            mtx.unlock();        <span style="color:#080;font-style:italic">// Unlock the mutex
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            printThird();        <span style="color:#080;font-style:italic">// Print &#34;third&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            curVal<span style="color:#666">++</span>;            <span style="color:#080;font-style:italic">// Increment to finish
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div></li>
</ol>
<h3 id="complexity-analysis">Complexity Analysis</h3>
<ul>
<li><strong>Time Complexity</strong>: The time complexity of each method is (O(n)) in the worst-case scenario, where (n) is the number of threads waiting for the mutex to be available. However, since the methods are executed sequentially in a correct order, the average time is effectively constant per call.</li>
<li><strong>Space Complexity</strong>: The space complexity is (O(1)) since we are using a fixed amount of space for variables like <code>curVal</code> and <code>mtx</code>, regardless of the number of threads or method calls.</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>The provided C++ code effectively implements a solution to synchronize the execution order of three methods using a mutex and an integer to track the current state. The design ensures that <code>first</code> is always called before <code>second</code>, and <code>second</code> is always called before <code>third</code>, achieving the desired output sequence without any race conditions or deadlocks.</p>
<p>This implementation serves as a practical example of how to handle synchronization in multithreaded programming. The use of mutexes and condition checks demonstrates an essential pattern in concurrent programming, making it a valuable reference for developers dealing with similar challenges.</p>
<p>Overall, the solution is both efficient and straightforward, showcasing effective synchronization techniques in C++. Readers interested in thread management and method synchronization will find this example beneficial for understanding key concepts in concurrent programming.</p>
<p><a href="https://leetcode.com/problems/print-in-order/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>
<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
