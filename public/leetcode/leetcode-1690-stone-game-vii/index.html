<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 1690: Stone Game VII | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1690: Stone Game VII">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1690: Stone Game VII in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-1690-stone-game-vii/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1690: Stone Game VII">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1690: Stone Game VII in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-05-22T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Math">
    <meta property="article:tag" content="Dynamic Programming">
    <meta property="article:tag" content="Game Theory">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 1690: Stone Game VII</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode338s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> memo[<span style="color:#666">1001</span>][<span style="color:#666">1001</span>] <span style="color:#666">=</span> {};
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">dp</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> s, <span style="color:#0b0;font-weight:bold">int</span> i, <span style="color:#0b0;font-weight:bold">int</span> j, <span style="color:#0b0;font-weight:bold">int</span> sum) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">==</span> j) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> memo[i][j] <span style="color:#666">?</span> memo[i][j] <span style="color:#666">:</span> memo[i][j] <span style="color:#666">=</span> max(sum <span style="color:#666">-</span> s[i] <span style="color:#666">-</span> dp(s, i <span style="color:#666">+</span> <span style="color:#666">1</span>, j, sum <span style="color:#666">-</span> s[i]),
</span></span><span style="display:flex;"><span>                                            sum <span style="color:#666">-</span> s[j] <span style="color:#666">-</span> dp(s, i, j <span style="color:#666">-</span> <span style="color:#666">1</span>, sum <span style="color:#666">-</span> s[j]));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">stoneGameVII</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> s) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> s.size();
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> dp(s, <span style="color:#666">0</span>,n<span style="color:#666">-</span><span style="color:#666">1</span>, accumulate(begin(s), end(s), <span style="color:#666">0</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem at hand is from a game theory context where two players, Alice and Bob, play a game with stones arranged in a line. Each player can remove either the leftmost or the rightmost stone in their turn, and their goal is to maximize their total score. The score is calculated based on the values of the stones removed. The objective is to determine the maximum score difference that Alice can achieve over Bob by strategically removing stones.</p>
<h3 id="approach">Approach</h3>
<p>To solve this problem, we can use a dynamic programming approach, specifically memoization to optimize our recursive solution. The key ideas behind our approach are:</p>
<ol>
<li>
<p><strong>Recursive Function</strong>: We define a recursive function <code>dp(i, j)</code> that calculates the maximum score difference between Alice and Bob if Alice is playing optimally with the remaining stones from index <code>i</code> to index <code>j</code>.</p>
</li>
<li>
<p><strong>Base Case</strong>: When there is only one stone left (i.e., <code>i == j</code>), the player cannot make a move, resulting in a score difference of <code>0</code>.</p>
</li>
<li>
<p><strong>State Transition</strong>: For each state defined by the indices <code>i</code> and <code>j</code>, we calculate the maximum score difference by considering the two options available to Alice:</p>
<ul>
<li>If Alice removes the leftmost stone (s[i]), then Bob will have the remaining stones from <code>i + 1</code> to <code>j</code>.</li>
<li>If Alice removes the rightmost stone (s[j]), then Bob will have the remaining stones from <code>i</code> to <code>j - 1</code>.</li>
</ul>
<p>We calculate the scores accordingly, keeping in mind the total sum of the stones left after each move.</p>
</li>
<li>
<p><strong>Memoization</strong>: We store the results of subproblems in a 2D array <code>memo</code> to avoid redundant calculations.</p>
</li>
<li>
<p><strong>Final Calculation</strong>: The final score difference is obtained by calling the <code>dp</code> function with the initial indices and the total sum of stones.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<p>Here is the complete breakdown of the code:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> memo[<span style="color:#666">1001</span>][<span style="color:#666">1001</span>] <span style="color:#666">=</span> {};
</span></span></code></pre></div><ul>
<li><strong>Class Definition</strong>: We define a class <code>Solution</code> containing a member array <code>memo</code> for memoization.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">dp</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> s, <span style="color:#0b0;font-weight:bold">int</span> i, <span style="color:#0b0;font-weight:bold">int</span> j, <span style="color:#0b0;font-weight:bold">int</span> sum) {
</span></span></code></pre></div><ul>
<li><strong>Recursive Function</strong>: We define the <code>dp</code> function that takes a vector of stones <code>s</code>, the current indices <code>i</code> and <code>j</code>, and the <code>sum</code> of the values of remaining stones.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">==</span> j) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        }
</span></span></code></pre></div><ul>
<li><strong>Base Case</strong>: If there is only one stone left (when <code>i</code> equals <code>j</code>), the function returns <code>0</code>, as no score can be obtained.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> memo[i][j] <span style="color:#666">?</span> memo[i][j] <span style="color:#666">:</span> memo[i][j] <span style="color:#666">=</span> max(sum <span style="color:#666">-</span> s[i] <span style="color:#666">-</span> dp(s, i <span style="color:#666">+</span> <span style="color:#666">1</span>, j, sum <span style="color:#666">-</span> s[i]),
</span></span><span style="display:flex;"><span>                                            sum <span style="color:#666">-</span> s[j] <span style="color:#666">-</span> dp(s, i, j <span style="color:#666">-</span> <span style="color:#666">1</span>, sum <span style="color:#666">-</span> s[j]));
</span></span></code></pre></div><ul>
<li><strong>Memoization Check</strong>: We check if the result for this state <code>memo[i][j]</code> has already been computed. If it has, we return that value.</li>
<li><strong>Score Calculation</strong>:
<ul>
<li>If Alice removes the leftmost stone (<code>s[i]</code>), Bob will play optimally with the remaining stones, so we subtract <code>s[i]</code> from the total <code>sum</code> and call <code>dp</code> with the new indices <code>(i + 1, j)</code>.</li>
<li>If Alice removes the rightmost stone (<code>s[j]</code>), we similarly update the sum and call <code>dp</code> with <code>(i, j - 1)</code>.</li>
</ul>
</li>
<li><strong>Maximum Calculation</strong>: We take the maximum of the two scenarios to ensure Alice is playing optimally.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">stoneGameVII</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> s) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> s.size();
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> dp(s, <span style="color:#666">0</span>,n<span style="color:#666">-</span><span style="color:#666">1</span>, accumulate(begin(s), end(s), <span style="color:#666">0</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ul>
<li><strong>Main Function</strong>: The <code>stoneGameVII</code> function initializes the game by calculating the total sum of the stones and calling the <code>dp</code> function with the full range of indices (from <code>0</code> to <code>n-1</code>).</li>
</ul>
<h3 id="complexity">Complexity</h3>
<ul>
<li>
<p><strong>Time Complexity</strong>: The time complexity is (O(n^2)) due to the nested recursive calls for each state defined by indices <code>i</code> and <code>j</code>. Each subproblem is computed once thanks to memoization.</p>
</li>
<li>
<p><strong>Space Complexity</strong>: The space complexity is (O(n^2)) for the memoization table, in addition to the space used for the input vector.</p>
</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>The solution effectively utilizes dynamic programming with memoization to solve the stone game problem, allowing Alice to maximize her score against Bob.</p>
<p>Key insights from the solution include:</p>
<ol>
<li>
<p><strong>Optimal Play Strategy</strong>: The recursive structure captures the optimal choices made by Alice at each step, ensuring that she minimizes Bob&rsquo;s potential score while maximizing her own.</p>
</li>
<li>
<p><strong>Efficiency Through Memoization</strong>: By storing the results of previously computed states, we significantly reduce the computational overhead, allowing the solution to handle larger input sizes effectively.</p>
</li>
<li>
<p><strong>Understanding Game Theory</strong>: The problem illustrates fundamental concepts in game theory, including optimal strategies, decision making, and the impact of choices on future outcomes.</p>
</li>
</ol>
<p>In summary, this code serves as a robust example of applying recursive strategies and dynamic programming to solve competitive scenarios, providing valuable insights into optimizing player strategies in game-theoretic contexts.</p>
<p><a href="https://leetcode.com/problems/stone-game-vii/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/cOGliK5brbQ?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
