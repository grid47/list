<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 1670: Design Front Middle Back Queue | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1670: Design Front Middle Back Queue">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1670: Design Front Middle Back Queue in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-1670-design-front-middle-back-queue/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1670: Design Front Middle Back Queue">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1670: Design Front Middle Back Queue in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-05-24T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Linked List">
    <meta property="article:tag" content="Design">
    <meta property="article:tag" content="Queue">
    <meta property="article:tag" content="Data Stream">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 1670: Design Front Middle Back Queue</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode324s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">FrontMiddleBackQueue</span> {
</span></span><span style="display:flex;"><span>    deque<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> a, b;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">a2b</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span> (a.size() <span style="color:#666">&lt;=</span> b.size()) <span style="color:#a2f;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>        b.push_front(a.back());
</span></span><span style="display:flex;"><span>        a.pop_back();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">/* keep operations around front of b and back of a */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">b2a</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span> (b.size() <span style="color:#666">&lt;=</span> a.size() <span style="color:#666">+</span> <span style="color:#666">1</span>) <span style="color:#a2f;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>        a.push_back(b.front());
</span></span><span style="display:flex;"><span>        b.pop_front();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    FrontMiddleBackQueue() {}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">pushFront</span>(<span style="color:#0b0;font-weight:bold">int</span> val) {
</span></span><span style="display:flex;"><span>        a.push_front(val);
</span></span><span style="display:flex;"><span>        a2b();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">pushMiddle</span>(<span style="color:#0b0;font-weight:bold">int</span> val) {
</span></span><span style="display:flex;"><span>        a.push_back(val);
</span></span><span style="display:flex;"><span>        a2b();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">pushBack</span>(<span style="color:#0b0;font-weight:bold">int</span> val) {
</span></span><span style="display:flex;"><span>        b.push_back(val);
</span></span><span style="display:flex;"><span>        b2a();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">popFront</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(a.empty() <span style="color:#666">&amp;&amp;</span> b.empty()) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">-</span><span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> ans;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(a.empty()) {
</span></span><span style="display:flex;"><span>            ans <span style="color:#666">=</span> b.front();
</span></span><span style="display:flex;"><span>            b.pop_front();
</span></span><span style="display:flex;"><span>        } <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            ans <span style="color:#666">=</span> a.front();
</span></span><span style="display:flex;"><span>            a.pop_front();
</span></span><span style="display:flex;"><span>            b2a();          
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> ans;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">popMiddle</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(a.empty() <span style="color:#666">&amp;&amp;</span> b.empty()) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">-</span><span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> ans;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(a.size() <span style="color:#666">==</span> b.size()) {
</span></span><span style="display:flex;"><span>            ans <span style="color:#666">=</span> a.back();
</span></span><span style="display:flex;"><span>            a.pop_back();
</span></span><span style="display:flex;"><span>        } <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>            ans <span style="color:#666">=</span> b.front();
</span></span><span style="display:flex;"><span>            b.pop_front();      
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> ans;        
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">popBack</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(a.empty() <span style="color:#666">&amp;&amp;</span> b.empty()) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">-</span><span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> ans <span style="color:#666">=</span> b.back();
</span></span><span style="display:flex;"><span>        b.pop_back();
</span></span><span style="display:flex;"><span>        a2b();
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> ans;       
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * Your FrontMiddleBackQueue object will be instantiated and called as such:
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * FrontMiddleBackQueue* obj = new FrontMiddleBackQueue();
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * obj-&gt;pushFront(val);
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * obj-&gt;pushMiddle(val);
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * obj-&gt;pushBack(val);
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * int param_4 = obj-&gt;popFront();
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * int param_5 = obj-&gt;popMiddle();
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * int param_6 = obj-&gt;popBack();
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> */</span></span></span></code></pre></div></h2>
<p>The <code>FrontMiddleBackQueue</code> class is a data structure that supports efficient insertion and removal of elements from both ends and the middle. This class is particularly useful in scenarios where operations on both ends of the queue and the middle are frequent.</p>
<h3 id="problem-statement">Problem Statement</h3>
<p>The challenge is to implement a queue that allows for insertion and removal of elements at the front, middle, and back. Traditional queues support insertion and removal only at the front and back, but this problem requires additional functionality to manage the middle efficiently.</p>
<h3 id="approach">Approach</h3>
<p>To achieve the desired functionality, the <code>FrontMiddleBackQueue</code> uses two deques, <code>a</code> and <code>b</code>. The idea is to maintain an invariant where <code>a</code> holds the first half of the elements and <code>b</code> holds the second half. This design allows for efficient operations as follows:</p>
<ol>
<li>
<p><strong>Push Operations</strong>:</p>
<ul>
<li><strong><code>pushFront(int val)</code></strong>: This method adds an element to the front of the queue. The element is first added to deque <code>a</code>. If deque <code>a</code> becomes larger than deque <code>b</code>, we move the last element of <code>a</code> to the front of <code>b</code> to maintain balance.</li>
<li><strong><code>pushMiddle(int val)</code></strong>: To insert an element in the middle, we add the element to deque <code>a</code> and then ensure the sizes of <code>a</code> and <code>b</code> are balanced using the <code>a2b()</code> method.</li>
<li><strong><code>pushBack(int val)</code></strong>: This method adds an element to the back of the queue by simply inserting it into deque <code>b</code>. After the insertion, the method checks if <code>b</code> has more than one element compared to <code>a</code>, and if so, it moves the front of <code>b</code> to the back of <code>a</code>.</li>
</ul>
</li>
<li>
<p><strong>Pop Operations</strong>:</p>
<ul>
<li><strong><code>popFront()</code></strong>: This method removes and returns the element from the front of the queue. If deque <code>a</code> is empty, it retrieves the front element from <code>b</code>. If <code>a</code> has elements, it pops from <code>a</code> and ensures that the sizes of the deques are balanced afterward.</li>
<li><strong><code>popMiddle()</code></strong>: To remove the middle element, the method checks the sizes of both deques. If they are equal, it removes the last element from <code>a</code>. If <code>b</code> has more elements, it removes the front element from <code>b</code>.</li>
<li><strong><code>popBack()</code></strong>: This method removes the last element from the queue. It pops from <code>b</code> and ensures the sizes are balanced by potentially moving an element from <code>a</code> to <code>b</code>.</li>
</ul>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<ol>
<li><strong>Data Structures</strong>: The use of two deques (<code>a</code> and <code>b</code>) allows for efficient operations by keeping track of elements in a way that facilitates quick access and modification.</li>
<li><strong>Push Operations</strong>:
<ul>
<li>Each push operation adjusts the deques&rsquo; sizes to keep them balanced, ensuring that no more than one extra element is held in one deque compared to the other.</li>
</ul>
</li>
<li><strong>Pop Operations</strong>:
<ul>
<li>The pop methods also maintain the invariant by checking the sizes of the deques and making necessary adjustments after removing elements. This ensures that both deques remain balanced.</li>
</ul>
</li>
</ol>
<p>The implementation effectively combines the efficiency of deques with careful management of their sizes to allow for the required operations in constant time on average.</p>
<h3 id="complexity">Complexity</h3>
<p>The average time complexity for all operations (<code>pushFront</code>, <code>pushMiddle</code>, <code>pushBack</code>, <code>popFront</code>, <code>popMiddle</code>, <code>popBack</code>) is O(1), thanks to the use of deques which provide efficient operations at both ends. The balancing operations (<code>a2b</code> and <code>b2a</code>) involve at most one element transfer, keeping the overall operations efficient.</p>
<h3 id="conclusion">Conclusion</h3>
<p>The <code>FrontMiddleBackQueue</code> is a well-designed data structure that effectively addresses the need for efficient insertions and deletions at the front, middle, and back of a queue. By leveraging two deques and ensuring their sizes remain balanced, this class provides a versatile and powerful solution for managing a collection of elements with varied access requirements. The careful consideration of operation efficiency makes it an excellent choice for applications that require dynamic and flexible queue management.</p>
<p><a href="https://leetcode.com/problems/design-front-middle-back-queue/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/HSOiUhfXUTg?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
