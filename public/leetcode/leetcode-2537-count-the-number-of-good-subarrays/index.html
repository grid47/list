<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 2537: Count the Number of Good Subarrays | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 2537: Count the Number of Good Subarrays">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 2537: Count the Number of Good Subarrays in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-2537-count-the-number-of-good-subarrays/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 2537: Count the Number of Good Subarrays">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 2537: Count the Number of Good Subarrays in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-02-27T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Hash Table">
    <meta property="article:tag" content="Sliding Window">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 2537: Count the Number of Good Subarrays</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode821s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> countGood(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> nums, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>, tmp <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> nums.size();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> mp, cnt;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            tmp <span style="color:#666">+=</span> (cnt[nums[i]]);
</span></span><span style="display:flex;"><span>            cnt[nums[i]]<span style="color:#666">++</span>;            
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">while</span>(j <span style="color:#666">&lt;=</span> i <span style="color:#666">&amp;&amp;</span> tmp <span style="color:#666">&gt;=</span> k) {
</span></span><span style="display:flex;"><span>                res<span style="color:#666">+=</span> (n <span style="color:#666">-</span> i);
</span></span><span style="display:flex;"><span>                cnt[nums[j]]<span style="color:#666">--</span>;
</span></span><span style="display:flex;"><span>                tmp <span style="color:#666">-=</span> cnt[nums[j]];
</span></span><span style="display:flex;"><span>                j<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem is asking us to count the number of subarrays from a given array <code>nums</code> where the number of pairs <code>(nums[i], nums[j])</code> where <code>i &lt; j</code> and <code>nums[i] == nums[j]</code> is at least <code>k</code>. The challenge is to compute this count efficiently given the constraints.</p>
<h3 id="approach">Approach</h3>
<p>To solve this problem efficiently, we can utilize a <strong>sliding window technique</strong> combined with <strong>hash maps (or dictionaries)</strong> to track the frequencies of elements within the current window. This allows us to efficiently calculate how many valid subarrays exist where the count of pairs <code>(nums[i], nums[j])</code> (i.e., duplicate numbers) is at least <code>k</code>.</p>
<h4 id="key-observations">Key Observations:</h4>
<ol>
<li>For each element in the array, we maintain a sliding window defined by indices <code>i</code> and <code>j</code>. The window expands by incrementing <code>i</code> (the right side of the window) and contracts by incrementing <code>j</code> (the left side of the window).</li>
<li>The variable <code>tmp</code> will store the number of duplicate pairs that exist in the current window. Specifically, <code>tmp</code> keeps track of the total number of pairs formed by duplicate numbers in the window.</li>
<li>Whenever the number of pairs <code>tmp</code> is greater than or equal to <code>k</code>, we calculate how many valid subarrays exist in the current window and add this count to the result.</li>
<li>The sliding window is adjusted by moving <code>j</code> to the right to reduce the number of pairs whenever <code>tmp &gt;= k</code>.</li>
</ol>
<h4 id="algorithm">Algorithm:</h4>
<ol>
<li><strong>Sliding Window</strong>: Start with an empty window. Expand the window by iterating over <code>i</code> (right boundary). For each <code>i</code>, add the element <code>nums[i]</code> to the frequency map <code>cnt</code> and update the number of pairs <code>tmp</code>.</li>
<li><strong>Tracking Pairs</strong>: The number of duplicate pairs increases as you encounter duplicate elements in the window. For each duplicate number <code>x</code>, the number of pairs contributed by this number is incremented by <code>cnt[x]</code>.</li>
<li><strong>Counting Valid Subarrays</strong>: If <code>tmp</code> exceeds or equals <code>k</code>, then all subarrays starting from <code>j</code> to <code>i</code> are valid. The number of such subarrays is <code>(n - i)</code>, where <code>n</code> is the size of the array.</li>
<li><strong>Shrinking the Window</strong>: After counting valid subarrays, increment <code>j</code> to reduce the window size and keep the number of pairs <code>tmp</code> below <code>k</code>.</li>
</ol>
<p>This method allows us to efficiently compute the result without explicitly checking all subarrays.</p>
<h3 id="code-breakdown">Code Breakdown</h3>
<h4 id="step-1-initialize-variables">Step 1: Initialize Variables</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>, tmp <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> nums.size();
</span></span><span style="display:flex;"><span>map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> mp, cnt;
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span></code></pre></div><ul>
<li><code>res</code>: Stores the final result, i.e., the number of valid subarrays.</li>
<li><code>tmp</code>: Tracks the number of pairs <code>(nums[i], nums[j])</code> that satisfy <code>i &lt; j</code> and <code>nums[i] == nums[j]</code>.</li>
<li><code>mp</code>: A frequency map (though not used in the code, it might be kept for debugging or future use).</li>
<li><code>cnt</code>: Another frequency map that tracks how many times each number appears in the current window.</li>
<li><code>j</code>: The left boundary of the sliding window.</li>
</ul>
<h4 id="step-2-iterating-over-the-array">Step 2: Iterating Over the Array</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    tmp <span style="color:#666">+=</span> (cnt[nums[i]]);
</span></span><span style="display:flex;"><span>    cnt[nums[i]]<span style="color:#666">++</span>;            
</span></span></code></pre></div><ul>
<li>Loop over each element <code>nums[i]</code>.</li>
<li>For each element, update <code>tmp</code> by adding the number of pairs formed by <code>nums[i]</code>. This is the value <code>cnt[nums[i]]</code> because if <code>nums[i]</code> appears <code>m</code> times in the window, the number of pairs formed is <code>m</code>.</li>
<li>Increment the frequency of <code>nums[i]</code> in <code>cnt</code>.</li>
</ul>
<h4 id="step-3-shrinking-the-window">Step 3: Shrinking the Window</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">while</span>(j <span style="color:#666">&lt;=</span> i <span style="color:#666">&amp;&amp;</span> tmp <span style="color:#666">&gt;=</span> k) {
</span></span><span style="display:flex;"><span>    res<span style="color:#666">+=</span> (n <span style="color:#666">-</span> i);
</span></span><span style="display:flex;"><span>    cnt[nums[j]]<span style="color:#666">--</span>;
</span></span><span style="display:flex;"><span>    tmp <span style="color:#666">-=</span> cnt[nums[j]];
</span></span><span style="display:flex;"><span>    j<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>If the number of pairs <code>tmp</code> is greater than or equal to <code>k</code>, calculate the number of valid subarrays. All subarrays starting from <code>j</code> to <code>i</code> are valid, and the count of these subarrays is <code>(n - i)</code>.</li>
<li>After counting valid subarrays, decrement the count of <code>nums[j]</code> from <code>cnt</code> and adjust <code>tmp</code> accordingly by subtracting the number of pairs that <code>nums[j]</code> contributed.</li>
<li>Increment <code>j</code> to shrink the window and try to reduce <code>tmp</code>.</li>
</ul>
<h4 id="step-4-return-the-result">Step 4: Return the Result</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> res;
</span></span></code></pre></div><ul>
<li>After iterating through all elements and processing all subarrays, return the final count stored in <code>res</code>.</li>
</ul>
<h3 id="time-and-space-complexity">Time and Space Complexity</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<ol>
<li><strong>Iterating Over the Array</strong>: The outer loop runs over all elements in <code>nums</code>, i.e., <code>O(n)</code>, where <code>n</code> is the size of the array.</li>
<li><strong>Sliding Window Adjustment</strong>: The inner <code>while</code> loop is only executed when <code>tmp &gt;= k</code>, but each element is added to and removed from <code>cnt</code> at most once. Thus, the total number of operations in the inner loop is <code>O(n)</code> as well.</li>
<li><strong>Overall Time Complexity</strong>: The time complexity is <code>O(n)</code> due to the two-pointer approach and efficient frequency map updates.</li>
</ol>
<h4 id="space-complexity">Space Complexity:</h4>
<ol>
<li><strong>Frequency Maps</strong>: The space complexity is dominated by the <code>cnt</code> map, which stores the frequency of each number in the current window. In the worst case, there are <code>O(n)</code> unique elements, so the space complexity is <code>O(n)</code>.</li>
<li><strong>Overall Space Complexity</strong>: The space complexity is <code>O(n)</code> due to the frequency map.</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>This solution effectively uses the sliding window technique and frequency maps to solve the problem efficiently. By leveraging the sliding window approach, we avoid the need to examine all subarrays explicitly, which would be inefficient for larger arrays. Instead, we dynamically adjust the window size and count valid subarrays as we go, leading to an optimal time complexity of <code>O(n)</code>. This approach is both time-efficient and space-efficient, making it suitable for larger inputs within the problem&rsquo;s constraints.</p>
<p><a href="https://leetcode.com/problems/count-the-number-of-good-subarrays/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/X4wzXCe1wvs?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
