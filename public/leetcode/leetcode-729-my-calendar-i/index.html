<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 729: My Calendar I | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 729: My Calendar I">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 729: My Calendar I in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-729-my-calendar-i/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 729: My Calendar I">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 729: My Calendar I in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-08-26T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Binary Search">
    <meta property="article:tag" content="Design">
    <meta property="article:tag" content="Segment Tree">
    <meta property="article:tag" content="Ordered Set">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 729: My Calendar I</h1> 
            </div>
			<div class="article-post">
				<h2 id="hahahugoshortcode1276s0hbhb"><figure class="remote-image" style="text-align:center; margin: 0;">
    <div style="position: relative; width:900px; max-width:100%; padding-bottom:56.25%; overflow: hidden; border-radius:0px;">
      <img src="https://raw.githubusercontent.com/grid47/list-images/refs/heads/main/list/729.webp" 
           alt="A calendar where events are added, with each event softly glowing as it is scheduled." 
           style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
    </div>
    
      <figcaption style="font-size: 0.8em; font-weight: 300; color:#555; margin-top: 4px; line-height: 1.2;">
        Solution to LeetCode 729: My Calendar I Problem
      </figcaption>
    
  </figure>
  </h2>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1276s1hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">MyCalendar</span> {
</span></span><span style="display:flex;"><span>    map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> mp;
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    MyCalendar() {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">bool</span> <span style="color:#00a000">book</span>(<span style="color:#0b0;font-weight:bold">int</span> start, <span style="color:#0b0;font-weight:bold">int</span> end) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">auto</span> nxt <span style="color:#666">=</span> mp.upper_bound(start);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span> (nxt <span style="color:#666">!=</span> mp.end() <span style="color:#666">&amp;&amp;</span> (<span style="color:#666">*</span>nxt).second <span style="color:#666">&lt;</span> end) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">false</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        mp[end] <span style="color:#666">=</span> start;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">true</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * Your MyCalendar object will be instantiated and called as such:
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * MyCalendar* obj = new MyCalendar();
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * bool param_1 = obj-&gt;book(start,end);
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> */</span></span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>In this problem, we are tasked with implementing a calendar system that allows us to book events. Each event is defined by a start and end time, and we need to ensure that no two events overlap. The objective is to design a calendar system where we can efficiently check if a new event can be scheduled and, if so, add it to the calendar.</p>
<h3 id="approach">Approach</h3>
<p>The key challenge is to efficiently check if a new event overlaps with any previously booked event. We can achieve this by using a <strong>map (or balanced binary search tree)</strong> to store the end times as the keys and the start times as the values. This allows for efficient lookups and insertion operations.</p>
<h4 id="steps">Steps:</h4>
<ol>
<li>
<p><strong>Initialization</strong>:</p>
<ul>
<li>We maintain a <code>map&lt;int, int&gt; mp</code> where the keys represent the end time of booked events, and the values represent the corresponding start time of those events. This ensures that the events are stored in chronological order based on their end times.</li>
</ul>
</li>
<li>
<p><strong>Booking an Event</strong>:</p>
<ul>
<li>For each new event, we check if there is any existing event that overlaps with it. We do this by looking for the first event whose start time is after the new event&rsquo;s start time using <code>upper_bound(start)</code> function on the map. This gives us an iterator pointing to the first event that starts after the proposed start time of the new event.</li>
<li>If such an event exists, we then check if the end time of this event is before the proposed end time of the new event. If it is, then the events overlap, and we return <code>false</code> to indicate that the booking is not possible.</li>
<li>If no overlap is found, we can safely add the new event to the calendar by inserting it into the map with its end time as the key.</li>
</ul>
</li>
<li>
<p><strong>Return Value</strong>:</p>
<ul>
<li>The <code>book</code> function returns <code>true</code> if the event was successfully booked, otherwise, it returns <code>false</code> if the event overlaps with an already existing one.</li>
</ul>
</li>
</ol>
<p>This approach allows for efficient insertion and overlap checking by leveraging the properties of the <code>map</code> (balanced tree structure) that ensures logarithmic time complexity for both operations.</p>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<h4 id="1-constructor-mycalendar">1. <strong>Constructor <code>MyCalendar</code></strong></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>MyCalendar() {
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// Constructor initializes the calendar system
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>}
</span></span></code></pre></div><ul>
<li>The constructor initializes an empty <code>map&lt;int, int&gt; mp</code>, which will be used to store events.</li>
</ul>
<h4 id="2-booking-function-book">2. <strong>Booking Function <code>book</code></strong></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">bool</span> <span style="color:#00a000">book</span>(<span style="color:#0b0;font-weight:bold">int</span> start, <span style="color:#0b0;font-weight:bold">int</span> end) {
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// Find the first event that starts after the proposed start time
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">auto</span> nxt <span style="color:#666">=</span> mp.upper_bound(start);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// Check if the next event starts before the current event ends (overlap check)
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">if</span> (nxt <span style="color:#666">!=</span> mp.end() <span style="color:#666">&amp;&amp;</span> (<span style="color:#666">*</span>nxt).second <span style="color:#666">&lt;</span> end) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">false</span>;  <span style="color:#080;font-style:italic">// If overlap exists, return false
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// If no overlap, insert the event into the map
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    mp[end] <span style="color:#666">=</span> start;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f">true</span>;  <span style="color:#080;font-style:italic">// Booking was successful
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>}
</span></span></code></pre></div><ul>
<li><strong><code>auto nxt = mp.upper_bound(start)</code></strong>: Finds the first event whose start time is greater than <code>start</code>. The <code>upper_bound</code> function returns an iterator pointing to the first element whose key is greater than <code>start</code>.</li>
<li><strong>Overlap check</strong>: We then check if the <code>nxt</code> event starts before the proposed event&rsquo;s end time. If it does, it means there is an overlap, and we return <code>false</code>.</li>
<li><strong>Booking</strong>: If no overlap is found, we add the new event to the <code>map</code> with <code>end</code> as the key and <code>start</code> as the value, indicating that this event has been booked.</li>
<li><strong>Return <code>true</code></strong>: If the event is successfully booked, we return <code>true</code>.</li>
</ul>
<h4 id="3-helper-functions-upper-bound-and-insert">3. <strong>Helper Functions (Upper Bound and Insert)</strong></h4>
<p>The <code>upper_bound</code> function is provided by the map to perform a binary search on the keys. It efficiently finds the first element that is greater than the specified start time.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">auto</span> nxt <span style="color:#666">=</span> mp.upper_bound(start);
</span></span></code></pre></div><p>This allows us to avoid scanning through the entire map and efficiently check for overlaps. The map ensures that all keys (end times) are stored in sorted order, allowing us to perform binary search in <strong>O(log n)</strong> time complexity.</p>
<h4 id="4-mycalendar-object-usage">4. <strong><code>MyCalendar</code> Object Usage</strong></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>MyCalendar<span style="color:#666">*</span> obj <span style="color:#666">=</span> <span style="color:#a2f;font-weight:bold">new</span> MyCalendar();
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">bool</span> param_1 <span style="color:#666">=</span> obj<span style="color:#666">-&gt;</span>book(start, end);
</span></span></code></pre></div><ul>
<li><strong>Instantiating the calendar</strong>: An object <code>obj</code> of type <code>MyCalendar</code> is created.</li>
<li><strong>Booking an event</strong>: The <code>book</code> function is called with the start and end times of the new event. The result (<code>true</code> or <code>false</code>) is stored in <code>param_1</code>.</li>
</ul>
<h3 id="complexity-analysis">Complexity Analysis</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<ul>
<li><strong><code>book</code> function</strong>: The primary operations in the <code>book</code> function are:
<ul>
<li><strong>Finding the next event</strong>: <code>upper_bound(start)</code> takes <strong>O(log n)</strong> time where <code>n</code> is the number of events booked so far. This operation performs a binary search in the map to find the correct position.</li>
<li><strong>Insertion into the map</strong>: Inserting a new element into the <code>map</code> also takes <strong>O(log n)</strong> time due to the balanced tree structure of the map.</li>
<li>Overall, the time complexity for the <code>book</code> function is <strong>O(log n)</strong>.</li>
</ul>
</li>
</ul>
<h4 id="space-complexity">Space Complexity:</h4>
<ul>
<li>The space complexity is determined by the size of the <code>map</code> that stores the events. In the worst case, when all events are booked without overlap, the map will store <code>n</code> events. Therefore, the space complexity is <strong>O(n)</strong>, where <code>n</code> is the number of events booked.</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>The <code>MyCalendar</code> class effectively solves the problem of booking events without overlap using a <code>map</code> to store the events and efficiently check for possible overlaps. The approach leverages the properties of a balanced tree to achieve efficient booking operations with logarithmic time complexity for both insertion and overlap checking. This makes the solution scalable and performant for large inputs.</p>
<h4 id="key-points">Key Points:</h4>
<ul>
<li><strong>Efficient overlap checking</strong>: By using a <code>map</code>, we can check for overlaps in <strong>O(log n)</strong> time.</li>
<li><strong>Balanced tree structure</strong>: The <code>map</code> maintains the events in sorted order, making insertions and lookups efficient.</li>
<li><strong>Space and time efficiency</strong>: The solution efficiently uses space and time resources, with complexities of <strong>O(log n)</strong> for each booking operation and <strong>O(n)</strong> space for storing events.</li>
</ul>
<p>This design is optimal for scenarios where frequent event bookings and overlap checks are needed. It provides a clean and efficient way to manage a calendar with minimal overhead.</p>
<p><a href="https://leetcode.com/problems/my-calendar-i/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/fIxck3tlId4?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
