<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 1997: First Day Where You Have Been in All the Rooms | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1997: First Day Where You Have Been in All the Rooms">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1997: First Day Where You Have Been in All the Rooms in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-1997-first-day-where-you-have-been-in-all-the-rooms/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1997: First Day Where You Have Been in All the Rooms">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1997: First Day Where You Have Been in All the Rooms in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-04-21T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Dynamic Programming">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 1997: First Day Where You Have Been in All the Rooms</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode498s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> n;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">firstDayBeenInAllRooms</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> nxt) {
</span></span><span style="display:flex;"><span>        n <span style="color:#666">=</span> nxt.size();
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> mod <span style="color:#666">=</span> (<span style="color:#0b0;font-weight:bold">int</span>) <span style="color:#666">1e9</span> <span style="color:#666">+</span> <span style="color:#666">7</span>;
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;</span> dp(n, <span style="color:#666">0</span>); <span style="color:#080;font-style:italic">// step
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">1</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>            dp[i] <span style="color:#666">=</span> (dp[i <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">+</span> (dp[i <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">-</span> dp[nxt[i <span style="color:#666">-</span> <span style="color:#666">1</span>]]) <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">+</span> mod) <span style="color:#666">%</span> mod;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> dp[n <span style="color:#666">-</span> <span style="color:#666">1</span>];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem at hand is to determine the first day on which a person has visited all rooms in a circular structure where each room points to the next room they will visit. Given an array <code>nxt</code> where <code>nxt[i]</code> indicates the room that can be accessed from room <code>i</code>, the goal is to compute the total number of steps taken until all rooms have been visited. The steps must be calculated modulo (10^9 + 7).</p>
<h3 id="approach">Approach</h3>
<p>To solve this problem, we will use a dynamic programming approach. The main idea is to keep track of the number of steps needed to reach each room while ensuring we efficiently calculate the contributions of previous rooms in our calculations.</p>
<ol>
<li>
<p><strong>Dynamic Programming Array</strong>: We will use a DP array <code>dp</code> where <code>dp[i]</code> will store the number of steps required to visit all rooms from room 0 to room <code>i</code>. The size of this array will be equal to the number of rooms, <code>n</code>.</p>
</li>
<li>
<p><strong>Transition Formula</strong>: The main transition relies on the previous room&rsquo;s value in the DP array. For each room <code>i</code>:</p>
<ul>
<li>The steps to reach room <code>i</code> can be derived from room <code>i-1</code>, which includes the previously calculated steps to reach <code>i-1</code>, plus additional steps needed to visit room <code>i</code>. The formula to compute <code>dp[i]</code> can be expressed as:
[
dp[i] = (dp[i - 1] + 1 + (dp[i - 1] - dp[nxt[i - 1]]) + 1 + \text{mod}) \mod \text{mod}
]</li>
<li>This formula accounts for the steps taken to get to the current room and adjusts for any backtracking to previously visited rooms.</li>
</ul>
</li>
<li>
<p><strong>Final Result</strong>: The answer will be the value of <code>dp[n - 1]</code>, which represents the total number of steps taken to visit all rooms.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<p>Let’s break down the provided code for a better understanding:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> n; <span style="color:#080;font-style:italic">// Number of rooms
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">firstDayBeenInAllRooms</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> nxt) {
</span></span><span style="display:flex;"><span>        n <span style="color:#666">=</span> nxt.size(); <span style="color:#080;font-style:italic">// Get the size of the nxt array
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#0b0;font-weight:bold">int</span> mod <span style="color:#666">=</span> (<span style="color:#0b0;font-weight:bold">int</span>) <span style="color:#666">1e9</span> <span style="color:#666">+</span> <span style="color:#666">7</span>; <span style="color:#080;font-style:italic">// Define the modulo value
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">long</span> <span style="color:#0b0;font-weight:bold">long</span><span style="color:#666">&gt;</span> dp(n, <span style="color:#666">0</span>); <span style="color:#080;font-style:italic">// Create a DP array initialized to 0
</span></span></span></code></pre></div><ul>
<li>The class <code>Solution</code> is defined, which contains a method <code>firstDayBeenInAllRooms</code>.</li>
<li>We define <code>n</code> to hold the number of rooms.</li>
<li>We initialize a vector <code>dp</code> of size <code>n</code>, where each element is initialized to <code>0</code> to store the number of steps for each room.</li>
<li>The modulo value is set to (10^9 + 7) to ensure we don&rsquo;t encounter integer overflow.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">1</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>)
</span></span><span style="display:flex;"><span>            dp[i] <span style="color:#666">=</span> (dp[i <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">+</span> (dp[i <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">-</span> dp[nxt[i <span style="color:#666">-</span> <span style="color:#666">1</span>]]) <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">+</span> mod) <span style="color:#666">%</span> mod;
</span></span></code></pre></div><ul>
<li>The loop iterates over each room starting from <code>1</code> to <code>n - 1</code>. For each room <code>i</code>, we compute the number of steps required to reach it using the defined formula:
<ul>
<li><code>dp[i - 1]</code>: Represents the total steps taken to reach the previous room.</li>
<li><code>+ 1</code>: Accounts for the step taken to move from room <code>i-1</code> to room <code>i</code>.</li>
<li><code>+ (dp[i - 1] - dp[nxt[i - 1]])</code>: Adjusts for any backtracking, ensuring we only count the necessary steps.</li>
<li><code>+ 1</code>: Adds an additional step for the transition.</li>
<li><code>mod</code>: Ensures that we stay within the bounds of the modulo.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> dp[n <span style="color:#666">-</span> <span style="color:#666">1</span>]; <span style="color:#080;font-style:italic">// Return the total steps to visit all rooms
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ul>
<li>Finally, the function returns <code>dp[n - 1]</code>, which is the total number of steps taken to visit all rooms.</li>
</ul>
<h3 id="complexity">Complexity</h3>
<ul>
<li>
<p><strong>Time Complexity</strong>: The time complexity of this solution is (O(n)) since we iterate through the <code>nxt</code> array once, performing constant-time calculations for each room.</p>
</li>
<li>
<p><strong>Space Complexity</strong>: The space complexity is also (O(n)) due to the storage of the DP array that holds the number of steps for each room.</p>
</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>The provided solution efficiently calculates the number of steps taken to visit all rooms using dynamic programming. By leveraging the properties of the problem and maintaining a DP array, the solution avoids unnecessary computations and achieves the desired result in linear time.</p>
<p>This algorithm is optimal for scenarios where you need to analyze paths in a structured way, especially in problems involving transitions between states or rooms. The modular arithmetic ensures that we handle large numbers gracefully, making this approach robust and suitable for competitive programming or algorithmic challenges.</p>
<h3 id="example-usage">Example Usage</h3>
<p>Here’s how you might utilize the <code>Solution</code> class to find the first day on which all rooms are visited:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#080">#include</span> <span style="color:#080">&lt;iostream&gt;</span><span style="color:#080">
</span></span></span><span style="display:flex;"><span><span style="color:#080">#include</span> <span style="color:#080">&lt;vector&gt;</span><span style="color:#080">
</span></span></span><span style="display:flex;"><span><span style="color:#080"></span><span style="color:#a2f;font-weight:bold">using</span> <span style="color:#a2f;font-weight:bold">namespace</span> std;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">main</span>() {
</span></span><span style="display:flex;"><span>    Solution sol;
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> nxt <span style="color:#666">=</span> {<span style="color:#666">1</span>, <span style="color:#666">2</span>, <span style="color:#666">3</span>, <span style="color:#666">4</span>, <span style="color:#666">0</span>}; <span style="color:#080;font-style:italic">// Example input
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#0b0;font-weight:bold">int</span> result <span style="color:#666">=</span> sol.firstDayBeenInAllRooms(nxt);
</span></span><span style="display:flex;"><span>    cout <span style="color:#666">&lt;&lt;</span> <span style="color:#b44">&#34;First day been in all rooms: &#34;</span> <span style="color:#666">&lt;&lt;</span> result <span style="color:#666">&lt;&lt;</span> endl; <span style="color:#080;font-style:italic">// Should print the total steps
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>In this example, we create an instance of the <code>Solution</code> class, define the <code>nxt</code> vector representing the rooms&rsquo; transitions, and call the <code>firstDayBeenInAllRooms</code> method to get the result.</p>
<p><a href="https://leetcode.com/problems/first-day-where-you-have-been-in-all-the-rooms/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/GYyHxkGO4J0?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
