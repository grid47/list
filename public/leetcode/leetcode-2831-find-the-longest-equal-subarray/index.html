<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 2831: Find the Longest Equal Subarray | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 2831: Find the Longest Equal Subarray">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 2831: Find the Longest Equal Subarray in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-2831-find-the-longest-equal-subarray/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 2831: Find the Longest Equal Subarray">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 2831: Find the Longest Equal Subarray in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-01-28T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Hash Table">
    <meta property="article:tag" content="Binary Search">
    <meta property="article:tag" content="Sliding Window">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 2831: Find the Longest Equal Subarray</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode969s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> longestEqualSubarray(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> nums, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> nums.size();
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;</span> grid(n <span style="color:#666">+</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> ans <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            grid[nums[i]].push_back(i);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> e <span style="color:#666">=</span> <span style="color:#666">1</span>; e <span style="color:#666">&lt;=</span> n; e<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(grid[e].size() <span style="color:#666">==</span> <span style="color:#666">0</span>) <span style="color:#a2f;font-weight:bold">continue</span>;
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">int</span> left <span style="color:#666">=</span> <span style="color:#666">0</span>, right <span style="color:#666">=</span> <span style="color:#666">1</span>, rm <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">while</span>(left <span style="color:#666">&lt;</span> grid[e].size() <span style="color:#666">&amp;&amp;</span> right <span style="color:#666">&lt;</span> grid[e].size()) {
</span></span><span style="display:flex;"><span>                rm <span style="color:#666">+=</span> (grid[e][right] <span style="color:#666">-</span> grid[e][right <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">-</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">if</span> (rm <span style="color:#666">&lt;=</span> k) {
</span></span><span style="display:flex;"><span>                    ans <span style="color:#666">=</span> max(ans, <span style="color:#666">1</span> <span style="color:#666">+</span> (right <span style="color:#666">-</span> left));
</span></span><span style="display:flex;"><span>                    right<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>                } <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                    right<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>                    left<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>                    <span style="color:#a2f;font-weight:bold">if</span>(left <span style="color:#666">&lt;</span> grid[e].size())
</span></span><span style="display:flex;"><span>                    rm <span style="color:#666">-=</span> (grid[e][left] <span style="color:#666">-</span> grid[e][left <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">-</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#00a000">max</span>(ans, <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem asks to find the longest subarray of equal elements in a given array <code>nums</code> such that you can modify the subarray with at most <code>k</code> operations. In each operation, you can change any element in the subarray to any other integer in the array. The goal is to return the length of the longest subarray of equal elements after at most <code>k</code> operations.</p>
<h3 id="approach">Approach</h3>
<p>To solve this problem, we can use a sliding window approach with the help of a grid to efficiently track the positions of the elements. The solution is as follows:</p>
<ol>
<li>
<p><strong>Grid Construction</strong>:
We first construct a grid (a list of lists) where each element in the grid corresponds to the indices in the array where a particular number appears. This allows us to track the positions of each number in the array easily.</p>
</li>
<li>
<p><strong>Sliding Window Approach</strong>:
For each unique number in the array (tracked in the grid), we use a sliding window to determine the longest contiguous subarray where all elements are equal to that number, allowing for at most <code>k</code> modifications. The sliding window maintains the number of elements that can be modified to make all the numbers in the window equal to the current number.</p>
</li>
<li>
<p><strong>Operations Count (rm)</strong>:
The variable <code>rm</code> tracks the number of elements that need to be modified to make all elements in the current window equal to the chosen number. If <code>rm</code> exceeds <code>k</code>, the window is adjusted by moving the left pointer forward to shrink the window.</p>
</li>
<li>
<p><strong>Update Maximum Length</strong>:
For each number in the grid, we calculate the longest subarray where all elements can be made equal with at most <code>k</code> operations. We maintain the maximum length found across all numbers.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<h4 id="1-function-definition-and-initializations">1. Function Definition and Initializations</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">longestEqualSubarray</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> nums, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> nums.size();
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;</span> grid(n <span style="color:#666">+</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> ans <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span></code></pre></div><ul>
<li>The function <code>longestEqualSubarray</code> takes two arguments: the array <code>nums</code> and the integer <code>k</code>, which is the maximum number of operations allowed.</li>
<li><code>n</code> is the size of the array <code>nums</code>.</li>
<li><code>grid</code> is a 2D vector, where each index <code>e</code> holds the positions of number <code>e</code> in the array <code>nums</code>. This helps to quickly access the indices of each number.</li>
<li><code>ans</code> stores the result, which is the length of the longest equal subarray found.</li>
</ul>
<h4 id="2-building-the-grid">2. Building the Grid</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    grid[nums[i]].push_back(i);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>In this loop, we traverse through the array <code>nums</code>, and for each number <code>nums[i]</code>, we store its index in the corresponding position in the <code>grid</code> array.</li>
</ul>
<h4 id="3-sliding-window-for-each-number">3. Sliding Window for Each Number</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> e <span style="color:#666">=</span> <span style="color:#666">1</span>; e <span style="color:#666">&lt;=</span> n; e<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(grid[e].size() <span style="color:#666">==</span> <span style="color:#666">0</span>) <span style="color:#a2f;font-weight:bold">continue</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> left <span style="color:#666">=</span> <span style="color:#666">0</span>, right <span style="color:#666">=</span> <span style="color:#666">1</span>, rm <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span></code></pre></div><ul>
<li>We now iterate through each possible number <code>e</code> (from <code>1</code> to <code>n</code>).</li>
<li>If the number <code>e</code> is not present in the array (<code>grid[e].size() == 0</code>), we skip it.</li>
<li><code>left</code> and <code>right</code> are the pointers representing the sliding window.</li>
<li><code>rm</code> (remaining modifications) keeps track of how many modifications are needed to make all elements in the window equal to <code>e</code>.</li>
</ul>
<h4 id="4-sliding-window-logic">4. Sliding Window Logic</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">while</span>(left <span style="color:#666">&lt;</span> grid[e].size() <span style="color:#666">&amp;&amp;</span> right <span style="color:#666">&lt;</span> grid[e].size()) {
</span></span><span style="display:flex;"><span>    rm <span style="color:#666">+=</span> (grid[e][right] <span style="color:#666">-</span> grid[e][right <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">-</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span> (rm <span style="color:#666">&lt;=</span> k) {
</span></span><span style="display:flex;"><span>        ans <span style="color:#666">=</span> max(ans, <span style="color:#666">1</span> <span style="color:#666">+</span> (right <span style="color:#666">-</span> left));
</span></span><span style="display:flex;"><span>        right<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>    } <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>        right<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>        left<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(left <span style="color:#666">&lt;</span> grid[e].size())
</span></span><span style="display:flex;"><span>        rm <span style="color:#666">-=</span> (grid[e][left] <span style="color:#666">-</span> grid[e][left <span style="color:#666">-</span> <span style="color:#666">1</span>] <span style="color:#666">-</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>Inside this while loop, we manage the sliding window:
<ul>
<li>First, calculate how many elements need to be modified to make all the numbers in the window equal to <code>e</code>. This is done by subtracting the distance between two consecutive indices of <code>e</code>.</li>
<li>If <code>rm &lt;= k</code>, the window is valid, and we update the maximum length of the subarray (<code>ans</code>).</li>
<li>If <code>rm &gt; k</code>, we move the left pointer forward to reduce the size of the window, and adjust <code>rm</code> accordingly.</li>
</ul>
</li>
</ul>
<h4 id="5-final-result">5. Final Result</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> <span style="color:#00a000">max</span>(ans, <span style="color:#666">1</span>);
</span></span></code></pre></div><ul>
<li>After processing all possible numbers and their corresponding sliding windows, we return the maximum length of the equal subarray found.</li>
<li>The result is the maximum of <code>ans</code> and <code>1</code> since a subarray with a single element is always valid.</li>
</ul>
<h3 id="complexity">Complexity</h3>
<ol>
<li>
<p><strong>Time Complexity</strong>:</p>
<ul>
<li><strong>O(n)</strong> for building the <code>grid</code>, where <code>n</code> is the size of the array <code>nums</code>.</li>
<li>For each number <code>e</code>, the sliding window process takes <strong>O(m)</strong>, where <code>m</code> is the number of occurrences of <code>e</code> in the array.</li>
<li>Since we iterate over all the numbers and their occurrences, the time complexity for the sliding window part is <strong>O(n)</strong> in total.</li>
<li>Thus, the overall time complexity is <strong>O(n)</strong>, where <code>n</code> is the size of the input array <code>nums</code>.</li>
</ul>
</li>
<li>
<p><strong>Space Complexity</strong>:</p>
<ul>
<li>The space complexity is primarily determined by the <code>grid</code>, which stores the indices of each number in <code>nums</code>. In the worst case, the space complexity is <strong>O(n)</strong> because there are <code>n</code> numbers, and each number can appear at most <code>n</code> times.</li>
<li>Thus, the overall space complexity is <strong>O(n)</strong>.</li>
</ul>
</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>This solution uses a combination of <strong>sliding window</strong> and <strong>grid-based indexing</strong> to find the longest subarray where all elements can be made equal with at most <code>k</code> modifications. The solution efficiently processes the array in linear time <strong>O(n)</strong> and is optimal for handling large input sizes. The space complexity is also <strong>O(n)</strong>, making it space-efficient. This approach provides an effective and scalable way to solve the problem of finding the longest equal subarray with bounded modifications.</p>
<p><a href="https://leetcode.com/problems/find-the-longest-equal-subarray/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/UFCF01O7Yxk?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
