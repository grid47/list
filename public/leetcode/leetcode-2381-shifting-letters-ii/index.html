<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 2381: Shifting Letters II | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 2381: Shifting Letters II">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 2381: Shifting Letters II in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-2381-shifting-letters-ii/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 2381: Shifting Letters II">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 2381: Shifting Letters II in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-03-13T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="String">
    <meta property="article:tag" content="Prefix Sum">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 2381: Shifting Letters II</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode724s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    string shiftingLetters(string s, vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> sh) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> s.length();
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> net(n, <span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#a2f;font-weight:bold">auto</span> <span style="color:#666">&amp;</span><span style="color:#a0a000">x</span>: sh) {
</span></span><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">int</span> k <span style="color:#666">=</span> x[<span style="color:#666">2</span>] <span style="color:#666">==</span> <span style="color:#666">1</span><span style="color:#666">?</span> <span style="color:#666">1</span> <span style="color:#666">:</span> <span style="color:#666">-</span><span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>            net[x[<span style="color:#666">0</span>]] <span style="color:#666">+=</span> k;
</span></span><span style="display:flex;"><span>           <span style="color:#080;font-style:italic">// net[x[0]] %= 26;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#a2f;font-weight:bold">if</span>(x[<span style="color:#666">1</span>] <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">&lt;</span> n) {
</span></span><span style="display:flex;"><span>            net[x[<span style="color:#666">1</span>] <span style="color:#666">+</span> <span style="color:#666">1</span>] <span style="color:#666">-=</span> k;
</span></span><span style="display:flex;"><span>           <span style="color:#080;font-style:italic">// net[x[1] + 1] %= 26;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        partial_sum(net.begin(), net.end(), net.begin());
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">char</span> <span style="color:#666">&amp;</span><span style="color:#a0a000">c</span> : s) {
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> ((c <span style="color:#666">-</span> <span style="color:#b44">&#39;a&#39;</span>) <span style="color:#666">+</span> net[i])<span style="color:#666">%</span> <span style="color:#666">26</span>;
</span></span><span style="display:flex;"><span>                     res <span style="color:#666">=</span> (res <span style="color:#666">+</span> <span style="color:#666">26</span>)<span style="color:#666">%</span><span style="color:#666">26</span>;
</span></span><span style="display:flex;"><span>            c <span style="color:#666">=</span> <span style="color:#b44">&#39;a&#39;</span> <span style="color:#666">+</span> res;
</span></span><span style="display:flex;"><span>            i<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> s;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem asks us to perform a series of shifts on a given string <code>s</code> where each shift operation consists of changing a range of characters within the string by a specific amount. Each shift operation is defined by a triplet <code>[start, end, direction]</code>:</p>
<ul>
<li><code>start</code>: The starting index of the substring to be shifted.</li>
<li><code>end</code>: The ending index of the substring to be shifted.</li>
<li><code>direction</code>: A value of <code>1</code> means shifting the characters forward by one position in the alphabet, and a value of <code>-1</code> means shifting the characters backward by one position.</li>
</ul>
<p>The goal is to apply all these shift operations to the string <code>s</code> and return the final string after all the shifts are applied.</p>
<h3 id="approach">Approach</h3>
<p>This problem can be efficiently solved using the <strong>difference array</strong> technique combined with <strong>prefix sum</strong>. The basic idea is to record the net effect of each shift operation over the string in a separate array and then apply the cumulative shifts using prefix sums.</p>
<h4 id="key-insights">Key Insights:</h4>
<ol>
<li><strong>Difference Array (Net Effect)</strong>: For each shift operation, instead of updating all characters in the given range <code>[start, end]</code>, we can just record the effect of the operation at the boundaries of the range. By doing this, we avoid multiple redundant updates and make the solution more efficient.</li>
<li><strong>Prefix Sum</strong>: After recording the changes in the difference array, we can use the <strong>partial sum</strong> (prefix sum) to accumulate the shifts across the string.</li>
<li><strong>Modulo 26 Arithmetic</strong>: Since there are 26 letters in the English alphabet, we must ensure that the shifts wrap around after 26 characters, i.e., after <code>z</code> comes <code>a</code> again. This requires us to use modulo arithmetic.</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<ol>
<li>
<p><strong>Function Definition</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>string <span style="color:#00a000">shiftingLetters</span>(string s, vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> sh) {
</span></span></code></pre></div><p>The function <code>shiftingLetters</code> takes two inputs:</p>
<ul>
<li><code>s</code>: A string containing lowercase English letters.</li>
<li><code>sh</code>: A vector of shift operations, where each element is a triplet <code>[start, end, direction]</code>.</li>
</ul>
</li>
<li>
<p><strong>Initialization</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> s.length();
</span></span><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> net(n, <span style="color:#666">0</span>);
</span></span></code></pre></div><ul>
<li><code>n</code>: The length of the string <code>s</code>.</li>
<li><code>net</code>: A vector of size <code>n</code>, initialized with zeros. This array will record the net effect of all shift operations.</li>
</ul>
</li>
<li>
<p><strong>Applying Shift Operations (Difference Array Technique)</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#a2f;font-weight:bold">auto</span> <span style="color:#666">&amp;</span><span style="color:#a0a000">x</span>: sh) {
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> k <span style="color:#666">=</span> x[<span style="color:#666">2</span>] <span style="color:#666">==</span> <span style="color:#666">1</span><span style="color:#666">?</span> <span style="color:#666">1</span> <span style="color:#666">:</span> <span style="color:#666">-</span><span style="color:#666">1</span>;  <span style="color:#080;font-style:italic">// Direction of shift: 1 for forward, -1 for backward
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    net[x[<span style="color:#666">0</span>]] <span style="color:#666">+=</span> k;             <span style="color:#080;font-style:italic">// Add shift at the start index
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">if</span>(x[<span style="color:#666">1</span>] <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">&lt;</span> n) {
</span></span><span style="display:flex;"><span>        net[x[<span style="color:#666">1</span>] <span style="color:#666">+</span> <span style="color:#666">1</span>] <span style="color:#666">-=</span> k;     <span style="color:#080;font-style:italic">// Subtract shift after the end index
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>We loop through each shift operation in <code>sh</code>. For each operation, we determine the direction of the shift (<code>1</code> for forward, <code>-1</code> for backward) and apply the change to the <code>net</code> array:
<ul>
<li>For the start index <code>x[0]</code>, we add the direction (<code>+1</code> or <code>-1</code>).</li>
<li>For the index <code>x[1] + 1</code>, we subtract the direction to cancel out the effect after the end of the range.</li>
</ul>
</li>
<li>This creates a &ldquo;difference array,&rdquo; where the effect of each operation is recorded at the boundaries.</li>
</ul>
</li>
<li>
<p><strong>Prefix Sum Calculation</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>partial_sum(net.begin(), net.end(), net.begin());
</span></span></code></pre></div><ul>
<li>We calculate the <strong>partial sum</strong> of the <code>net</code> array, which effectively accumulates all the shifts into a cumulative effect. After this, each element in <code>net</code> contains the total shift applied to the corresponding index of the string <code>s</code>.</li>
</ul>
</li>
<li>
<p><strong>Applying the Shifts to the String</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">char</span> <span style="color:#666">&amp;</span><span style="color:#a0a000">c</span> : s) {
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> ((c <span style="color:#666">-</span> <span style="color:#b44">&#39;a&#39;</span>) <span style="color:#666">+</span> net[i]) <span style="color:#666">%</span> <span style="color:#666">26</span>;   <span style="color:#080;font-style:italic">// Calculate new character after shift
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    res <span style="color:#666">=</span> (res <span style="color:#666">+</span> <span style="color:#666">26</span>) <span style="color:#666">%</span> <span style="color:#666">26</span>;                  <span style="color:#080;font-style:italic">// Ensure result is positive
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    c <span style="color:#666">=</span> <span style="color:#b44">&#39;a&#39;</span> <span style="color:#666">+</span> res;                          <span style="color:#080;font-style:italic">// Convert back to character
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    i<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>We loop through each character in the string <code>s</code>.</li>
<li>For each character, we calculate the new character after applying the accumulated shift:
<ul>
<li><code>c - 'a'</code> converts the character to its index (0 for &lsquo;a&rsquo;, 1 for &lsquo;b&rsquo;, &hellip;, 25 for &lsquo;z&rsquo;).</li>
<li>Adding the cumulative shift (<code>net[i]</code>) adjusts the index.</li>
<li>Modulo 26 ensures the result wraps around correctly within the alphabet (e.g., after &lsquo;z&rsquo;, it should go back to &lsquo;a&rsquo;).</li>
<li>We also apply <code>(res + 26) % 26</code> to ensure that the result remains positive, handling cases where the shift might result in a negative index.</li>
<li>Finally, we convert the result back to a character by adding <code>'a'</code> to the index and updating the character in <code>s</code>.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Return the Final String</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> s;
</span></span></code></pre></div><ul>
<li>After applying all shifts to the string, we return the modified string <code>s</code>.</li>
</ul>
</li>
</ol>
<h3 id="complexity">Complexity</h3>
<ol>
<li>
<p><strong>Time Complexity</strong>:</p>
<ul>
<li><strong>O(m + n)</strong>, where <code>m</code> is the number of shift operations (<code>sh.size()</code>) and <code>n</code> is the length of the string <code>s</code>.</li>
<li>The loop over the shift operations takes <strong>O(m)</strong> time because we process each operation in constant time.</li>
<li>The prefix sum calculation takes <strong>O(n)</strong> time, and applying the shifts to the string also takes <strong>O(n)</strong> time.</li>
<li>Therefore, the overall time complexity is <strong>O(m + n)</strong>, which is efficient for large inputs.</li>
</ul>
</li>
<li>
<p><strong>Space Complexity</strong>:</p>
<ul>
<li>The space complexity is <strong>O(n)</strong> due to the <code>net</code> array, which stores the cumulative shifts for each index in the string <code>s</code>.</li>
<li>No additional significant space is used besides the input and output, making the space complexity linear in terms of the length of the string.</li>
</ul>
</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>This solution efficiently solves the problem of applying multiple shift operations to a string by using the <strong>difference array technique</strong> and <strong>prefix sum</strong>. The difference array allows us to record the effect of each shift operation at the boundaries, and the prefix sum allows us to efficiently accumulate all the shifts in a single pass. This reduces the need to repeatedly iterate over the string for each operation, making the solution optimal with a time complexity of <strong>O(m + n)</strong>, where <code>m</code> is the number of operations and <code>n</code> is the length of the string.</p>
<p>The use of <strong>modulo 26 arithmetic</strong> ensures that the shifts are applied correctly within the bounds of the English alphabet, handling both forward and backward shifts. This makes the solution both correct and efficient for large inputs.</p>
<p>In summary, the combination of the difference array technique with prefix sums provides an elegant and efficient way to apply range updates, and this solution is a great example of how advanced array manipulation can solve string transformation problems in an optimal manner.</p>
<p><a href="https://leetcode.com/problems/shifting-letters-ii/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/dWp_egpuwbU?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
