<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 799: Champagne Tower | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 799: Champagne Tower">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 799: Champagne Tower in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-799-champagne-tower/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 799: Champagne Tower">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 799: Champagne Tower in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-08-19T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Dynamic Programming">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 799: Champagne Tower</h1> 
            </div>
			<div class="article-post">
				<h2 id="hahahugoshortcode1316s0hbhb"><figure class="remote-image" style="text-align:center; margin: 0;">
    <div style="position: relative; width:900px; max-width:100%; padding-bottom:56.25%; overflow: hidden; border-radius:0px;">
      <img src="https://raw.githubusercontent.com/grid47/list-images/refs/heads/main/list/799.webp" 
           alt="A tower of champagne glasses where the champagne is poured, each glass softly glowing as it fills." 
           style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
    </div>
    
      <figcaption style="font-size: 0.8em; font-weight: 300; color:#555; margin-top: 4px; line-height: 1.2;">
        Solution to LeetCode 799: Champagne Tower Problem
      </figcaption>
    
  </figure>
  </h2>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1316s1hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">double</span> champagneTower(<span style="color:#0b0;font-weight:bold">int</span> poured, <span style="color:#0b0;font-weight:bold">int</span> query_row, <span style="color:#0b0;font-weight:bold">int</span> query_glass) {
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">double</span><span style="color:#666">&gt;</span> currRow(<span style="color:#666">1</span>, poured);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;=</span> query_row; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">double</span><span style="color:#666">&gt;</span> nextrow(i <span style="color:#666">+</span> <span style="color:#666">2</span>, <span style="color:#666">0</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>; j <span style="color:#666">&lt;=</span> i; j<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">if</span>(currRow[j] <span style="color:#666">&gt;=</span> <span style="color:#666">1</span>) {
</span></span><span style="display:flex;"><span>                    nextrow[j]      <span style="color:#666">+=</span> (currRow[j] <span style="color:#666">-</span> <span style="color:#666">1</span>)<span style="color:#666">/</span><span style="color:#666">2.0</span>;
</span></span><span style="display:flex;"><span>                    nextrow[j <span style="color:#666">+</span> <span style="color:#666">1</span>]  <span style="color:#666">+=</span> (currRow[j] <span style="color:#666">-</span> <span style="color:#666">1</span>)<span style="color:#666">/</span><span style="color:#666">2.0</span>;
</span></span><span style="display:flex;"><span>                    currRow[j]       <span style="color:#666">=</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">!=</span> query_row) currRow <span style="color:#666">=</span> nextrow;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> currRow[query_glass];
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem is a simulation of pouring champagne into a triangular tower of glasses. The tower consists of rows of glasses, where each glass can hold at most 1 unit of champagne. The goal is to determine how much champagne will be in a specific glass after pouring a certain amount of champagne into the topmost glass.</p>
<h3 id="problem-details">Problem Details:</h3>
<ul>
<li>We are given an integer <code>poured</code> representing the amount of champagne to be poured into the topmost glass.</li>
<li>We are also given <code>query_row</code> and <code>query_glass</code>, which specify the row and glass in the tower for which we need to determine the amount of champagne remaining after the pour.</li>
</ul>
<p>The tower follows a specific structure:</p>
<ul>
<li>The first row contains one glass.</li>
<li>The second row contains two glasses.</li>
<li>The third row contains three glasses.</li>
<li>And so on.</li>
</ul>
<p>When champagne is poured into a glass, any excess champagne (overflow) is evenly distributed into the two glasses directly below it. If a glass exceeds its maximum capacity of 1 unit, the excess champagne overflows equally to the two glasses directly below it.</p>
<h3 id="objective">Objective:</h3>
<p>Determine the amount of champagne in the glass at the position <code>[query_row][query_glass]</code> after pouring <code>poured</code> units of champagne into the topmost glass.</p>
<h3 id="approach">Approach</h3>
<p>The problem requires simulating the pouring process into the champagne tower. We can break down the approach as follows:</p>
<ol>
<li>
<p><strong>Simulate the pouring process</strong>:</p>
<ul>
<li>Start by pouring the champagne into the topmost glass.</li>
<li>For each row, calculate the overflow and distribute it equally into the glasses below.</li>
<li>The glasses below the current one can receive overflow from the current glass if it exceeds its capacity of 1 unit.</li>
</ul>
</li>
<li>
<p><strong>Tracking the champagne in each glass</strong>:</p>
<ul>
<li>The glasses are modeled as rows of a list where each row contains an array representing the glasses in that row.</li>
<li>For each glass, if the amount of champagne exceeds 1, the excess champagne is split equally between the two glasses in the next row directly beneath it.</li>
</ul>
</li>
<li>
<p><strong>Iterate through each row until reaching the row of interest</strong>:</p>
<ul>
<li>Each row has one more glass than the previous row, so it is important to track the pouring process row by row.</li>
<li>Once the simulation reaches the <code>query_row</code>, return the amount of champagne in the specified <code>query_glass</code> of that row.</li>
</ul>
</li>
<li>
<p><strong>Optimized space usage</strong>:</p>
<ul>
<li>The solution avoids storing the entire tower structure for all rows. Instead, only the current row and the next row are kept in memory at any given time to reduce the space complexity.</li>
</ul>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<p>Letâ€™s walk through the code:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">double</span> <span style="color:#00a000">champagneTower</span>(<span style="color:#0b0;font-weight:bold">int</span> poured, <span style="color:#0b0;font-weight:bold">int</span> query_row, <span style="color:#0b0;font-weight:bold">int</span> query_glass) {
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">double</span><span style="color:#666">&gt;</span> currRow(<span style="color:#666">1</span>, poured);  <span style="color:#080;font-style:italic">// Initialize the top row with poured champagne.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-style:italic">// Loop through each row up to the query_row
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;=</span> query_row; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">double</span><span style="color:#666">&gt;</span> nextrow(i <span style="color:#666">+</span> <span style="color:#666">2</span>, <span style="color:#666">0</span>);  <span style="color:#080;font-style:italic">// Initialize the next row with 0 champagne.
</span></span></span></code></pre></div><ul>
<li>We start by initializing the <code>currRow</code> vector, which represents the glasses in the current row, and set the topmost glass to the amount of poured champagne.</li>
<li>For each row up to the <code>query_row</code>, we create the next row (<code>nextrow</code>), which has one more glass than the current row.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>; j <span style="color:#666">&lt;=</span> i; j<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-style:italic">// Check if the current glass has more than 1 unit of champagne.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#a2f;font-weight:bold">if</span>(currRow[j] <span style="color:#666">&gt;=</span> <span style="color:#666">1</span>) {
</span></span><span style="display:flex;"><span>                nextrow[j]      <span style="color:#666">+=</span> (currRow[j] <span style="color:#666">-</span> <span style="color:#666">1</span>) <span style="color:#666">/</span> <span style="color:#666">2.0</span>;  <span style="color:#080;font-style:italic">// Overflow to the left glass in the next row.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                nextrow[j <span style="color:#666">+</span> <span style="color:#666">1</span>]  <span style="color:#666">+=</span> (currRow[j] <span style="color:#666">-</span> <span style="color:#666">1</span>) <span style="color:#666">/</span> <span style="color:#666">2.0</span>;  <span style="color:#080;font-style:italic">// Overflow to the right glass in the next row.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                currRow[j]       <span style="color:#666">=</span> <span style="color:#666">1</span>;  <span style="color:#080;font-style:italic">// Set current glass to 1 (maximum capacity).
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            }
</span></span><span style="display:flex;"><span>        }
</span></span></code></pre></div><ul>
<li>In this loop, we check each glass in the current row (<code>currRow</code>). If a glass contains more than 1 unit of champagne, the excess is distributed equally to the two glasses directly below it (in the next row).</li>
<li>We update the <code>currRow</code> to reflect that the current glass has reached its maximum capacity of 1.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">!=</span> query_row) currRow <span style="color:#666">=</span> nextrow;  <span style="color:#080;font-style:italic">// Update the current row to the next row.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    }
</span></span></code></pre></div><ul>
<li>Once we have processed the current row, we update <code>currRow</code> to <code>nextrow</code> for the next iteration. If we&rsquo;ve reached the row of interest (<code>query_row</code>), we stop updating <code>currRow</code>.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">return</span> currRow[query_glass];  <span style="color:#080;font-style:italic">// Return the amount of champagne in the queried glass.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>}
</span></span></code></pre></div><ul>
<li>After the loop finishes, <code>currRow</code> contains the amount of champagne in each glass of the <code>query_row</code>. We simply return the amount in the <code>query_glass</code>.</li>
</ul>
<h3 id="complexity">Complexity</h3>
<h4 id="time-complexity">Time Complexity:</h4>
<p>The time complexity of the solution is <strong>O(query_row)</strong>, where <code>query_row</code> is the row we are interested in. This is because:</p>
<ul>
<li>For each row, we process each glass in the row, and the number of glasses in each row is <code>i + 1</code> (where <code>i</code> is the current row index).</li>
<li>The total number of glasses we process is approximately the sum of the first <code>query_row</code> integers, which is O(query_row^2).</li>
<li>Since we only need to process up to <code>query_row</code> and not all rows, the time complexity is O(query_row).</li>
</ul>
<h4 id="space-complexity">Space Complexity:</h4>
<p>The space complexity is <strong>O(query_row)</strong> because:</p>
<ul>
<li>We only store the <code>currRow</code> and <code>nextrow</code> arrays, each of which can have at most <code>query_row + 1</code> elements.</li>
<li>Thus, the space complexity is linear in the number of rows, i.e., O(query_row).</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>The solution efficiently simulates the pouring process in the champagne tower using two arrays (<code>currRow</code> and <code>nextrow</code>) to track the amount of champagne in each glass at each stage. By iterating over each row up to the <code>query_row</code>, the solution determines the amount of champagne in the specified glass without needing to store the entire tower structure.</p>
<p>This approach is both time and space efficient, with a time complexity of O(query_row) and a space complexity of O(query_row). It effectively handles the problem constraints and provides the correct result for any valid input values.</p>
<p><a href="https://leetcode.com/problems/champagne-tower/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/LQ8TuG_QADM?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
