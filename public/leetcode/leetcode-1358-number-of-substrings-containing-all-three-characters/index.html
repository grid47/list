<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 1358: Number of Substrings Containing All Three Characters | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1358: Number of Substrings Containing All Three Characters">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1358: Number of Substrings Containing All Three Characters in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-1358-number-of-substrings-containing-all-three-characters/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1358: Number of Substrings Containing All Three Characters">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1358: Number of Substrings Containing All Three Characters in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-06-24T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Hash Table">
    <meta property="article:tag" content="String">
    <meta property="article:tag" content="Sliding Window">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 1358: Number of Substrings Containing All Three Characters</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode172s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> numberOfSubstrings(string s) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#00a000">atmost</span>(s, <span style="color:#666">3</span>) <span style="color:#666">-</span> atmost(s, <span style="color:#666">2</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">atmost</span>(string s, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>        map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">char</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> ma;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>, j <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> s.size(); i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            ma[s[i]]<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(ma[s[i]] <span style="color:#666">==</span> <span style="color:#666">1</span>) k<span style="color:#666">--</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">while</span>(k <span style="color:#666">&lt;</span> <span style="color:#666">0</span>) {
</span></span><span style="display:flex;"><span>                ma[s[j]]<span style="color:#666">--</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">if</span>(ma[s[j]] <span style="color:#666">==</span> <span style="color:#666">0</span>) k<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>                j<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            res <span style="color:#666">+=</span> (i <span style="color:#666">-</span> j <span style="color:#666">+</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The task is to count the number of substrings within a given string <code>s</code> that contain at most <code>k</code> distinct characters. The method implemented is specifically designed to count the substrings that contain exactly 1, 2, or 3 distinct characters. The overall goal is to find the count of substrings with exactly 3 distinct characters by utilizing the counts of substrings with at most 2 and 3 distinct characters.</p>
<h3 id="approach">Approach</h3>
<ol>
<li><strong>Two-Pointer Technique</strong>: This approach employs the two-pointer or sliding window technique to efficiently count the number of valid substrings.</li>
<li><strong>Counting Substrings with At Most k Distinct Characters</strong>: The function <code>atmost</code> is implemented to count the number of substrings that have at most <code>k</code> distinct characters. This function is called twice:
<ul>
<li>Once for <code>k = 3</code> to count substrings with at most 3 distinct characters.</li>
<li>Once for <code>k = 2</code> to count substrings with at most 2 distinct characters.</li>
</ul>
</li>
<li><strong>Subtracting Counts</strong>: The difference between the results of these two calls gives the count of substrings with exactly 3 distinct characters.</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> numberOfSubstrings(string s) {
</span></span><span style="display:flex;"><span>        <span style="color:#080;font-style:italic">// Calculate the number of substrings with exactly 3 distinct characters
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#00a000">atmost</span>(s, <span style="color:#666">3</span>) <span style="color:#666">-</span> atmost(s, <span style="color:#666">2</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">atmost</span>(string s, <span style="color:#0b0;font-weight:bold">int</span> k) {
</span></span><span style="display:flex;"><span>        map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">char</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> ma; <span style="color:#080;font-style:italic">// To store the count of each character
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>, j <span style="color:#666">=</span> <span style="color:#666">0</span>; <span style="color:#080;font-style:italic">// res to store the result, j for the left pointer
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> s.size(); i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            ma[s[i]]<span style="color:#666">++</span>; <span style="color:#080;font-style:italic">// Increment count of the current character
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#a2f;font-weight:bold">if</span>(ma[s[i]] <span style="color:#666">==</span> <span style="color:#666">1</span>) k<span style="color:#666">--</span>; <span style="color:#080;font-style:italic">// New character found, decrement k
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#080;font-style:italic">// Adjust the left pointer j to maintain at most k distinct characters
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#a2f;font-weight:bold">while</span>(k <span style="color:#666">&lt;</span> <span style="color:#666">0</span>) {
</span></span><span style="display:flex;"><span>                ma[s[j]]<span style="color:#666">--</span>; <span style="color:#080;font-style:italic">// Decrease the count of the character at j
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                <span style="color:#a2f;font-weight:bold">if</span>(ma[s[j]] <span style="color:#666">==</span> <span style="color:#666">0</span>) k<span style="color:#666">++</span>; <span style="color:#080;font-style:italic">// If count becomes 0, increment k
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                j<span style="color:#666">++</span>; <span style="color:#080;font-style:italic">// Move the left pointer to the right
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#080;font-style:italic">// Count the number of valid substrings ending at i
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            res <span style="color:#666">+=</span> (i <span style="color:#666">-</span> j <span style="color:#666">+</span> <span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res; <span style="color:#080;font-style:italic">// Return the total count of valid substrings
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ol>
<li>
<p><strong>Function <code>numberOfSubstrings</code></strong>: This function orchestrates the counting process. It returns the difference between the number of substrings with at most 3 and at most 2 distinct characters. This effectively counts substrings with exactly 3 distinct characters.</p>
</li>
<li>
<p><strong>Function <code>atmost</code></strong>: This function takes a string and an integer <code>k</code>, and counts all substrings that contain at most <code>k</code> distinct characters:</p>
<ul>
<li><strong>Map Initialization</strong>: It uses a map <code>ma</code> to keep track of the frequency of characters in the current window.</li>
<li><strong>Iterating Through the String</strong>: The outer loop iterates through the string using index <code>i</code> (right pointer). For each character, its count in the map is incremented.</li>
<li><strong>Updating Distinct Count</strong>: If a new character is added to the window, <code>k</code> is decremented. If <code>k</code> becomes negative (indicating more than <code>k</code> distinct characters), the inner loop adjusts the left pointer <code>j</code> to reduce the window size until there are at most <code>k</code> distinct characters.</li>
<li><strong>Counting Valid Substrings</strong>: The count of valid substrings that end at index <code>i</code> is added to <code>res</code>, which is calculated as the size of the current window (<code>i - j + 1</code>).</li>
</ul>
</li>
<li>
<p><strong>Return Statement</strong>: The function returns the total count of valid substrings.</p>
</li>
</ol>
<h3 id="complexity-analysis">Complexity Analysis</h3>
<ul>
<li>
<p><strong>Time Complexity</strong>:</p>
<ul>
<li>The overall time complexity of the algorithm is (O(n)), where (n) is the length of the string. This is due to the two-pointer technique, where each character is processed a limited number of times as the pointers <code>i</code> and <code>j</code> traverse the string.</li>
</ul>
</li>
<li>
<p><strong>Space Complexity</strong>:</p>
<ul>
<li>The space complexity is (O(k)), where (k) is the number of distinct characters being tracked. In the worst case (where all characters are distinct), this would be (O(1)) since the character set size is constant (26 for lowercase English letters).</li>
</ul>
</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>The <code>numberOfSubstrings</code> method effectively counts the number of substrings in a given string that contain exactly 3 distinct characters. By leveraging the two-pointer technique and a frequency map, the solution remains efficient even for larger input sizes. This approach not only optimizes the counting process but also highlights the importance of understanding distinct character constraints in substring problems.</p>
<p>This explanation serves as an educational resource for understanding how to tackle substring-related problems using efficient algorithms and data structures, providing insight into both the coding aspect and the underlying logic.</p>
<p><a href="https://leetcode.com/problems/number-of-substrings-containing-all-three-characters/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>
<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
