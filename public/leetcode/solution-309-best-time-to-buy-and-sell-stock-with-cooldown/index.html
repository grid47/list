<!DOCTYPE html>
<html lang="en-us"><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 309: Best Time to Buy and Sell Stock with Cooldown | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 309: Best Time to Buy and Sell Stock with Cooldown">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 309: Best Time to Buy and Sell Stock with Cooldown in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="https://www.grid47.xyz/leetcode/solution-309-best-time-to-buy-and-sell-stock-with-cooldown/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 309: Best Time to Buy and Sell Stock with Cooldown">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 309: Best Time to Buy and Sell Stock with Cooldown in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-10-07T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Dynamic Programming">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="https://www.grid47.xyz/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="https://www.grid47.xyz/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="https://www.grid47.xyz//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/courses/">Course</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
    <div class="main-content">
        
        <div class="container">
            <div class="row">
                
                <div class="col-md-2 pl-0"><div class="share sticky-top sticky-top-offset">
    <p>Share</p>
    <ul>
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://twitter.com/intent/tweet?text=Leetcode%20309%3a%20Best%20Time%20to%20Buy%20and%20Sell%20Stock%20with%20Cooldown&url=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-309-best-time-to-buy-and-sell-stock-with-cooldown%2f" 
               onclick="window.open(this.href, 'twitter-share', 'width=550,height=435');return false;">
                <i class="fab fa-twitter"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://facebook.com/sharer.php?u=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-309-best-time-to-buy-and-sell-stock-with-cooldown%2f" 
               onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
                <i class="fab fa-facebook-f"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-309-best-time-to-buy-and-sell-stock-with-cooldown%2f&title=Leetcode%20309%3a%20Best%20Time%20to%20Buy%20and%20Sell%20Stock%20with%20Cooldown" 
               onclick="window.open(this.href, 'linkedin-share', 'width=550,height=435');return false;">
                <i class="fab fa-linkedin-in"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://reddit.com/submit?url=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-309-best-time-to-buy-and-sell-stock-with-cooldown%2f&title=Leetcode%20309%3a%20Best%20Time%20to%20Buy%20and%20Sell%20Stock%20with%20Cooldown" 
               onclick="window.open(this.href, 'reddit-share', 'width=550,height=435');return false;">
                <i class="fab fa-reddit-alien"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://api.whatsapp.com/send?text=Leetcode%20309%3a%20Best%20Time%20to%20Buy%20and%20Sell%20Stock%20with%20Cooldown%20https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-309-best-time-to-buy-and-sell-stock-with-cooldown%2f" 
               onclick="window.open(this.href, 'whatsapp-share', 'width=550,height=435');return false;">
                <i class="fab fa-whatsapp"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://telegram.me/share/url?url=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-309-best-time-to-buy-and-sell-stock-with-cooldown%2f&text=Leetcode%20309%3a%20Best%20Time%20to%20Buy%20and%20Sell%20Stock%20with%20Cooldown" 
               onclick="window.open(this.href, 'telegram-share', 'width=550,height=435');return false;">
                <i class="fab fa-telegram-plane"></i>
            </a>
        </li>
        
        <li class="ml-1 mr-1">
            <a target="_blank" href="mailto:?subject=Leetcode%20309%3a%20Best%20Time%20to%20Buy%20and%20Sell%20Stock%20with%20Cooldown&body=https%3a%2f%2fwww.grid47.xyz%2fleetcode%2fsolution-309-best-time-to-buy-and-sell-stock-with-cooldown%2f" 
               onclick="window.open(this.href, 'email-share', 'width=550,height=435');return false;">
                <i class="fas fa-envelope"></i>
            </a>
        </li> 
    </ul>

    
</div>
</div>
                                
                <div class="col-md-9 flex-first flex-md-unordered">
                    <div class="mainheading">
                        
                        <h1 class="posttitle">Leetcode 309: Best Time to Buy and Sell Stock with Cooldown</h1> 
                        
                        
                        
                        
                        <div class="row post-top-meta">
                            <div class="col-xs-12 col-md-3 col-lg-2 text-center text-md-left mb-4 mb-md-0 md-nopad-right">
                                <img class="author-thumb" src="/images/logo.png" alt="grid47">
                            </div>
                            <div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-left md-nopad-left">
                                <a target="_blank" class="link-dark">grid47</a><br>
                                <span class="author-description">
                                    Exploring patterns and algorithms<br>
                                    <i class="far fa-star"></i>
                                    Oct 7, 2024
                                    <i class="far fa-clock clock"></i>
                                    5 min read
                                </span>					
                            </div>
                        </div>			
                        	
                        
                                                                   
                    </div>

                    
                    
                    
                    

                    
                    <div class="article-post">
                        <h2 id="hahahugoshortcode1049s0hbhb"><figure class="remote-image" style="text-align:center; margin: 0;">
    <div style="position: relative; width:900px; max-width:100%; padding-bottom:56.25%; overflow: hidden; border-radius:0px;">
      <img src="https://raw.githubusercontent.com/grid47/list-images/refs/heads/main/list/309.webp" 
           alt="A graph of stock prices where the optimal buying and selling points are gently illuminated, with cooldown periods clearly marked" 
           style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
    </div>
    
      <figcaption style="font-size: 0.8em; font-weight: 300; color:#555; margin-top: 4px; line-height: 1.2;">
        Solution to LeetCode 309: Best Time to Buy and Sell Stock with Cooldown Problem
      </figcaption>
    
  </figure>
  </h2>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode1049s1hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> memo[<span style="color:#666">5001</span>][<span style="color:#666">2</span>][<span style="color:#666">2</span>];
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> nums;
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">dp</span>(<span style="color:#0b0;font-weight:bold">int</span> idx, <span style="color:#0b0;font-weight:bold">bool</span> buy, <span style="color:#0b0;font-weight:bold">bool</span> cool) {
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(idx <span style="color:#666">==</span> nums.size()) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(memo[idx][buy][cool] <span style="color:#666">!=</span> <span style="color:#666">-</span><span style="color:#666">1</span>) <span style="color:#a2f;font-weight:bold">return</span> memo[idx][buy][cool];
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> dp(idx <span style="color:#666">+</span> <span style="color:#666">1</span>, buy, <span style="color:#a2f">false</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">if</span>(buy <span style="color:#666">&amp;&amp;</span> <span style="color:#666">!</span>cool) {
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> max(res, dp(idx <span style="color:#666">+</span> <span style="color:#666">1</span>, <span style="color:#a2f">false</span>, <span style="color:#a2f">false</span>) <span style="color:#666">-</span> nums[idx]);
</span></span><span style="display:flex;"><span>        } <span style="color:#a2f;font-weight:bold">else</span> <span style="color:#a2f;font-weight:bold">if</span>(<span style="color:#666">!</span>buy) {
</span></span><span style="display:flex;"><span>            res <span style="color:#666">=</span> max(res, dp(idx <span style="color:#666">+</span> <span style="color:#666">1</span>, <span style="color:#a2f">true</span>, <span style="color:#a2f">true</span>) <span style="color:#666">+</span> nums[idx]);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> memo[idx][buy][cool] <span style="color:#666">=</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">maxProfit</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> prices) {
</span></span><span style="display:flex;"><span>        memset(memo, <span style="color:#666">-</span><span style="color:#666">1</span>, <span style="color:#a2f;font-weight:bold">sizeof</span>(memo));
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">-&gt;</span>nums <span style="color:#666">=</span> prices;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> dp(<span style="color:#666">0</span>, <span style="color:#a2f">true</span>, <span style="color:#a2f">false</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="-problem-statement">üöÄ Problem Statement</h3>
<p>Imagine you‚Äôre a savvy stock trader üìà, and you want to maximize your profit by buying and selling shares of a stock over several days. However, there are a few rules:</p>
<ol>
<li>You can <strong>buy</strong> one share of the stock on any day.</li>
<li>You can <strong>sell</strong> one share of the stock on any day.</li>
<li>After selling a share, you need to wait one day before you can buy again (this is the &ldquo;cooldown&rdquo; period ‚ùÑÔ∏è).</li>
</ol>
<p>Your task is to calculate the <strong>maximum profit</strong> possible from these transactions given an array <code>prices</code> where <code>prices[i]</code> is the stock price on day <code>i</code>.</p>
<p>For example:</p>
<ul>
<li><strong>Input:</strong> <code>[1, 2, 3, 0, 2]</code></li>
<li><strong>Output:</strong> <code>3</code></li>
</ul>
<p>The optimal transactions here would be buying on day 0, selling on day 2, waiting on day 3, and buying again on day 4 for a maximum profit of 3.</p>
<hr>
<h3 id="-approach">üß† Approach</h3>
<p>To tackle this problem, we&rsquo;ll use <strong>Dynamic Programming (DP)</strong> to break it down into manageable pieces. At each day, we‚Äôll decide whether to buy, sell, or wait based on what will maximize our profit.</p>
<h4 id="key-states"><strong>Key States</strong></h4>
<p>Let&rsquo;s break down the states we need to track:</p>
<ul>
<li><strong>Day (<code>idx</code>)</strong>: The current day we&rsquo;re considering.</li>
<li><strong>Buy (<code>buy</code>)</strong>: Whether we&rsquo;re allowed to buy on the current day (<code>true</code> if yes, <code>false</code> if no).</li>
<li><strong>Cooldown (<code>cool</code>)</strong>: Whether we&rsquo;re in the cooldown period after a sale (<code>true</code> if yes, <code>false</code> if no).</li>
</ul>
<p>Each state is like a checkpoint in our journey to maximizing profit, represented by the tuple <code>(idx, buy, cool)</code>.</p>
<h4 id="recursive-plan-with-memoization"><strong>Recursive Plan with Memoization</strong></h4>
<p>The core of our approach will be a recursive function with <strong>memoization</strong> to avoid recalculating results for the same states. We‚Äôll consider two main actions for each day based on our state:</p>
<ol>
<li>
<p><strong>If we‚Äôre allowed to buy</strong>, we can either:</p>
<ul>
<li><strong>Skip</strong> the day without buying.</li>
<li><strong>Buy</strong> the stock and move to the next day with a &ldquo;cooldown&rdquo; period after the buy.</li>
</ul>
</li>
<li>
<p><strong>If we‚Äôre in the &ldquo;sell&rdquo; state</strong> (i.e., <code>buy = false</code>), we can:</p>
<ul>
<li><strong>Skip</strong> the day.</li>
<li><strong>Sell</strong> the stock and enter the &ldquo;cooldown&rdquo; state the following day.</li>
</ul>
</li>
</ol>
<hr>
<h3 id="-step-by-step-code-breakdown">üî® Step-by-Step Code Breakdown</h3>
<p>Here&rsquo;s how this all translates into code:</p>
<h4 id="1-memoization-table-"><strong>1. Memoization Table</strong> üìù</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> memo[<span style="color:#666">5001</span>][<span style="color:#666">2</span>][<span style="color:#666">2</span>];
</span></span></code></pre></div><ul>
<li>This 3D array will store results for each <code>(idx, buy, cool)</code> state to avoid redundant calculations.</li>
</ul>
<h4 id="2-recursive-dp-function-"><strong>2. Recursive DP Function</strong> üìê</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">dp</span>(<span style="color:#0b0;font-weight:bold">int</span> idx, <span style="color:#0b0;font-weight:bold">bool</span> buy, <span style="color:#0b0;font-weight:bold">bool</span> cool) {
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span> (idx <span style="color:#666">==</span> nums.size()) <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">0</span>; <span style="color:#080;font-style:italic">// Base case: reached end of days
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span> (memo[idx][buy][cool] <span style="color:#666">!=</span> <span style="color:#666">-</span><span style="color:#666">1</span>) <span style="color:#a2f;font-weight:bold">return</span> memo[idx][buy][cool]; <span style="color:#080;font-style:italic">// Return memoized result
</span></span></span></code></pre></div><ul>
<li><strong>Base Case:</strong> When <code>idx</code> equals the length of <code>prices</code>, we‚Äôve processed all days, so profit is <code>0</code>.</li>
<li><strong>Memoization:</strong> If we‚Äôve already calculated the result for the state <code>(idx, buy, cool)</code>, return it directly.</li>
</ul>
<h4 id="3-decision-making-"><strong>3. Decision Making</strong> üí°</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> dp(idx <span style="color:#666">+</span> <span style="color:#666">1</span>, buy, <span style="color:#a2f">false</span>); <span style="color:#080;font-style:italic">// Skip the current day
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">if</span> (buy <span style="color:#666">&amp;&amp;</span> <span style="color:#666">!</span>cool) { <span style="color:#080;font-style:italic">// If we can buy and we&#39;re not in cooldown
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    res <span style="color:#666">=</span> max(res, dp(idx <span style="color:#666">+</span> <span style="color:#666">1</span>, <span style="color:#a2f">false</span>, <span style="color:#a2f">false</span>) <span style="color:#666">-</span> nums[idx]); <span style="color:#080;font-style:italic">// Buy stock
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>} <span style="color:#a2f;font-weight:bold">else</span> <span style="color:#00a000">if</span> (<span style="color:#666">!</span>buy) { <span style="color:#080;font-style:italic">// If we can&#39;t buy (in selling state)
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    res <span style="color:#666">=</span> max(res, dp(idx <span style="color:#666">+</span> <span style="color:#666">1</span>, <span style="color:#a2f">true</span>, <span style="color:#a2f">true</span>) <span style="color:#666">+</span> nums[idx]); <span style="color:#080;font-style:italic">// Sell stock and enter cooldown
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>}
</span></span></code></pre></div><ul>
<li><strong>Skip the Day:</strong> Profit remains unchanged if we do nothing.</li>
<li><strong>Buy</strong>: If we&rsquo;re in the &ldquo;buy&rdquo; state and not in cooldown, consider buying the stock.</li>
<li><strong>Sell</strong>: If we&rsquo;re in the &ldquo;sell&rdquo; state, consider selling and entering the cooldown.</li>
</ul>
<h4 id="4-memoize-the-result-"><strong>4. Memoize the Result</strong> üìå</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> memo[idx][buy][cool] <span style="color:#666">=</span> res; <span style="color:#080;font-style:italic">// Store result for future reference
</span></span></span></code></pre></div><ul>
<li>Save the computed result for the current state to use later.</li>
</ul>
<h4 id="5-main-function-"><strong>5. Main Function</strong> üíº</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">maxProfit</span>(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> prices) {
</span></span><span style="display:flex;"><span>    memset(memo, <span style="color:#666">-</span><span style="color:#666">1</span>, <span style="color:#a2f;font-weight:bold">sizeof</span>(memo)); <span style="color:#080;font-style:italic">// Initialize memo table
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">this</span><span style="color:#666">-&gt;</span>nums <span style="color:#666">=</span> prices; <span style="color:#080;font-style:italic">// Store prices in the global vector
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    <span style="color:#a2f;font-weight:bold">return</span> dp(<span style="color:#666">0</span>, <span style="color:#a2f">true</span>, <span style="color:#a2f">false</span>); <span style="color:#080;font-style:italic">// Start recursion with first day
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>}
</span></span></code></pre></div><ul>
<li>Initialize memo table with <code>-1</code>, indicating no states have been processed.</li>
<li>Start the recursive function with <code>idx = 0</code>, <code>buy = true</code>, and <code>cool = false</code>.</li>
</ul>
<hr>
<h3 id="-complexity-analysis">üìà Complexity Analysis</h3>
<h4 id="time-complexity-"><strong>Time Complexity</strong> ‚è±Ô∏è</h4>
<ul>
<li><strong>O(n)</strong>, where <code>n</code> is the number of days in the <code>prices</code> array. This is because each state <code>(idx, buy, cool)</code> is processed once due to memoization, making the recursion efficient.</li>
</ul>
<h4 id="space-complexity-"><strong>Space Complexity</strong> üíæ</h4>
<ul>
<li><strong>O(n)</strong>, which accounts for the memoization table to store results for each <code>(idx, buy, cool)</code> state.</li>
</ul>
<hr>
<h3 id="-conclusion">üèÅ Conclusion</h3>
<p>This DP-based solution efficiently calculates the maximum profit for the given stock trading scenario with cooldowns. By storing results for each subproblem and reusing them, we avoid unnecessary recalculations and achieve optimal performance.</p>
<hr>
<h4 id="-summary">üéâ Summary</h4>
<p>Using dynamic programming and memoization, we tackled a complex stock trading scenario with a cooldown rule. This approach ensures an <strong>O(n)</strong> time complexity, making it efficient even for large inputs.</p>
<p>Happy trading! Remember, just like in coding, patience and strategy make all the difference. üí™üìà</p>
<p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/t2Tw5kVkmEY?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

                    </div>
                    
                    
                    <div class="after-post-tags">
                        <ul class="tags">
                        
                        <li>
                        <a href="/tags/array">Array</a>
                        </li>
                        
                        <li>
                        <a href="/tags/dynamic-programming">Dynamic Programming</a>
                        </li>
                        
                        </ul>
                    </div>
                                        
                    
                    <div class="row PageNavigation d-flex justify-content-between font-weight-bold">
                    
                        <a class="d-block col-md-6" href="https://www.grid47.xyz/leetcode/solution-300-longest-increasing-subsequence/"> &laquo; Leetcode 300: Longest Increasing Subsequence</a>
                    
                    
                        <a class="d-block col-md-6 text-lg-right" href="https://www.grid47.xyz/leetcode/solution-310-minimum-height-trees/">Leetcode 310: Minimum Height Trees &raquo;</a>
                    
                    <div class="clearfix"></div>
                    </div>                                                            
                    
                </div>
                
            </div>
        </div>
        
        
    </div>


            </div>
<div class="jumbotron fortags">
	<div class="d-md-flex h-100">
		<div class="col-md-4 transpdark align-self-center text-center h-100">
			<div class="d-md-flex align-items-center justify-content-center h-100">
				<h2 class="d-md-block d-none align-self-center py-1 font-weight-light">Explore <span class="d-none d-md-inline">‚Üí</span></h2>
			</div>
		</div>
		<div class="col-md-8 p-5 align-self-center text-center">
			
			<a class="mt-1 mb-1" href="/tags/array">array</a>
			
			<a class="mt-1 mb-1" href="/tags/backtracking">backtracking</a>
			
			<a class="mt-1 mb-1" href="/tags/binary-indexed-tree">binary indexed tree</a>
			
			<a class="mt-1 mb-1" href="/tags/binary-search">binary search</a>
			
			<a class="mt-1 mb-1" href="/tags/binary-search-tree">binary search tree</a>
			
			<a class="mt-1 mb-1" href="/tags/binary-tree">binary tree</a>
			
			<a class="mt-1 mb-1" href="/tags/bit-manipulation">bit manipulation</a>
			
			<a class="mt-1 mb-1" href="/tags/bitmask">bitmask</a>
			
			<a class="mt-1 mb-1" href="/tags/brainteaser">brainteaser</a>
			
			<a class="mt-1 mb-1" href="/tags/breadth-first-search">breadth-first search</a>
			
			<a class="mt-1 mb-1" href="/tags/bucket-sort">bucket sort</a>
			
			<a class="mt-1 mb-1" href="/tags/combinatorics">combinatorics</a>
			
			<a class="mt-1 mb-1" href="/tags/concurrency">concurrency</a>
			
			<a class="mt-1 mb-1" href="/tags/counting">counting</a>
			
			<a class="mt-1 mb-1" href="/tags/counting-sort">counting sort</a>
			
			<a class="mt-1 mb-1" href="/tags/data-stream">data stream</a>
			
			<a class="mt-1 mb-1" href="/tags/database">database</a>
			
			<a class="mt-1 mb-1" href="/tags/depth-first-search">depth-first search</a>
			
			<a class="mt-1 mb-1" href="/tags/design">design</a>
			
			<a class="mt-1 mb-1" href="/tags/divide-and-conquer">divide and conquer</a>
			
			<a class="mt-1 mb-1" href="/tags/doubly-linked-list">doubly-linked list</a>
			
			<a class="mt-1 mb-1" href="/tags/dynamic-programming">dynamic programming</a>
			
			<a class="mt-1 mb-1" href="/tags/enumeration">enumeration</a>
			
			<a class="mt-1 mb-1" href="/tags/game-theory">game theory</a>
			
			<a class="mt-1 mb-1" href="/tags/geometry">geometry</a>
			
			<a class="mt-1 mb-1" href="/tags/graph">graph</a>
			
			<a class="mt-1 mb-1" href="/tags/greedy">greedy</a>
			
			<a class="mt-1 mb-1" href="/tags/hash-function">hash function</a>
			
			<a class="mt-1 mb-1" href="/tags/hash-table">hash table</a>
			
			<a class="mt-1 mb-1" href="/tags/heap-priority-queue">heap (priority queue)</a>
			
			<a class="mt-1 mb-1" href="/tags/interactive">interactive</a>
			
			<a class="mt-1 mb-1" href="/tags/iterator">iterator</a>
			
			<a class="mt-1 mb-1" href="/tags/linked-list">linked list</a>
			
			<a class="mt-1 mb-1" href="/tags/math">math</a>
			
			<a class="mt-1 mb-1" href="/tags/matrix">matrix</a>
			
			<a class="mt-1 mb-1" href="/tags/memoization">memoization</a>
			
			<a class="mt-1 mb-1" href="/tags/minimum-spanning-tree">minimum spanning tree</a>
			
			<a class="mt-1 mb-1" href="/tags/monotonic-queue">monotonic queue</a>
			
			<a class="mt-1 mb-1" href="/tags/monotonic-stack">monotonic stack</a>
			
			<a class="mt-1 mb-1" href="/tags/number-theory">number theory</a>
			
			<a class="mt-1 mb-1" href="/tags/ordered-set">ordered set</a>
			
			<a class="mt-1 mb-1" href="/tags/prefix-sum">prefix sum</a>
			
			<a class="mt-1 mb-1" href="/tags/probability-and-statistics">probability and statistics</a>
			
			<a class="mt-1 mb-1" href="/tags/queue">queue</a>
			
			<a class="mt-1 mb-1" href="/tags/quickselect">quickselect</a>
			
			<a class="mt-1 mb-1" href="/tags/radix-sort">radix sort</a>
			
			<a class="mt-1 mb-1" href="/tags/randomized">randomized</a>
			
			<a class="mt-1 mb-1" href="/tags/recursion">recursion</a>
			
			<a class="mt-1 mb-1" href="/tags/reservoir-sampling">reservoir sampling</a>
			
			<a class="mt-1 mb-1" href="/tags/rolling-hash">rolling hash</a>
			
			<a class="mt-1 mb-1" href="/tags/segment-tree">segment tree</a>
			
			<a class="mt-1 mb-1" href="/tags/shortest-path">shortest path</a>
			
			<a class="mt-1 mb-1" href="/tags/simulation">simulation</a>
			
			<a class="mt-1 mb-1" href="/tags/sliding-window">sliding window</a>
			
			<a class="mt-1 mb-1" href="/tags/sorting">sorting</a>
			
			<a class="mt-1 mb-1" href="/tags/stack">stack</a>
			
			<a class="mt-1 mb-1" href="/tags/string">string</a>
			
			<a class="mt-1 mb-1" href="/tags/string-matching">string matching</a>
			
			<a class="mt-1 mb-1" href="/tags/topological-sort">topological sort</a>
			
			<a class="mt-1 mb-1" href="/tags/tree">tree</a>
			
			<a class="mt-1 mb-1" href="/tags/trie">trie</a>
			
			<a class="mt-1 mb-1" href="/tags/two-pointers">two pointers</a>
			
			<a class="mt-1 mb-1" href="/tags/union-find">union find</a>
			
		</div>
	</div>
</div>

<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="https://www.grid47.xyz/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
