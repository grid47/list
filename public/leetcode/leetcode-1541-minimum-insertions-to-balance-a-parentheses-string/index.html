<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 1541: Minimum Insertions to Balance a Parentheses String | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1541: Minimum Insertions to Balance a Parentheses String">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1541: Minimum Insertions to Balance a Parentheses String in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-1541-minimum-insertions-to-balance-a-parentheses-string/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1541: Minimum Insertions to Balance a Parentheses String">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1541: Minimum Insertions to Balance a Parentheses String in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-06-05T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="String">
    <meta property="article:tag" content="Stack">
    <meta property="article:tag" content="Greedy">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 1541: Minimum Insertions to Balance a Parentheses String</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode266s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> minInsertions(string s) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> s.size();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        stack<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">char</span><span style="color:#666">&gt;</span> stk;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(s[i] <span style="color:#666">==</span> <span style="color:#b44">&#39;(&#39;</span>) {
</span></span><span style="display:flex;"><span>                stk.push(<span style="color:#b44">&#39;(&#39;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">continue</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">&lt;</span> n <span style="color:#666">&amp;&amp;</span> s[i <span style="color:#666">+</span> <span style="color:#666">1</span>] <span style="color:#666">==</span> <span style="color:#b44">&#39;)&#39;</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">if</span>(<span style="color:#666">!</span>stk.empty()) stk.pop();
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">else</span> res<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>                i<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>            } <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">if</span>(<span style="color:#666">!</span>stk.empty()) {stk.pop(); res<span style="color:#666">++</span>;}
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">else</span> res <span style="color:#666">+=</span> <span style="color:#666">2</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res <span style="color:#666">+</span> stk.size() <span style="color:#666">*</span> <span style="color:#666">2</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem at hand is to determine the minimum number of insertions needed to make a given string of parentheses valid. A string of parentheses is considered valid if:</p>
<ol>
<li>Every opening parenthesis <code>(</code> has a corresponding closing parenthesis <code>)</code>.</li>
<li>The parentheses are correctly nested.</li>
</ol>
<p>For example, the string <code>&quot;)(&quot;</code> is invalid and requires at least two insertions to become valid, such as by transforming it into <code>&quot;()&quot;</code>. Our goal is to efficiently calculate the minimum number of insertions required to achieve a valid configuration for any input string of parentheses.</p>
<h3 id="approach">Approach</h3>
<p>The solution employs a stack data structure to keep track of unmatched opening parentheses and a counter for necessary insertions. As we traverse the string:</p>
<ul>
<li>We push each opening parenthesis <code>(</code> onto the stack.</li>
<li>For each closing parenthesis <code>)</code>, we check if there is a corresponding unmatched opening parenthesis in the stack. If so, we pop it from the stack. If not, we increment our insertion counter since it indicates that an additional <code>(</code> is needed.</li>
<li>For unmatched closing parentheses <code>)</code> without a preceding <code>(</code>, we handle them based on whether the next character is also a <code>)</code>.</li>
<li>Finally, any unmatched opening parentheses left in the stack indicate the need for additional <code>)</code> insertions.</li>
</ul>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<p>Let’s delve into the code and explain each part:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> minInsertions(string s) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> res <span style="color:#666">=</span> <span style="color:#666">0</span>; <span style="color:#080;font-style:italic">// Step 1: Initialize the result counter
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> n <span style="color:#666">=</span> s.size(); <span style="color:#080;font-style:italic">// Step 2: Get the length of the input string
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>        
</span></span><span style="display:flex;"><span>        stack<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">char</span><span style="color:#666">&gt;</span> stk; <span style="color:#080;font-style:italic">// Step 3: Initialize a stack to hold unmatched &#39;(&#39;
</span></span></span></code></pre></div><ul>
<li><strong>Initialization</strong>: We start by initializing <code>res</code> to zero, which will keep track of the minimum number of insertions needed. We also determine the size of the input string and create a stack to manage unmatched opening parentheses.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) { <span style="color:#080;font-style:italic">// Step 4: Loop through each character in the string
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            <span style="color:#a2f;font-weight:bold">if</span>(s[i] <span style="color:#666">==</span> <span style="color:#b44">&#39;(&#39;</span>) {
</span></span><span style="display:flex;"><span>                stk.push(<span style="color:#b44">&#39;(&#39;</span>); <span style="color:#080;font-style:italic">// Step 5: Push &#39;(&#39; onto the stack
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                <span style="color:#a2f;font-weight:bold">continue</span>; <span style="color:#080;font-style:italic">// Continue to the next iteration
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>            }
</span></span></code></pre></div><ul>
<li><strong>Handling Opening Parentheses</strong>: As we iterate through the string, we check if the current character is an opening parenthesis <code>(</code>. If it is, we push it onto the stack and continue to the next character.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(i <span style="color:#666">+</span> <span style="color:#666">1</span> <span style="color:#666">&lt;</span> n <span style="color:#666">&amp;&amp;</span> s[i <span style="color:#666">+</span> <span style="color:#666">1</span>] <span style="color:#666">==</span> <span style="color:#b44">&#39;)&#39;</span>) { <span style="color:#080;font-style:italic">// Step 6: Check for a valid pair &#39;()&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                <span style="color:#a2f;font-weight:bold">if</span>(<span style="color:#666">!</span>stk.empty()) stk.pop(); <span style="color:#080;font-style:italic">// Step 7: Pop from the stack if there is a matching &#39;(&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                <span style="color:#a2f;font-weight:bold">else</span> res<span style="color:#666">++</span>; <span style="color:#080;font-style:italic">// Step 8: Increment result if no matching &#39;(&#39; is found
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                i<span style="color:#666">++</span>; <span style="color:#080;font-style:italic">// Step 9: Move to the next character
</span></span></span></code></pre></div><ul>
<li><strong>Handling Closing Parentheses</strong>: If we encounter a closing parenthesis <code>)</code>, we first check if the next character is also a closing parenthesis. If the next character is <code>)</code>, we have a potential matching pair:
<ul>
<li>If the stack is not empty (indicating an unmatched <code>(</code>), we pop it from the stack.</li>
<li>If the stack is empty (indicating no unmatched <code>(</code>), we increment <code>res</code> because we need an additional <code>(</code> to match this <code>)</code>.</li>
<li>We also increment <code>i</code> to skip the next character since it has been handled as part of the valid pair.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>            } <span style="color:#a2f;font-weight:bold">else</span> { <span style="color:#080;font-style:italic">// Step 10: Handle the case of a standalone closing parenthesis &#39;)&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                <span style="color:#a2f;font-weight:bold">if</span>(<span style="color:#666">!</span>stk.empty()) {
</span></span><span style="display:flex;"><span>                    stk.pop(); <span style="color:#080;font-style:italic">// Step 11: Pop if there&#39;s a matching &#39;(&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                    res<span style="color:#666">++</span>; <span style="color:#080;font-style:italic">// Step 12: Increment result for the standalone &#39;)&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                } <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>                    res <span style="color:#666">+=</span> <span style="color:#666">2</span>; <span style="color:#080;font-style:italic">// Step 13: Need two insertions if there&#39;s no matching &#39;(&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span></code></pre></div><ul>
<li><strong>Standalone Closing Parentheses</strong>: If the current <code>)</code> does not have a matching <code>(</code> (which could happen if it&rsquo;s not immediately followed by another <code>)</code>), we check:
<ul>
<li>If the stack is not empty, we pop it and increment the result for the unmatched <code>)</code>.</li>
<li>If the stack is empty, we need to insert two parentheses: one <code>(</code> before this <code>)</code> and one <code>)</code> after it, so we increment <code>res</code> by 2.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res <span style="color:#666">+</span> stk.size() <span style="color:#666">*</span> <span style="color:#666">2</span>; <span style="color:#080;font-style:italic">// Step 14: Add unmatched &#39;(&#39; count to result and return
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ul>
<li><strong>Final Result Calculation</strong>: After processing all characters, any remaining unmatched opening parentheses in the stack mean we need to add <code>)</code> for each of them. Each unmatched <code>(</code> requires one <code>)</code>, so we add <code>stk.size() * 2</code> to <code>res</code> (for the closing parentheses). Finally, we return the total number of insertions needed.</li>
</ul>
<h3 id="complexity">Complexity</h3>
<h4 id="time-complexity">Time Complexity</h4>
<ul>
<li>The time complexity of this solution is (O(n)), where (n) is the length of the input string. This is because we traverse the string exactly once, processing each character in constant time.</li>
</ul>
<h4 id="space-complexity">Space Complexity</h4>
<ul>
<li>The space complexity is (O(n)) in the worst case due to the stack that can hold all opening parentheses if they are unmatched. In practice, the space used will depend on the structure of the input string.</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>This code effectively calculates the minimum number of insertions required to make a string of parentheses valid using a stack-based approach. By iterating through the string and managing unmatched parentheses with a stack, we efficiently determine the number of insertions needed.</p>
<p><strong>Key Takeaways</strong>:</p>
<ul>
<li><strong>Stack Usage</strong>: The stack is crucial for tracking unmatched opening parentheses, allowing us to efficiently check for matches.</li>
<li><strong>Handling Edge Cases</strong>: The code properly accounts for various scenarios, such as consecutive closing parentheses and standalone unmatched parentheses.</li>
<li><strong>Efficiency</strong>: The approach is linear, making it suitable for handling long strings within acceptable limits.</li>
</ul>
<p>Overall, this solution demonstrates a solid understanding of string manipulation and data structures, specifically how to apply a stack to manage nested structures. This method can be applied to various similar problems involving validation and correction of parentheses in strings.</p>
<p><a href="https://leetcode.com/problems/minimum-insertions-to-balance-a-parentheses-string/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/PEKAlnmbBCc?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
