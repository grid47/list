<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 2799: Count Complete Subarrays in an Array | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 2799: Count Complete Subarrays in an Array">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 2799: Count Complete Subarrays in an Array in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-2799-count-complete-subarrays-in-an-array/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 2799: Count Complete Subarrays in an Array">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 2799: Count Complete Subarrays in an Array in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-02-01T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Hash Table">
    <meta property="article:tag" content="Sliding Window">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 2799: Count Complete Subarrays in an Array</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode951s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0b0;font-weight:bold">int</span> countCompleteSubarrays(vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&amp;</span> nums) {
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> cnt <span style="color:#666">=</span> <span style="color:#666">0</span>;
</span></span><span style="display:flex;"><span>        set<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> dist;
</span></span><span style="display:flex;"><span>        map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> mp;
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> <span style="color:#a0a000">x</span>: nums)
</span></span><span style="display:flex;"><span>            dist.insert(x);
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> cur <span style="color:#666">=</span> <span style="color:#666">0</span>, req <span style="color:#666">=</span> dist.size();
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>, n <span style="color:#666">=</span> nums.size();
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            mp[nums[i]]<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">if</span>(mp.size() <span style="color:#666">&lt;</span> req) <span style="color:#a2f;font-weight:bold">continue</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">while</span>(mp.size() <span style="color:#666">&gt;=</span> req) {
</span></span><span style="display:flex;"><span>                cnt<span style="color:#666">+=</span> (n <span style="color:#666">-</span> i);
</span></span><span style="display:flex;"><span>                mp[nums[j]]<span style="color:#666">--</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">if</span>(mp[nums[j]] <span style="color:#666">==</span> <span style="color:#666">0</span>)
</span></span><span style="display:flex;"><span>                    mp.erase(nums[j]);
</span></span><span style="display:flex;"><span>                j<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> cnt;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The problem asks us to find the number of <strong>complete subarrays</strong> in a given array <code>nums</code>. A subarray is considered complete if it contains <strong>all the distinct elements</strong> that appear in the entire array. A complete subarray can be of any length, starting from a single element to the full array. The goal is to count all subarrays that are complete.</p>
<h3 id="approach">Approach</h3>
<p>To solve this problem, we can use a <strong>sliding window</strong> technique along with a <strong>hash map</strong> (or dictionary) to keep track of the elements in the current subarray. The key idea is to maintain a window of subarrays, adjusting its boundaries to ensure that every subarray has all distinct elements that appear in the entire array.</p>
<p>Hereâ€™s how we can approach it:</p>
<ol>
<li>
<p><strong>Identify the number of distinct elements</strong>: The first step is to find out how many distinct elements exist in the given array. This is done by inserting all elements into a <code>set</code>, which automatically filters out duplicates. The size of this <code>set</code> will give us the total number of distinct elements that any complete subarray must contain.</p>
</li>
<li>
<p><strong>Sliding Window Technique</strong>: The sliding window is formed by two pointers (<code>i</code> and <code>j</code>). The pointer <code>i</code> represents the right end of the window (current element being added), and <code>j</code> represents the left end of the window (elements being removed). As we slide the window, we attempt to adjust the window&rsquo;s size such that the subarray contains all distinct elements.</p>
</li>
<li>
<p><strong>Use of HashMap for Tracking Elements</strong>: A <code>map</code> (or hash map) is used to store the count of each element within the current window. The map helps us track how many times each element appears in the window. We can easily check if a window contains all the distinct elements by checking the size of the map.</p>
</li>
<li>
<p><strong>Counting Complete Subarrays</strong>: Once the window contains all distinct elements (i.e., the size of the map equals the number of distinct elements in the array), we start counting all subarrays that can be formed by the current window. The number of subarrays that can be formed with the current window is given by <code>(n - i)</code> where <code>n</code> is the total length of the array and <code>i</code> is the current index of the right pointer. For each valid window, we increment the count by this number.</p>
</li>
<li>
<p><strong>Shrinking the Window</strong>: After counting the valid subarrays, we attempt to shrink the window from the left by incrementing <code>j</code>. If shrinking the window still results in a valid subarray (i.e., it still contains all the distinct elements), we continue to count more subarrays. If it no longer contains all distinct elements, we stop and move to the next position of <code>i</code>.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step-break-the-code-to-parts">Code Breakdown (Step by Step, break the code to parts)</h3>
<ol>
<li>
<p><strong>Initialization</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>set<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> dist;
</span></span><span style="display:flex;"><span>map<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span>, <span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> mp;
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> <span style="color:#a0a000">x</span>: nums)
</span></span><span style="display:flex;"><span>    dist.insert(x);
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> cur <span style="color:#666">=</span> <span style="color:#666">0</span>, req <span style="color:#666">=</span> dist.size();
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>, n <span style="color:#666">=</span> nums.size();
</span></span></code></pre></div><ul>
<li>A <code>set&lt;int&gt; dist</code> is used to store all distinct elements in the array.</li>
<li>A <code>map&lt;int, int&gt; mp</code> is used to track the frequency of elements within the current window.</li>
<li>The <code>req</code> variable stores the number of distinct elements in the array.</li>
<li><code>j</code> is the left pointer of the window, and <code>n</code> is the size of the array.</li>
</ul>
</li>
<li>
<p><strong>Main Loop (Iterating over the Array)</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>    mp[nums[i]]<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(mp.size() <span style="color:#666">&lt;</span> req) <span style="color:#a2f;font-weight:bold">continue</span>;
</span></span></code></pre></div><ul>
<li>The <code>for</code> loop iterates over each element in the array with the <code>i</code> pointer.</li>
<li>For each element <code>nums[i]</code>, its count is incremented in the <code>map</code>.</li>
<li>If the size of the <code>map</code> is less than <code>req</code>, the current window does not contain all distinct elements, so we continue to the next element.</li>
</ul>
</li>
<li>
<p><strong>Counting Valid Subarrays</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">while</span>(mp.size() <span style="color:#666">&gt;=</span> req) {
</span></span><span style="display:flex;"><span>    cnt <span style="color:#666">+=</span> (n <span style="color:#666">-</span> i);
</span></span><span style="display:flex;"><span>    mp[nums[j]]<span style="color:#666">--</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">if</span>(mp[nums[j]] <span style="color:#666">==</span> <span style="color:#666">0</span>)
</span></span><span style="display:flex;"><span>        mp.erase(nums[j]);
</span></span><span style="display:flex;"><span>    j<span style="color:#666">++</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>When the window contains all the distinct elements (i.e., the size of <code>mp</code> is greater than or equal to <code>req</code>), we start counting valid subarrays.</li>
<li>The number of valid subarrays that can be formed from the current position of <code>i</code> is given by <code>(n - i)</code>, as any subarray starting from <code>i</code> and ending anywhere from <code>i</code> to <code>n-1</code> will be complete.</li>
<li>The element at <code>nums[j]</code> is removed from the window by decrementing its count in the <code>map</code>. If its count becomes zero, it is erased from the <code>map</code>.</li>
<li>The left pointer <code>j</code> is incremented to shrink the window.</li>
</ul>
</li>
<li>
<p><strong>Return the Result</strong>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> cnt;
</span></span></code></pre></div><ul>
<li>After iterating through the entire array, the variable <code>cnt</code> will contain the total number of complete subarrays, which is then returned as the result.</li>
</ul>
</li>
</ol>
<h3 id="complexity">Complexity</h3>
<ol>
<li>
<p><strong>Time Complexity</strong>:</p>
<ul>
<li><strong>O(n)</strong> where <code>n</code> is the number of elements in the array.</li>
<li>The outer loop iterates over each element of the array once, and for each element, the <code>j</code> pointer only moves forward, making it effectively a linear pass over the array. Each element is inserted and removed from the map at most once, so the overall time complexity is <strong>O(n)</strong>.</li>
</ul>
</li>
<li>
<p><strong>Space Complexity</strong>:</p>
<ul>
<li><strong>O(n)</strong> due to the space required to store the distinct elements in the <code>set</code> and the elements in the <code>map</code>.</li>
<li>In the worst case, if all elements in the array are distinct, the map will store all elements, and the set will contain <code>n</code> distinct elements.</li>
</ul>
</li>
</ol>
<h3 id="conclusion">Conclusion</h3>
<p>This solution efficiently counts the number of complete subarrays using the sliding window technique and hash map for tracking element counts. By maintaining a dynamic window, the algorithm can count all valid subarrays without having to brute force through all possible subarrays, which would be inefficient. With a time complexity of <strong>O(n)</strong>, this solution is optimal and works well for large input sizes.</p>
<p><a href="https://leetcode.com/problems/count-complete-subarrays-in-an-array/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/1wXkWZtSD28?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
