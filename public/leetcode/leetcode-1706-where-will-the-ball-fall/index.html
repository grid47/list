<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.136.4">
	
	<link rel="icon" href="/images/logo.png">
	
	<title>Leetcode 1706: Where Will the Ball Fall | grid47</title>
	
	

	
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1706: Where Will the Ball Fall">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1706: Where Will the Ball Fall in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">

	<meta property="og:url" content="http://localhost:1313/leetcode/leetcode-1706-where-will-the-ball-fall/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1706: Where Will the Ball Fall">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1706: Where Will the Ball Fall in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="leetcode">
    <meta property="article:published_time" content="2024-05-20T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-06T00:00:00+00:00">
    <meta property="article:tag" content="Array">
    <meta property="article:tag" content="Matrix">
    <meta property="article:tag" content="Simulation">


	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">

	
	<link rel="stylesheet" href="http://localhost:1313/css/medium.ced6b291f6520a092efe4c87ca4fc7047e1c3174b10653f78e13ca06f0bb6abf.css" integrity="sha256-ztaykfZSCgku/kyHyk/HBH4cMXSxBlP3jhPKBvC7ar8=">

	
	<link rel="stylesheet" href="http://localhost:1313/css/additional.8819b6defcdc6d21280f9b402b00df87ca779135901de6c22e708c62e20184b9.css" integrity="sha256-iBm23vzcbSEoD5tAKwDfh8p3kTWQHebCLnCMYuIBhLk=">

	
	
	<link rel="stylesheet" href="/css/head.css" integrity="" crossorigin="anonymous" media="screen">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="http://localhost:1313//">

            
            <img src="/images/logo.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/about/">About</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/leetcode/">LeetCode</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/terms/">Terms &amp; Policy</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">   
            <div class="container">
<div class="main-content">

<div class="container">
	<div class="row">
        <div class="col-md-1"></div>
		<div class="col-md-10">
			<div class="mainheading">
				<h1 class="posttitle">Leetcode 1706: Where Will the Ball Fall</h1> 
            </div>
			<div class="article-post">
				<hr>
<p><strong>Code:</strong></p>
<h2 id="hahahugoshortcode346s0hbhb"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> findBall(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> grid) {
</span></span><span style="display:flex;"><span>        vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> res;
</span></span><span style="display:flex;"><span>        <span style="color:#0b0;font-weight:bold">int</span> m <span style="color:#666">=</span> grid.size(), n <span style="color:#666">=</span> grid[<span style="color:#666">0</span>].size();
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#0b0;font-weight:bold">int</span> i1 <span style="color:#666">=</span> i, i2;
</span></span><span style="display:flex;"><span>            <span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>; j <span style="color:#666">&lt;</span> m; j<span style="color:#666">++</span>) {
</span></span><span style="display:flex;"><span>                i2 <span style="color:#666">=</span> i1 <span style="color:#666">+</span> grid[j][i1];
</span></span><span style="display:flex;"><span>                <span style="color:#a2f;font-weight:bold">if</span>(i2 <span style="color:#666">&lt;</span><span style="color:#666">0</span> <span style="color:#666">||</span> i2 <span style="color:#666">&gt;=</span> n <span style="color:#666">||</span> grid[j][i1] <span style="color:#666">!=</span> grid[j][i2]) {
</span></span><span style="display:flex;"><span>                    i1 <span style="color:#666">=</span> <span style="color:#666">-</span><span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>                    <span style="color:#a2f;font-weight:bold">break</span>;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                i1 <span style="color:#666">=</span> i2;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            res.push_back(i1);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div></h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The task is to simulate the movement of balls dropped through a grid of &ldquo;pipes.&rdquo; The grid is represented as a 2D array where each element can be either 1 or -1. A value of 1 means the ball can move to the right, while -1 means it can move to the left. The ball starts from the top of the grid at a specific column and falls down through the pipes. The goal is to determine the final position of each ball after it has fallen through the grid.</p>
<p>For instance, if a ball is dropped into a column with a sequence of pipes represented as follows:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span> [1, 1, 1, -1, -1],
</span></span><span style="display:flex;"><span> [1, 1, 1, -1, -1],
</span></span><span style="display:flex;"><span> [-1, -1, 1, 1, 1],
</span></span><span style="display:flex;"><span> [1, -1, -1, -1, 1],
</span></span><span style="display:flex;"><span> [1, 1, 1, 1, -1]
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p>The expected output would indicate where each ball that starts at the top of each column will exit the grid or if it gets stuck.</p>
<h3 id="approach">Approach</h3>
<p>To tackle this problem, we can follow a straightforward simulation approach:</p>
<ol>
<li>
<p><strong>Initialize Result Vector</strong>: Create a result vector to store the final positions of the balls.</p>
</li>
<li>
<p><strong>Simulate Each Ball Drop</strong>: For each column in the first row:</p>
<ul>
<li>Start with the current column index.</li>
<li>Move down the grid, checking the current cell to determine the ball&rsquo;s movement:
<ul>
<li>If the ball is at a pipe that directs it to the right (1), check if it can move to the right (the next column is within bounds and has a pipe that directs right).</li>
<li>If the ball is at a pipe that directs it to the left (-1), check if it can move to the left (the previous column is within bounds and has a pipe that directs left).</li>
</ul>
</li>
<li>If the ball gets stuck, mark its position as -1.</li>
</ul>
</li>
<li>
<p><strong>Record Final Position</strong>: Once a ball reaches the bottom row or gets stuck, record its position in the result vector.</p>
</li>
<li>
<p><strong>Return the Result</strong>: Finally, return the vector containing the final positions of all the balls.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">Code Breakdown (Step by Step)</h3>
<p>Let&rsquo;s analyze the provided code for better clarity:</p>
<ol>
<li>
<p><strong>Class Declaration</strong>: We define a class named <code>Solution</code>, which encapsulates our method for solving the problem.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">public</span><span style="color:#666">:</span>
</span></span></code></pre></div></li>
<li>
<p><strong>Method Declaration</strong>: We declare a public method called <code>findBall</code>, which takes a reference to a 2D vector of integers (<code>grid</code>) as input and returns a vector of integers representing the final positions of the balls.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> findBall(vector<span style="color:#666">&lt;</span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;&gt;&amp;</span> grid) {
</span></span></code></pre></div></li>
<li>
<p><strong>Variable Initialization</strong>: We initialize a result vector <code>res</code>, and two integer variables <code>m</code> and <code>n</code> to store the number of rows and columns in the grid, respectively.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>vector<span style="color:#666">&lt;</span><span style="color:#0b0;font-weight:bold">int</span><span style="color:#666">&gt;</span> res;
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> m <span style="color:#666">=</span> grid.size(), n <span style="color:#666">=</span> grid[<span style="color:#666">0</span>].size();
</span></span></code></pre></div></li>
<li>
<p><strong>Loop Through Each Column</strong>: We iterate through each column of the first row (from 0 to n-1) using a for loop.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> i <span style="color:#666">=</span> <span style="color:#666">0</span>; i <span style="color:#666">&lt;</span> n; i<span style="color:#666">++</span>) {
</span></span></code></pre></div></li>
<li>
<p><strong>Initialize Ball&rsquo;s Position</strong>: For each column, we initialize <code>i1</code> to represent the current column index and <code>i2</code> to hold the next column index.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> i1 <span style="color:#666">=</span> i, i2;
</span></span></code></pre></div></li>
<li>
<p><strong>Simulate Ball Movement</strong>: We then loop through each row of the grid, simulating the ball&rsquo;s descent.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">for</span>(<span style="color:#0b0;font-weight:bold">int</span> j <span style="color:#666">=</span> <span style="color:#666">0</span>; j <span style="color:#666">&lt;</span> m; j<span style="color:#666">++</span>) {
</span></span></code></pre></div></li>
<li>
<p><strong>Determine Next Position</strong>: Inside this loop, we calculate <code>i2</code>, which is the next column index where the ball would move based on the current pipe&rsquo;s direction.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>i2 <span style="color:#666">=</span> i1 <span style="color:#666">+</span> grid[j][i1];
</span></span></code></pre></div></li>
<li>
<p><strong>Check for Valid Movement</strong>: We check if the next column index is valid (within bounds) and if the current and next cells direct the ball in the same direction. If either condition fails, the ball gets stuck, and we set <code>i1</code> to -1.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">if</span>(i2 <span style="color:#666">&lt;</span> <span style="color:#666">0</span> <span style="color:#666">||</span> i2 <span style="color:#666">&gt;=</span> n <span style="color:#666">||</span> grid[j][i1] <span style="color:#666">!=</span> grid[j][i2]) {
</span></span><span style="display:flex;"><span>    i1 <span style="color:#666">=</span> <span style="color:#666">-</span><span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a2f;font-weight:bold">break</span>; <span style="color:#080;font-style:italic">// Ball is stuck
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>}
</span></span></code></pre></div></li>
<li>
<p><strong>Update Current Position</strong>: If the ball can move, we update <code>i1</code> to the new position <code>i2</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>i1 <span style="color:#666">=</span> i2; <span style="color:#080;font-style:italic">// Move the ball to the next position
</span></span></span></code></pre></div></li>
<li>
<p><strong>Record Final Position</strong>: After the inner loop completes (the ball has reached the last row), we add the final position of the ball to the result vector. If <code>i1</code> is -1 (indicating the ball got stuck), we add -1; otherwise, we add <code>i1</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>res.push_back(i1);
</span></span></code></pre></div></li>
<li>
<p><strong>Return the Result</strong>: Finally, we return the result vector containing the positions of all balls after they have fallen through the grid.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">return</span> res;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ol>
<h3 id="complexity">Complexity</h3>
<p>The time complexity of this solution is O(m * n), where m is the number of rows and n is the number of columns in the grid. This is because we potentially visit each cell in the grid once per ball drop. The space complexity is O(n) for storing the result vector.</p>
<h3 id="conclusion">Conclusion</h3>
<p>In conclusion, the provided code effectively simulates the process of dropping balls through a grid of pipes, determining their final positions based on the directional constraints of the pipes. By using a nested loop structure to traverse the grid, the algorithm ensures that each ball&rsquo;s movement is accurately accounted for until it either exits or becomes stuck. This method is both intuitive and efficient, making it suitable for similar problems involving pathfinding through constrained environments. Overall, the solution is well-structured and showcases effective use of basic programming constructs to solve a challenging problem in a clear and efficient manner.</p>
<p><a href="https://leetcode.com/problems/where-will-the-ball-fall/description/"><code>Link to LeetCode Lab</code></a></p>
<hr>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/QydaN-AVEAA?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/">LeetCode Solutions Library</a> / <a href="https://grid47.xyz/sheets/">DSA Sheets</a> / <a href="https://grid47.xyz/courses/">Course Catalog</a></th>
      </tr>
  </thead>
  <tbody>
  </tbody>
</table>

			</div>
		</div>
        <div class="col-md-1"></div>
	</div>
</div>

</div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright www.grid47.com - All rights reserved
            </div>
            
        </div>
    </div>
</footer>


        </div>


<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<script src="http://localhost:1313/js/mediumish.84218587c174fd40bce82544b98851670f0b124a7324b349c54a4065e2b32ffc.js" integrity="sha256-hCGFh8F0/UC86CVEuYhRZw8LEkpzJLNJxUpAZeKzL/w="></script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1LN7R4LHR1');
        }
      </script>
    </body>
</html>
