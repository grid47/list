<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Leetcode 1670: Design Front Middle Back Queue · grid47
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Mohammed Yasir Eramangadan">
<meta name="description" content="In-depth solution and explanation for Leetcode 1670: Design Front Middle Back Queue in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis—more insightful than official and community solutions.">
<meta name="keywords" content="blog,developer,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1670: Design Front Middle Back Queue">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1670: Design Front Middle Back Queue in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis—more insightful than official and community solutions.">

<meta property="og:url" content="http://localhost:1313/posts/leetcode_1670/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1670: Design Front Middle Back Queue">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1670: Design Front Middle Back Queue in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis—more insightful than official and community solutions.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-11-01T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-01T00:00:00+00:00">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_10/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_100/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1000/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1001/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1002/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1003/">




<link rel="canonical" href="http://localhost:1313/posts/leetcode_1670/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">








 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">








<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6219690368643953"
     crossorigin="anonymous"></script></head>




<body class="preload-transitions colorscheme-light">
  

  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      grid47
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/leetcode/">LeetCode</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/lists/">List</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/terms/">Terms</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/contact/">Contact</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/leetcode_1670/">
              Leetcode 1670: Design Front Middle Back Queue
            </a>
          </h1>
        </div>
        <div class="post-meta">
          
          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/medium/">Medium</a></div>
          
          <div class="authors">
  <i class="fa-solid fa-user" aria-hidden="true"></i>
    <a href="/authors/crafted-by-me/">Crafted by Me</a></div>

          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2024-11-01T00:00:00Z">
                November 1, 2024
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              5-minute read
            </span>
          </div>
          
        </div>
      </header>

      <div class="post-content">
        
        <p><a href="https://leetcode.com/problems/design-front-middle-back-queue/description/"  class="external-link" target="_blank" rel="noopener"><code>Problem Link</code></a></p>
<hr>
<p><strong>Code:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">FrontMiddleBackQueue</span> {
</span></span><span style="display:flex;"><span>    deque<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> a, b;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">a2b</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (a.size() <span style="color:#f92672">&lt;=</span> b.size()) <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>        b.push_front(a.back());
</span></span><span style="display:flex;"><span>        a.pop_back();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* keep operations around front of b and back of a */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">b2a</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (b.size() <span style="color:#f92672">&lt;=</span> a.size() <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>        a.push_back(b.front());
</span></span><span style="display:flex;"><span>        b.pop_front();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    FrontMiddleBackQueue() {}
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pushFront</span>(<span style="color:#66d9ef">int</span> val) {
</span></span><span style="display:flex;"><span>        a.push_front(val);
</span></span><span style="display:flex;"><span>        a2b();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pushMiddle</span>(<span style="color:#66d9ef">int</span> val) {
</span></span><span style="display:flex;"><span>        a.push_back(val);
</span></span><span style="display:flex;"><span>        a2b();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">pushBack</span>(<span style="color:#66d9ef">int</span> val) {
</span></span><span style="display:flex;"><span>        b.push_back(val);
</span></span><span style="display:flex;"><span>        b2a();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">popFront</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(a.empty() <span style="color:#f92672">&amp;&amp;</span> b.empty()) <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> ans;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(a.empty()) {
</span></span><span style="display:flex;"><span>            ans <span style="color:#f92672">=</span> b.front();
</span></span><span style="display:flex;"><span>            b.pop_front();
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            ans <span style="color:#f92672">=</span> a.front();
</span></span><span style="display:flex;"><span>            a.pop_front();
</span></span><span style="display:flex;"><span>            b2a();          
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ans;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">popMiddle</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(a.empty() <span style="color:#f92672">&amp;&amp;</span> b.empty()) <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> ans;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(a.size() <span style="color:#f92672">==</span> b.size()) {
</span></span><span style="display:flex;"><span>            ans <span style="color:#f92672">=</span> a.back();
</span></span><span style="display:flex;"><span>            a.pop_back();
</span></span><span style="display:flex;"><span>        } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>            ans <span style="color:#f92672">=</span> b.front();
</span></span><span style="display:flex;"><span>            b.pop_front();      
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ans;        
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">popBack</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span>(a.empty() <span style="color:#f92672">&amp;&amp;</span> b.empty()) <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> ans <span style="color:#f92672">=</span> b.back();
</span></span><span style="display:flex;"><span>        b.pop_back();
</span></span><span style="display:flex;"><span>        a2b();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ans;       
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * Your FrontMiddleBackQueue object will be instantiated and called as such:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * FrontMiddleBackQueue* obj = new FrontMiddleBackQueue();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * obj-&gt;pushFront(val);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * obj-&gt;pushMiddle(val);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * obj-&gt;pushBack(val);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * int param_4 = obj-&gt;popFront();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * int param_5 = obj-&gt;popMiddle();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * int param_6 = obj-&gt;popBack();
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span></span></span></code></pre></div>
<h2 id="hahahugoshortcode759s1hbhb">
  

  
  <div class="markdown-body">
    <p>The <code>FrontMiddleBackQueue</code> class is a data structure that supports efficient insertion and removal of elements from both ends and the middle. This class is particularly useful in scenarios where operations on both ends of the queue and the middle are frequent.</p>
<h3 id="problem-statement">
  Problem Statement
  <a class="heading-link" href="#problem-statement">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The challenge is to implement a queue that allows for insertion and removal of elements at the front, middle, and back. Traditional queues support insertion and removal only at the front and back, but this problem requires additional functionality to manage the middle efficiently.</p>
<h3 id="approach">
  Approach
  <a class="heading-link" href="#approach">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>To achieve the desired functionality, the <code>FrontMiddleBackQueue</code> uses two deques, <code>a</code> and <code>b</code>. The idea is to maintain an invariant where <code>a</code> holds the first half of the elements and <code>b</code> holds the second half. This design allows for efficient operations as follows:</p>
<ol>
<li>
<p><strong>Push Operations</strong>:</p>
<ul>
<li><strong><code>pushFront(int val)</code></strong>: This method adds an element to the front of the queue. The element is first added to deque <code>a</code>. If deque <code>a</code> becomes larger than deque <code>b</code>, we move the last element of <code>a</code> to the front of <code>b</code> to maintain balance.</li>
<li><strong><code>pushMiddle(int val)</code></strong>: To insert an element in the middle, we add the element to deque <code>a</code> and then ensure the sizes of <code>a</code> and <code>b</code> are balanced using the <code>a2b()</code> method.</li>
<li><strong><code>pushBack(int val)</code></strong>: This method adds an element to the back of the queue by simply inserting it into deque <code>b</code>. After the insertion, the method checks if <code>b</code> has more than one element compared to <code>a</code>, and if so, it moves the front of <code>b</code> to the back of <code>a</code>.</li>
</ul>
</li>
<li>
<p><strong>Pop Operations</strong>:</p>
<ul>
<li><strong><code>popFront()</code></strong>: This method removes and returns the element from the front of the queue. If deque <code>a</code> is empty, it retrieves the front element from <code>b</code>. If <code>a</code> has elements, it pops from <code>a</code> and ensures that the sizes of the deques are balanced afterward.</li>
<li><strong><code>popMiddle()</code></strong>: To remove the middle element, the method checks the sizes of both deques. If they are equal, it removes the last element from <code>a</code>. If <code>b</code> has more elements, it removes the front element from <code>b</code>.</li>
<li><strong><code>popBack()</code></strong>: This method removes the last element from the queue. It pops from <code>b</code> and ensures the sizes are balanced by potentially moving an element from <code>a</code> to <code>b</code>.</li>
</ul>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">
  Code Breakdown (Step by Step)
  <a class="heading-link" href="#code-breakdown-step-by-step">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li><strong>Data Structures</strong>: The use of two deques (<code>a</code> and <code>b</code>) allows for efficient operations by keeping track of elements in a way that facilitates quick access and modification.</li>
<li><strong>Push Operations</strong>:
<ul>
<li>Each push operation adjusts the deques&rsquo; sizes to keep them balanced, ensuring that no more than one extra element is held in one deque compared to the other.</li>
</ul>
</li>
<li><strong>Pop Operations</strong>:
<ul>
<li>The pop methods also maintain the invariant by checking the sizes of the deques and making necessary adjustments after removing elements. This ensures that both deques remain balanced.</li>
</ul>
</li>
</ol>
<p>The implementation effectively combines the efficiency of deques with careful management of their sizes to allow for the required operations in constant time on average.</p>
<h3 id="complexity">
  Complexity
  <a class="heading-link" href="#complexity">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The average time complexity for all operations (<code>pushFront</code>, <code>pushMiddle</code>, <code>pushBack</code>, <code>popFront</code>, <code>popMiddle</code>, <code>popBack</code>) is O(1), thanks to the use of deques which provide efficient operations at both ends. The balancing operations (<code>a2b</code> and <code>b2a</code>) involve at most one element transfer, keeping the overall operations efficient.</p>
<h3 id="conclusion">
  Conclusion
  <a class="heading-link" href="#conclusion">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The <code>FrontMiddleBackQueue</code> is a well-designed data structure that effectively addresses the need for efficient insertions and deletions at the front, middle, and back of a queue. By leveraging two deques and ensuring their sizes remain balanced, this class provides a versatile and powerful solution for managing a collection of elements with varied access requirements. The careful consideration of operation efficiency makes it an excellent choice for applications that require dynamic and flexible queue management.</p>
 
</div>
  

  <a class="heading-link" href="#hahahugoshortcode759s1hbhb">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/"  class="external-link" target="_blank" rel="noopener">LeetCode Exercise Compilation</a> / Next : <a href="https://grid47.xyz/posts/leetcode_1671"  class="external-link" target="_blank" rel="noopener">LeetCode #1671: Minimum Number of Removals to Make Mountain Array</a></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><div class="notice tip">
  <div class="notice-title">
    <i class="fa-solid fa-lightbulb" aria-hidden="true"></i>Tip
  </div>
  <div class="notice-content">Unlock the power of patterns! Mastering one problem builds a pathway to solve many more. Dive into practice, and let each problem sharpen your skills. <a href="https://www.udemy.com/course/algorithms-and-data-structures-in-cpp/"  class="external-link" target="_blank" rel="noopener">Check out my Momentum Learning course at Udemy! 🚀 </a></div>
</div>
</td>
      </tr>
  </tbody>
</table>

      </div>


      <footer>
        
        <div id="disqus_thread"></div>
<script>
  window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "grid47" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
    
    document.addEventListener('themeChanged', function (e) { 
        if (document.readyState == 'complete') {
          DISQUS.reset({ reload: true, config: disqus_config });
        }
    });
</script>
        
        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
      2019 -
    
    2024
     Mohammed Yasir Eramangadan 
    ·
    
    
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  

  

  

  

  

  

  

  

  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1LN7R4LHR1');
</script>


  

  

  

  

  

  

  
</body>

</html>
