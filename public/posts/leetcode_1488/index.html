<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Leetcode 1488: Avoid Flood in The City · grid47
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Mohammed Yasir Eramangadan">
<meta name="description" content="In-depth solution and explanation for Leetcode 1488: Avoid Flood in The City in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis—more insightful than official and community solutions.">
<meta name="keywords" content="blog,developer,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1488: Avoid Flood in The City">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1488: Avoid Flood in The City in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis—more insightful than official and community solutions.">

<meta property="og:url" content="http://localhost:1313/posts/leetcode_1488/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1488: Avoid Flood in The City">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1488: Avoid Flood in The City in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis—more insightful than official and community solutions.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-11-01T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-01T00:00:00+00:00">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_10/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_100/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1000/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1001/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1002/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1003/">




<link rel="canonical" href="http://localhost:1313/posts/leetcode_1488/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">








 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">








<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6219690368643953"
     crossorigin="anonymous"></script></head>




<body class="preload-transitions colorscheme-light">
  

  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      grid47
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/leetcode/">LeetCode</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/lists/">List</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/terms/">Terms</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/contact/">Contact</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/leetcode_1488/">
              Leetcode 1488: Avoid Flood in The City
            </a>
          </h1>
        </div>
        <div class="post-meta">
          
          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/medium/">Medium</a></div>
          
          <div class="authors">
  <i class="fa-solid fa-user" aria-hidden="true"></i>
    <a href="/authors/crafted-by-me/">Crafted by Me</a></div>

          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2024-11-01T00:00:00Z">
                November 1, 2024
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              5-minute read
            </span>
          </div>
          
        </div>
      </header>

      <div class="post-content">
        
        <p><a href="https://leetcode.com/problems/avoid-flood-in-the-city/description/"  class="external-link" target="_blank" rel="noopener"><code>Problem Link</code></a></p>
<hr>
<p><strong>Code:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> avoidFlood(vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;&amp;</span> rains) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        set<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> dry;
</span></span><span style="display:flex;"><span>        unordered_map<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> mp;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> rains.size();
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> ans;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> n; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span>(rains[i] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>                dry.insert(i);
</span></span><span style="display:flex;"><span>                ans.push_back(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">int</span> lake <span style="color:#f92672">=</span> rains[i];
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span>(mp.count(lake)) {
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">auto</span> it <span style="color:#f92672">=</span> dry.lower_bound(mp[lake]);
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">if</span>(it <span style="color:#f92672">==</span> dry.end()) <span style="color:#66d9ef">return</span> {};
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    ans[<span style="color:#f92672">*</span>it] <span style="color:#f92672">=</span> lake;
</span></span><span style="display:flex;"><span>                    dry.erase(<span style="color:#f92672">*</span>it);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                mp[lake] <span style="color:#f92672">=</span> i;
</span></span><span style="display:flex;"><span>                ans.push_back(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ans;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<h2 id="hahahugoshortcode556s1hbhb">
  

  
  <div class="markdown-body">
    <h3 id="problem-statement">
  Problem Statement
  <a class="heading-link" href="#problem-statement">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The problem at hand is to determine the behavior of lakes in a given sequence of rainfalls, represented by an array <code>rains</code>. Each index of the array represents a day, and the value indicates the lake that receives rain on that day. If the value is <code>0</code>, it means no rain falls on that day, and the ground can be dry. The objective is to avoid flooding in the lakes by strategically choosing which dry days to use for draining the lakes when they overflow. The solution must return an array where each element corresponds to a day in <code>rains</code>, with the following meanings:</p>
<ul>
<li>If it rains on a lake, the output is <code>-1</code>.</li>
<li>If it&rsquo;s a dry day that is used to drain a lake, the output is the lake&rsquo;s identifier.</li>
<li>If a lake overflows and there are no dry days available to drain it, the output should be an empty array indicating the impossibility of avoiding flooding.</li>
</ul>
<h3 id="approach">
  Approach
  <a class="heading-link" href="#approach">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>To solve this problem, we need to maintain a record of the lakes and their corresponding rain days, as well as a set of dry days available for draining. Here’s a step-by-step breakdown of the approach:</p>
<ol>
<li>
<p><strong>Data Structures</strong>: Utilize a set to keep track of dry days and an unordered map to record the last rainy day for each lake.</p>
</li>
<li>
<p><strong>Iterate Through Rains</strong>: Loop through the <code>rains</code> array. For each day:</p>
<ul>
<li>If it rains (<code>rains[i] != 0</code>), check if the corresponding lake has rained before.</li>
<li>If it has rained before, find the nearest available dry day after the last rainy day for that lake.</li>
<li>If such a dry day exists, drain the lake on that day.</li>
<li>If it is a dry day (<code>rains[i] == 0</code>), add it to the set of dry days.</li>
</ul>
</li>
<li>
<p><strong>Fill the Answer Array</strong>: Create an answer array to store the results for each day as described above.</p>
</li>
<li>
<p><strong>Return Result</strong>: Finally, return the constructed answer array.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">
  Code Breakdown (Step by Step)
  <a class="heading-link" href="#code-breakdown-step-by-step">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> avoidFlood(vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;&amp;</span> rains) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        set<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> dry;  <span style="color:#75715e">// Set to store indices of dry days
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        unordered_map<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> mp;  <span style="color:#75715e">// Map to track the last rainy day for each lake
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> rains.size();  <span style="color:#75715e">// Size of the input array
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        
</span></span><span style="display:flex;"><span>        vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> ans;  <span style="color:#75715e">// Result array to be returned
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> n; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span>(rains[i] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {  <span style="color:#75715e">// If it&#39;s a dry day
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                dry.insert(i);  <span style="color:#75715e">// Add the index to the dry set
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                ans.push_back(<span style="color:#ae81ff">1</span>);  <span style="color:#75715e">// Mark it as a dry day in the answer
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">int</span> lake <span style="color:#f92672">=</span> rains[i];  <span style="color:#75715e">// Identify the lake that is receiving rain
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span>(mp.count(lake)) {  <span style="color:#75715e">// If this lake has rained before
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    <span style="color:#66d9ef">auto</span> it <span style="color:#f92672">=</span> dry.lower_bound(mp[lake]);  <span style="color:#75715e">// Find the next available dry day
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">if</span>(it <span style="color:#f92672">==</span> dry.end()) <span style="color:#66d9ef">return</span> {};  <span style="color:#75715e">// If no dry day is available, return empty array
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    
</span></span><span style="display:flex;"><span>                    ans[<span style="color:#f92672">*</span>it] <span style="color:#f92672">=</span> lake;  <span style="color:#75715e">// Drain the lake on the dry day found
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    dry.erase(<span style="color:#f92672">*</span>it);  <span style="color:#75715e">// Remove that day from the dry set
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                }
</span></span><span style="display:flex;"><span>                mp[lake] <span style="color:#f92672">=</span> i;  <span style="color:#75715e">// Update the last rainy day for this lake
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                ans.push_back(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>);  <span style="color:#75715e">// Mark the day as a rainy day in the answer
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> ans;  <span style="color:#75715e">// Return the final answer
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ol>
<li>
<p><strong>Set Initialization</strong>: A <code>set&lt;int&gt; dry</code> is used to track indices of dry days, allowing for efficient insertion and lookups.</p>
</li>
<li>
<p><strong>Map Initialization</strong>: An <code>unordered_map&lt;int, int&gt; mp</code> keeps the last day when it rained for each lake, allowing for quick access.</p>
</li>
<li>
<p><strong>Loop Through the Input</strong>: The main loop iterates through the <code>rains</code> array, checking each day&rsquo;s weather conditions.</p>
</li>
<li>
<p><strong>Handling Dry Days</strong>: When encountering a dry day, the index is added to the <code>dry</code> set and <code>1</code> is appended to the result array.</p>
</li>
<li>
<p><strong>Handling Rainy Days</strong>:</p>
<ul>
<li>If it rains on a lake that has rained before, the code checks for a dry day to drain it.</li>
<li>Using <code>lower_bound</code>, it finds the smallest index in the dry set that is greater than or equal to the last rainy day of the lake.</li>
<li>If a suitable dry day is found, the lake is drained on that day by updating the result array and removing that index from the dry set.</li>
</ul>
</li>
<li>
<p><strong>Returning the Result</strong>: The function returns the result array, which contains the operations performed on each day.</p>
</li>
</ol>
<h3 id="complexity">
  Complexity
  <a class="heading-link" href="#complexity">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li>
<p><strong>Time Complexity</strong>: The time complexity of this solution is (O(n \log n)), where (n) is the length of the <code>rains</code> array. This is due to the logarithmic time complexity for operations on the set (insertion, deletion, and finding the lower bound).</p>
</li>
<li>
<p><strong>Space Complexity</strong>: The space complexity is (O(n)), as we maintain a set for dry days and a map for the last rainy days, which can grow up to the size of the input.</p>
</li>
</ul>
<h3 id="conclusion">
  Conclusion
  <a class="heading-link" href="#conclusion">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The <code>avoidFlood</code> function efficiently determines how to manage lake flooding based on a given sequence of rainfall events. It adeptly utilizes a combination of a set and a hash map to track dry days and rainy occurrences, ensuring optimal performance even with large inputs.</p>
<p>Key highlights include:</p>
<ol>
<li>
<p><strong>Effective Use of Data Structures</strong>: The solution employs <code>set</code> and <code>unordered_map</code> to facilitate quick lookups and updates, enhancing performance.</p>
</li>
<li>
<p><strong>Logical Flow</strong>: The step-by-step approach logically handles different scenarios (rainy and dry days) in a clear manner.</p>
</li>
<li>
<p><strong>Real-world Applications</strong>: This solution is applicable in scenarios involving resource management, such as water reservoir systems, where the optimal handling of resources is critical.</p>
</li>
</ol>
<p>Overall, this solution effectively addresses the problem while demonstrating good coding practices and efficient algorithms, making it a robust and scalable implementation for managing lake flooding during rain events.</p>
 
</div>
  

  <a class="heading-link" href="#hahahugoshortcode556s1hbhb">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/"  class="external-link" target="_blank" rel="noopener">LeetCode Exercise Compilation</a> / Next : <a href="https://grid47.xyz/posts/leetcode_1489"  class="external-link" target="_blank" rel="noopener">LeetCode #1489: Find Critical and Pseudo-Critical Edges in Minimum Spanning Tree</a></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><div class="notice tip">
  <div class="notice-title">
    <i class="fa-solid fa-lightbulb" aria-hidden="true"></i>Tip
  </div>
  <div class="notice-content">Unlock the power of patterns! Mastering one problem builds a pathway to solve many more. Dive into practice, and let each problem sharpen your skills. <a href="https://www.udemy.com/course/algorithms-and-data-structures-in-cpp/"  class="external-link" target="_blank" rel="noopener">Check out my Momentum Learning course at Udemy! 🚀 </a></div>
</div>
</td>
      </tr>
  </tbody>
</table>

      </div>


      <footer>
        
        <div id="disqus_thread"></div>
<script>
  window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "grid47" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
    
    document.addEventListener('themeChanged', function (e) { 
        if (document.readyState == 'complete') {
          DISQUS.reset({ reload: true, config: disqus_config });
        }
    });
</script>
        
        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
      2019 -
    
    2024
     Mohammed Yasir Eramangadan 
    ·
    
    
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  

  

  

  

  

  

  

  

  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1LN7R4LHR1');
</script>


  

  

  

  

  

  

  
</body>

</html>
