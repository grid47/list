<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Leetcode 1114: Print in Order Â· grid47
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Mohammed Yasir Eramangadan">
<meta name="description" content="In-depth solution and explanation for Leetcode 1114: Print in Order in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysisâ€”more insightful than official and community solutions.">
<meta name="keywords" content="blog,developer,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1114: Print in Order">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1114: Print in Order in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysisâ€”more insightful than official and community solutions.">

<meta property="og:url" content="http://localhost:1313/posts/leetcode_1114/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1114: Print in Order">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1114: Print in Order in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysisâ€”more insightful than official and community solutions.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-11-01T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-01T00:00:00+00:00">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_10/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_100/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1000/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1001/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1002/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1003/">




<link rel="canonical" href="http://localhost:1313/posts/leetcode_1114/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">








 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">








<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6219690368643953"
     crossorigin="anonymous"></script></head>




<body class="preload-transitions colorscheme-light">
  

  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      grid47
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/leetcode/">LeetCode</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/lists/">List</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/terms/">Terms</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/contact/">Contact</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/leetcode_1114/">
              Leetcode 1114: Print in Order
            </a>
          </h1>
        </div>
        <div class="post-meta">
          
          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/easy/">Easy</a></div>
          
          <div class="authors">
  <i class="fa-solid fa-user" aria-hidden="true"></i>
    <a href="/authors/crafted-by-me/">Crafted by Me</a></div>

          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2024-11-01T00:00:00Z">
                November 1, 2024
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              5-minute read
            </span>
          </div>
          
        </div>
      </header>

      <div class="post-content">
        
        <p><a href="https://leetcode.com/problems/print-in-order/description/"  class="external-link" target="_blank" rel="noopener"><code>Problem Link</code></a></p>
<hr>
<p><strong>Code:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Foo</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> curVal;
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>mutex mtx;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    Foo() {
</span></span><span style="display:flex;"><span>        curVal <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">first</span>(function<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">void</span>()<span style="color:#f92672">&gt;</span> printFirst) {
</span></span><span style="display:flex;"><span>        mtx.lock();
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// printFirst() outputs &#34;first&#34;. Do not change or remove this line.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        printFirst();
</span></span><span style="display:flex;"><span>        curVal<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>        mtx.unlock();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">second</span>(function<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">void</span>()<span style="color:#f92672">&gt;</span> printSecond) {
</span></span><span style="display:flex;"><span>        mtx.lock();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span>(curVal <span style="color:#f92672">!=</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            mtx.unlock();
</span></span><span style="display:flex;"><span>            mtx.lock();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        mtx.unlock();
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// printSecond() outputs &#34;second&#34;. Do not change or remove this line.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        printSecond();
</span></span><span style="display:flex;"><span>        curVal<span style="color:#f92672">++</span> ;       
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">third</span>(function<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">void</span>()<span style="color:#f92672">&gt;</span> printThird) {
</span></span><span style="display:flex;"><span>        mtx.lock();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span>(curVal <span style="color:#f92672">!=</span> <span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            mtx.unlock();
</span></span><span style="display:flex;"><span>            mtx.lock();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        mtx.unlock();
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// printThird() outputs &#34;third&#34;. Do not change or remove this line.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        printThird();
</span></span><span style="display:flex;"><span>        curVal<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<h2 id="hahahugoshortcode141s1hbhb">
  

  
  <div class="markdown-body">
    <h3 id="problem-statement">
  Problem Statement
  <a class="heading-link" href="#problem-statement">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The task is to implement a class <code>Foo</code> that can synchronize the execution of three methods: <code>first</code>, <code>second</code>, and <code>third</code>. The goal is to ensure that:</p>
<ol>
<li>The <code>first</code> method prints &ldquo;first&rdquo;.</li>
<li>The <code>second</code> method prints &ldquo;second&rdquo;.</li>
<li>The <code>third</code> method prints &ldquo;third&rdquo;.</li>
</ol>
<p>The challenge is to ensure that these methods are called in the correct order: <code>first</code> must be called before <code>second</code>, and <code>second</code> must be called before <code>third</code>. The class must be thread-safe, meaning that multiple threads may call these methods concurrently without leading to race conditions or incorrect ordering.</p>
<h3 id="approach">
  Approach
  <a class="heading-link" href="#approach">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>To solve this problem, we can utilize a mutex for synchronization and an integer to keep track of the current method being executed. The main steps involved in the implementation are:</p>
<ol>
<li><strong>Initialization</strong>: A mutex is used to protect shared state, and an integer variable (<code>curVal</code>) is initialized to 1 to indicate that the <code>first</code> method should be called first.</li>
<li><strong>Method Implementations</strong>:
<ul>
<li>In the <code>first</code> method, the thread will lock the mutex, execute the provided function to print &ldquo;first&rdquo;, increment the tracking variable, and unlock the mutex.</li>
<li>In the <code>second</code> method, the thread will lock the mutex and check whether it is its turn to execute. If not, it will repeatedly unlock and relock the mutex until it is allowed to print &ldquo;second&rdquo;.</li>
<li>In the <code>third</code> method, a similar approach is taken, ensuring that it waits until <code>second</code> has been executed.</li>
</ul>
</li>
<li><strong>Synchronization</strong>: Proper locking and unlocking of the mutex ensures that the shared variable is accessed in a thread-safe manner, preventing race conditions.</li>
</ol>
<h3 id="code-breakdown-step-by-step">
  Code Breakdown (Step by Step)
  <a class="heading-link" href="#code-breakdown-step-by-step">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li>
<p><strong>Class Definition</strong>: The <code>Foo</code> class is defined with private members to manage state and synchronization.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Foo</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> curVal;      <span style="color:#75715e">// Tracks the current method that can execute
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    std<span style="color:#f92672">::</span>mutex mtx;  <span style="color:#75715e">// Mutex for synchronizing access
</span></span></span></code></pre></div></li>
<li>
<p><strong>Constructor</strong>: The constructor initializes <code>curVal</code> to 1, indicating that the <code>first</code> method should be executed first.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>        Foo() {
</span></span><span style="display:flex;"><span>            curVal <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;  <span style="color:#75715e">// Start with curVal set to 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        }
</span></span></code></pre></div></li>
<li>
<p><strong>First Method</strong>: The <code>first</code> method locks the mutex, prints &ldquo;first&rdquo;, increments <code>curVal</code>, and then unlocks the mutex.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">first</span>(function<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">void</span>()<span style="color:#f92672">&gt;</span> printFirst) {
</span></span><span style="display:flex;"><span>            mtx.lock();          <span style="color:#75715e">// Lock the mutex
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            printFirst();        <span style="color:#75715e">// Print &#34;first&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            curVal<span style="color:#f92672">++</span>;            <span style="color:#75715e">// Move to the next method
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            mtx.unlock();        <span style="color:#75715e">// Unlock the mutex
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        }
</span></span></code></pre></div></li>
<li>
<p><strong>Second Method</strong>: The <code>second</code> method locks the mutex and uses a while loop to check whether it&rsquo;s the correct turn to execute. If not, it releases the lock and rechecks.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">second</span>(function<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">void</span>()<span style="color:#f92672">&gt;</span> printSecond) {
</span></span><span style="display:flex;"><span>            mtx.lock();          <span style="color:#75715e">// Lock the mutex
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">while</span>(curVal <span style="color:#f92672">!=</span> <span style="color:#ae81ff">2</span>) { <span style="color:#75715e">// Wait until it&#39;s this method&#39;s turn
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                mtx.unlock();    <span style="color:#75715e">// Unlock and wait
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                mtx.lock();      <span style="color:#75715e">// Lock again for rechecking
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            }
</span></span><span style="display:flex;"><span>            mtx.unlock();        <span style="color:#75715e">// Unlock the mutex
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            printSecond();       <span style="color:#75715e">// Print &#34;second&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            curVal<span style="color:#f92672">++</span>;            <span style="color:#75715e">// Move to the next method
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        }
</span></span></code></pre></div></li>
<li>
<p><strong>Third Method</strong>: The <code>third</code> method follows the same pattern as <code>second</code>, waiting for <code>curVal</code> to equal 3 before proceeding.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span>        <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">third</span>(function<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">void</span>()<span style="color:#f92672">&gt;</span> printThird) {
</span></span><span style="display:flex;"><span>            mtx.lock();          <span style="color:#75715e">// Lock the mutex
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">while</span>(curVal <span style="color:#f92672">!=</span> <span style="color:#ae81ff">3</span>) { <span style="color:#75715e">// Wait until it&#39;s this method&#39;s turn
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                mtx.unlock();    <span style="color:#75715e">// Unlock and wait
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                mtx.lock();      <span style="color:#75715e">// Lock again for rechecking
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            }
</span></span><span style="display:flex;"><span>            mtx.unlock();        <span style="color:#75715e">// Unlock the mutex
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            printThird();        <span style="color:#75715e">// Print &#34;third&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            curVal<span style="color:#f92672">++</span>;            <span style="color:#75715e">// Increment to finish
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div></li>
</ol>
<h3 id="complexity-analysis">
  Complexity Analysis
  <a class="heading-link" href="#complexity-analysis">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li><strong>Time Complexity</strong>: The time complexity of each method is (O(n)) in the worst-case scenario, where (n) is the number of threads waiting for the mutex to be available. However, since the methods are executed sequentially in a correct order, the average time is effectively constant per call.</li>
<li><strong>Space Complexity</strong>: The space complexity is (O(1)) since we are using a fixed amount of space for variables like <code>curVal</code> and <code>mtx</code>, regardless of the number of threads or method calls.</li>
</ul>
<h3 id="conclusion">
  Conclusion
  <a class="heading-link" href="#conclusion">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The provided C++ code effectively implements a solution to synchronize the execution order of three methods using a mutex and an integer to track the current state. The design ensures that <code>first</code> is always called before <code>second</code>, and <code>second</code> is always called before <code>third</code>, achieving the desired output sequence without any race conditions or deadlocks.</p>
<p>This implementation serves as a practical example of how to handle synchronization in multithreaded programming. The use of mutexes and condition checks demonstrates an essential pattern in concurrent programming, making it a valuable reference for developers dealing with similar challenges.</p>
<p>Overall, the solution is both efficient and straightforward, showcasing effective synchronization techniques in C++. Readers interested in thread management and method synchronization will find this example beneficial for understanding key concepts in concurrent programming.</p>
 
</div>
  

  <a class="heading-link" href="#hahahugoshortcode141s1hbhb">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/"  class="external-link" target="_blank" rel="noopener">LeetCode Exercise Compilation</a> / Next : <a href="https://grid47.xyz/posts/leetcode_1115"  class="external-link" target="_blank" rel="noopener">LeetCode #1115: Print FooBar Alternately</a></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><div class="notice tip">
  <div class="notice-title">
    <i class="fa-solid fa-lightbulb" aria-hidden="true"></i>Tip
  </div>
  <div class="notice-content">Unlock the power of patterns! Mastering one problem builds a pathway to solve many more. Dive into practice, and let each problem sharpen your skills. <a href="https://www.udemy.com/course/algorithms-and-data-structures-in-cpp/"  class="external-link" target="_blank" rel="noopener">Check out my Momentum Learning course at Udemy! ðŸš€ </a></div>
</div>
</td>
      </tr>
  </tbody>
</table>

      </div>


      <footer>
        
        <div id="disqus_thread"></div>
<script>
  window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "grid47" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
    
    document.addEventListener('themeChanged', function (e) { 
        if (document.readyState == 'complete') {
          DISQUS.reset({ reload: true, config: disqus_config });
        }
    });
</script>
        
        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    Â©
    
      2019 -
    
    2024
     Mohammed Yasir Eramangadan 
    Â·
    
    
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  

  

  

  

  

  

  

  

  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1LN7R4LHR1');
</script>


  

  

  

  

  

  

  
</body>

</html>
