<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Leetcode 1671: Minimum Number of Removals to Make Mountain Array · grid47
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Mohammed Yasir Eramangadan">
<meta name="description" content="In-depth solution and explanation for Leetcode 1671: Minimum Number of Removals to Make Mountain Array in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis—more insightful than official and community solutions.">
<meta name="keywords" content="blog,developer,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1671: Minimum Number of Removals to Make Mountain Array">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1671: Minimum Number of Removals to Make Mountain Array in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis—more insightful than official and community solutions.">

<meta property="og:url" content="http://localhost:1313/posts/leetcode_1671/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1671: Minimum Number of Removals to Make Mountain Array">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1671: Minimum Number of Removals to Make Mountain Array in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis—more insightful than official and community solutions.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-11-01T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-11-01T00:00:00+00:00">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_10/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_100/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1000/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1001/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1002/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1003/">




<link rel="canonical" href="http://localhost:1313/posts/leetcode_1671/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">








 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">








<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6219690368643953"
     crossorigin="anonymous"></script></head>




<body class="preload-transitions colorscheme-light">
  

  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      grid47
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/leetcode/">LeetCode</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/lists/">List</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/terms/">Terms</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/contact/">Contact</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/leetcode_1671/">
              Leetcode 1671: Minimum Number of Removals to Make Mountain Array
            </a>
          </h1>
        </div>
        <div class="post-meta">
          
          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/hard/">Hard</a></div>
          
          <div class="authors">
  <i class="fa-solid fa-user" aria-hidden="true"></i>
    <a href="/authors/crafted-by-me/">Crafted by Me</a></div>

          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2024-11-01T00:00:00Z">
                November 1, 2024
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              5-minute read
            </span>
          </div>
          
        </div>
      </header>

      <div class="post-content">
        
        <p><a href="https://leetcode.com/problems/minimum-number-of-removals-to-make-mountain-array/description/"  class="external-link" target="_blank" rel="noopener"><code>Problem Link</code></a></p>
<hr>
<p><strong>Code:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span> {
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> lis(vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> arr) {
</span></span><span style="display:flex;"><span>        vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> res;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> arr.size(); i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">int</span> idx <span style="color:#f92672">=</span> lower_bound(res.begin(), res.end(), arr[i]) <span style="color:#f92672">-</span> res.begin();
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span>(idx <span style="color:#f92672">==</span> res.size()) res.push_back(arr[i]);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">else</span> res[idx] <span style="color:#f92672">=</span> arr[i];
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> res.size();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">minimumMountainRemovals</span>(vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;&amp;</span> nums) {
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> nums.size();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> mx <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; i <span style="color:#f92672">&lt;</span> n <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> left;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; k <span style="color:#f92672">&lt;</span> i; k<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span>(nums[k] <span style="color:#f92672">&lt;</span> nums[i]) left.push_back(nums[k]);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            left.push_back(nums[i]);
</span></span><span style="display:flex;"><span>            vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> right;
</span></span><span style="display:flex;"><span>            right.push_back(nums[i]);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>; k <span style="color:#f92672">&lt;</span> n; k<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span>(nums[k] <span style="color:#f92672">&lt;</span> nums[i]) right.push_back(nums[k]);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            reverse(right.begin(), right.end());
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">int</span> a <span style="color:#f92672">=</span> lis(left);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">int</span> b <span style="color:#f92672">=</span> lis(right);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span>(a <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">&amp;&amp;</span> b <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">2</span>) {
</span></span><span style="display:flex;"><span>                mx <span style="color:#f92672">=</span> max(mx, a <span style="color:#f92672">+</span> b <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> nums.size() <span style="color:#f92672">-</span> mx;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};</span></span></code></pre></div>
<h2 id="hahahugoshortcode761s1hbhb">
  

  
  <div class="markdown-body">
    <h3 id="problem-statement">
  Problem Statement
  <a class="heading-link" href="#problem-statement">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The problem at hand is to determine the minimum number of elements to be removed from an array to make it a mountain array. A mountain array is defined as an array where:</p>
<ol>
<li>There exists an index <code>i</code> such that <code>0 &lt; i &lt; nums.length - 1</code>.</li>
<li>The elements before <code>i</code> are strictly increasing.</li>
<li>The elements after <code>i</code> are strictly decreasing.</li>
</ol>
<p>For instance, the array <code>[2, 1, 1, 5, 6, 2, 3, 1]</code> can be transformed into a mountain array by removing some elements. The goal is to find the optimal way to achieve this while removing the fewest elements possible.</p>
<h3 id="approach">
  Approach
  <a class="heading-link" href="#approach">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The solution leverages the concept of Longest Increasing Subsequence (LIS) combined with iterating through potential peak elements in the array. The main steps involved in the approach are:</p>
<ol>
<li>
<p><strong>Initialization</strong>: Define the <code>lis</code> function to calculate the length of the longest increasing subsequence. This will help in determining the increasing and decreasing sequences around each potential peak.</p>
</li>
<li>
<p><strong>Iterate through potential peaks</strong>: For each index <code>i</code> in the array (except the first and last), treat <code>nums[i]</code> as a peak and calculate how many elements are in the increasing sequence to the left and the decreasing sequence to the right.</p>
</li>
<li>
<p><strong>Calculate subsequences</strong>: Use the <code>lis</code> function to determine the lengths of the increasing and decreasing subsequences, ensuring both are at least 2 to form a valid mountain.</p>
</li>
<li>
<p><strong>Update maximum</strong>: Keep track of the maximum length of valid mountain sequences found during the iterations.</p>
</li>
<li>
<p><strong>Compute removals</strong>: Finally, the minimum number of removals required will be the total size of the array minus the maximum valid mountain length.</p>
</li>
</ol>
<h3 id="code-breakdown-step-by-step">
  Code Breakdown (Step by Step)
  <a class="heading-link" href="#code-breakdown-step-by-step">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The code is structured in a C++ class named <code>Solution</code>, containing two primary functions: <code>lis</code> and <code>minimumMountainRemovals</code>.</p>
<ol>
<li>
<p><strong>Function <code>lis</code></strong>:</p>
<ul>
<li><strong>Input</strong>: A vector of integers representing a sequence.</li>
<li><strong>Output</strong>: An integer representing the length of the longest increasing subsequence.</li>
<li><strong>Logic</strong>:
<ul>
<li>Use a vector <code>res</code> to store the smallest tail for increasing subsequences found.</li>
<li>Iterate through each element in the input array. Use binary search (<code>lower_bound</code>) to find the position where the current element can replace or extend the sequence in <code>res</code>.</li>
<li>Update <code>res</code> accordingly to maintain its size as the longest increasing subsequence.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Function <code>minimumMountainRemovals</code></strong>:</p>
<ul>
<li><strong>Input</strong>: A reference to a vector of integers <code>nums</code>.</li>
<li><strong>Output</strong>: An integer representing the minimum number of elements to remove.</li>
<li><strong>Logic</strong>:
<ul>
<li>Determine the length of <code>nums</code> and initialize a variable <code>mx</code> to keep track of the maximum valid mountain length.</li>
<li>Iterate through potential peak positions from index <code>1</code> to <code>n-2</code>.</li>
<li>For each peak index <code>i</code>:
<ul>
<li>Create a vector <code>left</code> to store the increasing subsequence ending at <code>i</code> and another vector <code>right</code> to store the decreasing subsequence starting from <code>i</code>.</li>
<li>Fill <code>left</code> by including all elements less than <code>nums[i]</code> to its left.</li>
<li>Fill <code>right</code> by including all elements less than <code>nums[i]</code> to its right and reverse it for correct order.</li>
<li>Use the <code>lis</code> function to compute the lengths of both subsequences.</li>
<li>If both lengths are greater than or equal to 2, calculate the total valid mountain length and update <code>mx</code>.</li>
</ul>
</li>
<li>Finally, return the total length of the array minus <code>mx</code>, giving the minimum number of removals required.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="complexity">
  Complexity
  <a class="heading-link" href="#complexity">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The time complexity of the algorithm can be broken down as follows:</p>
<ul>
<li>The <code>lis</code> function operates in <code>O(n log n)</code> due to the binary search utilized in the function.</li>
<li>The outer loop iterates through potential peaks (<code>O(n)</code>), while constructing the <code>left</code> and <code>right</code> vectors also contributes to an additional <code>O(n)</code> complexity in the worst-case scenario.</li>
<li>Therefore, the overall time complexity of the <code>minimumMountainRemovals</code> function is approximately <code>O(n^2 log n)</code>, which is efficient for a moderate-sized array.</li>
</ul>
<p>The space complexity is <code>O(n)</code> as we store various vectors that can grow up to the size of the input array.</p>
<h3 id="conclusion">
  Conclusion
  <a class="heading-link" href="#conclusion">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>This C++ solution efficiently determines the minimum number of removals required to transform an array into a mountain array by utilizing the principles of the Longest Increasing Subsequence and careful consideration of potential peak elements. By iterating through the array and calculating the longest valid mountain lengths, the code effectively balances between optimal performance and clarity.</p>
<p>By understanding the nuances of this implementation, one can appreciate the elegant combination of algorithmic techniques that contribute to solving the mountain array problem efficiently. This solution serves as a great example of how dynamic programming concepts can be integrated with practical coding strategies in competitive programming and technical interviews.</p>
 
</div>
  

  <a class="heading-link" href="#hahahugoshortcode761s1hbhb">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/Ys-q9qPpleY?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<table>
  <thead>
      <tr>
          <th><a href="https://grid47.xyz/leetcode/"  class="external-link" target="_blank" rel="noopener">LeetCode Exercise Compilation</a> / Next : <a href="https://grid47.xyz/posts/leetcode_1672"  class="external-link" target="_blank" rel="noopener">LeetCode #1672: Richest Customer Wealth</a></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><div class="notice tip">
  <div class="notice-title">
    <i class="fa-solid fa-lightbulb" aria-hidden="true"></i>Tip
  </div>
  <div class="notice-content">Unlock the power of patterns! Mastering one problem builds a pathway to solve many more. Dive into practice, and let each problem sharpen your skills. <a href="https://www.udemy.com/course/algorithms-and-data-structures-in-cpp/"  class="external-link" target="_blank" rel="noopener">Check out my Momentum Learning course at Udemy! 🚀 </a></div>
</div>
</td>
      </tr>
  </tbody>
</table>

      </div>


      <footer>
        
        <div id="disqus_thread"></div>
<script>
  window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "grid47" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
    
    document.addEventListener('themeChanged', function (e) { 
        if (document.readyState == 'complete') {
          DISQUS.reset({ reload: true, config: disqus_config });
        }
    });
</script>
        
        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
      2019 -
    
    2024
     Mohammed Yasir Eramangadan 
    ·
    
    
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  

  

  

  

  

  

  

  

  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1LN7R4LHR1');
</script>


  

  

  

  

  

  

  
</body>

</html>
