<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Leetcode 1008: Construct Binary Search Tree from Preorder Traversal · grid47
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Mohammed Yasir Eramangadan">
<meta name="description" content="In-depth solution and explanation for Leetcode 1008: Construct Binary Search Tree from Preorder Traversal in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis—more insightful than official and community solutions.">
<meta name="keywords" content="blog,developer,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Leetcode 1008: Construct Binary Search Tree from Preorder Traversal">
  <meta name="twitter:description" content="In-depth solution and explanation for Leetcode 1008: Construct Binary Search Tree from Preorder Traversal in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis—more insightful than official and community solutions.">

<meta property="og:url" content="http://localhost:1313/posts/leetcode_1008/">
  <meta property="og:site_name" content="grid47">
  <meta property="og:title" content="Leetcode 1008: Construct Binary Search Tree from Preorder Traversal">
  <meta property="og:description" content="In-depth solution and explanation for Leetcode 1008: Construct Binary Search Tree from Preorder Traversal in C&#43;&#43;. Includes clear intuition, step-by-step example walkthrough, and detailed complexity analysis—more insightful than official and community solutions.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-01-29T00:00:00+00:00">
    <meta property="article:modified_time" content="2022-01-29T00:00:00+00:00">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_1/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_2/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_3/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_4/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_5/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_6/">
      <meta property="og:see_also" content="http://localhost:1313/posts/leetcode_7/">




<link rel="canonical" href="http://localhost:1313/posts/leetcode_1008/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.css" media="screen">
  



 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">








<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6219690368643953"
     crossorigin="anonymous"></script></head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      grid47
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/leetcode/">LeetCode</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/lists/">List</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/terms/">Terms</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/contact/">Contact</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/leetcode_1008/">
              Leetcode 1008: Construct Binary Search Tree from Preorder Traversal
            </a>
          </h1>
        </div>
        <div class="post-meta">
          
          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/medium/">Medium</a></div>
          
          <div class="authors">
  <i class="fa-solid fa-user" aria-hidden="true"></i>
    <a href="/authors/crafted-by-me/">Crafted by Me</a></div>

          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2022-01-29T00:00:00Z">
                January 29, 2022
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              5-minute read
            </span>
          </div>
          
        </div>
      </header>

      <div class="post-content">
        
        <p><a href="https://leetcode.com/problems/construct-binary-search-tree-from-preorder-traversal/description/"  class="external-link" target="_blank" rel="noopener"><code>Problem Link</code></a></p>
<hr>
<p><strong>Code:</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Definition for a binary tree node.
</span></span></span><span class="line"><span class="cl"><span class="cm"> * struct TreeNode {
</span></span></span><span class="line"><span class="cl"><span class="cm"> *     int val;
</span></span></span><span class="line"><span class="cl"><span class="cm"> *     TreeNode *left;
</span></span></span><span class="line"><span class="cl"><span class="cm"> *     TreeNode *right;
</span></span></span><span class="line"><span class="cl"><span class="cm"> *     TreeNode() : val(0), left(nullptr), right(nullptr) {}
</span></span></span><span class="line"><span class="cl"><span class="cm"> *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
</span></span></span><span class="line"><span class="cl"><span class="cm"> *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}
</span></span></span><span class="line"><span class="cl"><span class="cm"> * };
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">TreeNode</span><span class="o">*</span> <span class="n">bstFromPreorder</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">pre</span><span class="p">,</span> <span class="kt">int</span> <span class="n">bound</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">pre</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">||</span> <span class="n">pre</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">bound</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TreeNode</span><span class="p">(</span><span class="n">pre</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span> <span class="o">=</span> <span class="n">bstFromPreorder</span><span class="p">(</span><span class="n">pre</span><span class="p">,</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">val</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span> <span class="o">=</span> <span class="n">bstFromPreorder</span><span class="p">(</span><span class="n">pre</span><span class="p">,</span> <span class="n">bound</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">root</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="p">};</span></span></span></code></pre></div>
<h2 id="hahahugoshortcode18s1hbhb">
  

  
  <div class="markdown-body">
    <h3 id="problem-statement">
  Problem Statement
  <a class="heading-link" href="#problem-statement">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The task is to construct a binary search tree (BST) from a given preorder traversal of its nodes. In a BST, for any given node:</p>
<ul>
<li>The left child must contain a value less than the node&rsquo;s value.</li>
<li>The right child must contain a value greater than the node&rsquo;s value.</li>
</ul>
<p>Given a sequence of integers that represent the preorder traversal of a BST, our goal is to reconstruct the tree structure. The preorder traversal is defined as visiting the root node first, followed by the left subtree and then the right subtree.</p>
<h3 id="approach">
  Approach
  <a class="heading-link" href="#approach">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>To solve this problem, we will utilize a recursive approach that exploits the properties of BSTs and the characteristics of preorder traversal. The strategy involves:</p>
<ol>
<li>Iterating through the values in the preorder array while keeping track of the current index.</li>
<li>Using a bound to ensure that the values inserted into the left and right subtrees adhere to the BST properties.</li>
<li>Recursively constructing the left and right subtrees by calling the same function with updated bounds.</li>
</ol>
<h3 id="code-breakdown-step-by-step">
  Code Breakdown (Step by Step)
  <a class="heading-link" href="#code-breakdown-step-by-step">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li>
<p><strong>TreeNode Definition</strong>:</p>
<ul>
<li>The code begins with a definition of the <code>TreeNode</code> structure, which contains an integer value (<code>val</code>), a pointer to the left child (<code>left</code>), and a pointer to the right child (<code>right</code>). This structure serves as the building block for our binary search tree.</li>
</ul>
</li>
<li>
<p><strong>Solution Class Declaration</strong>:</p>
<ul>
<li>The <code>Solution</code> class encapsulates our method for constructing the BST. It maintains a class member variable <code>i</code> that tracks the current index in the preorder array as we build the tree.</li>
</ul>
</li>
<li>
<p><strong>Function Declaration</strong>:</p>
<ul>
<li>The function <code>bstFromPreorder</code> is defined as a public member of the <code>Solution</code> class. It takes a vector of integers (<code>pre</code>) representing the preorder traversal of the BST and an optional <code>bound</code> parameter that defaults to <code>INT_MAX</code>.</li>
</ul>
</li>
<li>
<p><strong>Base Case</strong>:</p>
<ul>
<li>The function begins by checking two conditions:
<ul>
<li>If <code>i</code> equals the size of the preorder array (<code>pre.size()</code>), it indicates that we have processed all nodes, and the function returns <code>NULL</code>.</li>
<li>If the current value <code>pre[i]</code> exceeds the provided <code>bound</code>, it means that the value cannot be placed in the current subtree (as it violates the BST property). In this case, the function also returns <code>NULL</code>.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Creating a New Node</strong>:</p>
<ul>
<li>When both conditions are satisfied, we create a new <code>TreeNode</code> with the value <code>pre[i]</code>. After creating the node, we increment the index <code>i</code> to move to the next element in the preorder array.</li>
</ul>
</li>
<li>
<p><strong>Recursive Calls for Subtrees</strong>:</p>
<ul>
<li>The function then recursively constructs the left subtree by calling <code>bstFromPreorder</code> with the updated bound set to the value of the current node (<code>root-&gt;val</code>). This ensures that all values in the left subtree will be less than the current node&rsquo;s value.</li>
<li>After the left subtree is constructed, the function constructs the right subtree by calling <code>bstFromPreorder</code> with the original bound. This ensures that all values in the right subtree are greater than the current node&rsquo;s value.</li>
</ul>
</li>
<li>
<p><strong>Returning the Root</strong>:</p>
<ul>
<li>Finally, after constructing both subtrees, the function returns the root of the newly constructed BST.</li>
</ul>
</li>
</ol>
<h3 id="complexity-analysis">
  Complexity Analysis
  <a class="heading-link" href="#complexity-analysis">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li><strong>Time Complexity</strong>: The time complexity of this function is O(n), where <code>n</code> is the number of nodes in the input preorder array. Each node is processed exactly once, leading to a linear runtime.</li>
<li><strong>Space Complexity</strong>: The space complexity is O(h), where <code>h</code> is the height of the tree. This space is utilized by the call stack due to recursion. In the worst case (for a completely unbalanced tree), the height can be O(n). For a balanced tree, the height would be O(log n).</li>
</ul>
<h3 id="conclusion">
  Conclusion
  <a class="heading-link" href="#conclusion">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The <code>bstFromPreorder</code> function provides an efficient and elegant solution for reconstructing a binary search tree from a preorder traversal. By leveraging recursion and the properties of BSTs, the function successfully builds the tree while maintaining the required constraints on node values.</p>
<p>This approach highlights the utility of recursion in tree construction problems and demonstrates how properties of binary search trees can guide the reconstruction process. Understanding this method is beneficial for solving related problems in data structures and algorithms, especially those involving tree traversal and manipulation.</p>
<p>The implementation also underscores the importance of managing indices and bounds when working with recursive algorithms, allowing for clean and readable code. This technique can be adapted for various tree-related challenges, making it a versatile tool in algorithm design.</p>
<p>In summary, the <code>bstFromPreorder</code> function is a valuable contribution to the toolkit of anyone working with binary trees, enabling the efficient reconstruction of BSTs and facilitating further operations such as searching, insertion, and traversal in a structured manner.</p>
 
</div>
  

  <a class="heading-link" href="#hahahugoshortcode18s1hbhb">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/30WqiTVp8Kc?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<p>| <a href="grid47.xyz/leetcode_1009" >1009: Complement of Base 10 Integer</a> |</p>
<div class="notice tip">
  <div class="notice-title">
    <i class="fa-solid fa-lightbulb" aria-hidden="true"></i>Tip
  </div>
  <div class="notice-content">Unlock the power of patterns! Mastering one problem builds a pathway to solve many more. Dive into practice, and let each problem sharpen your skills. <a href="https://www.udemy.com/course/algorithms-and-data-structures-in-cpp/"  class="external-link" target="_blank" rel="noopener">Check out my Momentum Learning course at Udemy! 🚀 </a></div>
</div>


      </div>


      <footer>
        

<section class="see-also">
  
    
    
    
      <h3 id="see-also-in-leetcode">
        See also in Leetcode
        <a class="heading-link" href="#see-also-in-leetcode">
          <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
          <span class="sr-only">Link to heading</span>
        </a>
      </h3>
      <nav>
        <ul>
        
        
          
            <li>
              <a href="/posts/leetcode_1/">Leetcode 1: Two Sum</a>
            </li>
          
        
          
            <li>
              <a href="/posts/leetcode_2/">Leetcode 2: Add Two Numbers</a>
            </li>
          
        
          
            <li>
              <a href="/posts/leetcode_3/">Leetcode 3: Longest Substring Without Repeating Characters</a>
            </li>
          
        
          
            <li>
              <a href="/posts/leetcode_4/">Leetcode 4: Median of Two Sorted Arrays</a>
            </li>
          
        
          
            <li>
              <a href="/posts/leetcode_5/">Leetcode 5: Longest Palindromic Substring</a>
            </li>
          
        
          
            <li>
              <a href="/posts/leetcode_6/">Leetcode 6: Zigzag Conversion</a>
            </li>
          
        
        </ul>
      </nav>
    
  
</section>


        <div id="disqus_thread"></div>
<script>
  window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "grid47" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
    
    document.addEventListener('themeChanged', function (e) { 
        if (document.readyState == 'complete') {
          DISQUS.reset({ reload: true, config: disqus_config });
        }
    });
</script>
        
        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
      2019 -
    
    2024
     Mohammed Yasir Eramangadan 
    ·
    
    
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  

  

  

  

  

  

  

  

  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1LN7R4LHR1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1LN7R4LHR1');
</script>


  

  

  

  

  

  

  
</body>

</html>
