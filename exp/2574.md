### Problem Statement

The task is to calculate the **left-right difference** for each index in the array. For each index `i` in the array, the left-right difference is calculated as the absolute difference between the sum of the elements to the right of `i` and the sum of the elements to the left of `i`.

For example, for a given array `nums = [2, 3, 1, 4]`, the left-right difference for each index `i` is calculated as:

- Left sum is the sum of elements before index `i`
- Right sum is the sum of elements after index `i`

The result for each index `i` would be the absolute difference between the right and left sums.

### Approach

To solve this problem efficiently, we need to compute the left-right difference for each index of the array. A naive approach would involve computing the sum of the left and right parts separately for each index, which would result in a time complexity of O(n^2). However, we can optimize this process by leveraging prefix sums, reducing the time complexity to O(n).

#### Key Steps:
1. **Prefix Sum Array**:
   - Construct a prefix sum array that stores the cumulative sum of elements from the left. For any index `i`, the prefix sum at `i` represents the sum of all elements from index `0` to `i-1`.
   - This helps in calculating the sum of elements to the left of any index efficiently.

2. **Total Sum**:
   - Compute the total sum of the entire array. This will help in calculating the sum of elements to the right of any index by subtracting the prefix sum up to that index.

3. **Calculate Left-Right Difference**:
   - For each index `i`, calculate the left sum as the prefix sum at `i` and the right sum as the total sum minus the prefix sum at `i+1`. Then, compute the absolute difference between these two sums.

### Code Breakdown (Step by Step)

Let's break the code into parts to understand it in detail:

#### 1. **Initialization**:
```cpp
vector<int> sum(n + 1, 0), ans(n, 0);
```
- `sum[n + 1]`: This vector is used to store the prefix sums of the input array. The size of this vector is `n + 1` to accommodate the sum of elements from index `0` to `i` for all indices `i` from `0` to `n-1`. `sum[0]` will be `0` (representing the sum of elements before index `0`), and `sum[i + 1]` will store the sum of elements up to index `i`.
- `ans[n]`: This vector is used to store the final result (the left-right difference for each index).

#### 2. **Calculate Prefix Sums**:
```cpp
for (int i = 0; i < n; i++) {
    sum[i + 1] = nums[i] + sum[i];
}
```
- The prefix sum array is filled by iterating over the `nums` array and adding each element to the previous prefix sum (`sum[i]`). The updated value at `sum[i + 1]` represents the sum of the array elements from index `0` to `i`.

#### 3. **Compute the Total Sum**:
```cpp
int net = sum[n];
```
- `net` stores the total sum of all elements in the input array. It is obtained from `sum[n]`, which represents the cumulative sum of the entire array.

#### 4. **Calculate Left-Right Difference**:
```cpp
for (int i = 0; i < n; i++) {
    ans[i] = abs(net - sum[i + 1] - sum[i]);
}
```
- For each index `i`, the left sum is `sum[i]` (the sum of elements before `i`), and the right sum is `net - sum[i + 1]` (the sum of elements after `i`).
- The absolute difference between the left and right sums is calculated and stored in `ans[i]`.

#### 5. **Return the Result**:
```cpp
return ans;
```
- Finally, the function returns the `ans` array, which contains the left-right differences for each index in the input array.

### Complexity Analysis

#### Time Complexity:
- **Prefix Sum Calculation**: The loop that calculates the prefix sum array runs in O(n) time, where `n` is the size of the input array `nums`.
- **Left-Right Difference Calculation**: The second loop, which computes the left-right difference for each index, also runs in O(n) time.
- Overall, the time complexity is **O(n)**, which is efficient and optimal for this problem.

#### Space Complexity:
- The space complexity is O(n) due to the use of the `sum` and `ans` arrays, both of which have a size of `n + 1` and `n` respectively.
- Thus, the space complexity is **O(n)**.

### Conclusion

This solution efficiently calculates the left-right difference for each index in the input array using prefix sums. By calculating the prefix sums once, the solution reduces the problem to a linear scan of the array, resulting in a time complexity of O(n). The space complexity is also O(n) due to the need for storing the prefix sums and the final result. This approach is optimal and handles large inputs efficiently.