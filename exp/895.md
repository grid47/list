### Problem Statement

The problem asks us to implement a **frequency stack** data structure. The stack should support the following operations:
1. `push(val)`: Push an integer value `val` onto the stack.
2. `pop()`: Pop and return the integer value that has the highest frequency among all the elements in the stack. If there are multiple elements with the highest frequency, the one that was pushed most recently should be returned.
   
Additionally, the structure must efficiently handle these operations in **constant or logarithmic time**. We must design a solution that allows us to keep track of the frequencies of the elements and return the most frequent element quickly when the `pop` operation is called.

### Approach

To solve this problem, we need to efficiently manage both the frequencies of the elements in the stack and ensure that we can easily access the element with the highest frequency that was most recently pushed. We can achieve this by using a combination of:
1. **A frequency map (`freq`)** to store the frequency of each element.
2. **A stack map (`m`)** to group elements by their frequency, which allows us to quickly access the most recent element with the highest frequency.
3. **A variable (`maxFreq`)** to keep track of the current maximum frequency, so that we can quickly know which stack to pop from when the `pop` operation is called.

#### The Key Insight:
- When an element is pushed, we increment its frequency, update `maxFreq` if necessary, and push the element into the stack for its current frequency.
- When an element is popped, we access the stack for the current `maxFreq`, pop the most recent element, and update the frequency map and `maxFreq` accordingly.

### Code Breakdown (Step by Step)

Let's break down the code and explain how each part works:

1. **Class Definition**:
   ```cpp
   class FreqStack {
       unordered_map<int, int> freq;  // Maps an element to its frequency
       unordered_map<int, stack<int>> m;  // Maps a frequency to the stack of elements with that frequency
       int maxFreq = 0;  // Tracks the highest frequency
   public:
       FreqStack() {
           
       }
   ```

   - The class `FreqStack` maintains:
     - `freq`: A map that stores the frequency of each element.
     - `m`: A map that associates a frequency with a stack of elements having that frequency.
     - `maxFreq`: A variable to track the highest frequency among all elements.

2. **Push Operation**:
   ```cpp
   void push(int val) {
       maxFreq = max(maxFreq, ++freq[val]);  // Increment frequency of val, update maxFreq if needed
       m[freq[val]].push(val);  // Push val onto the stack corresponding to its frequency
   }
   ```
   - The `push` method is responsible for adding an element to the stack.
   - First, we increment the frequency of the element `val` in the `freq` map.
   - Then, we update `maxFreq` to ensure it reflects the highest frequency.
   - Finally, we push `val` onto the stack corresponding to its current frequency.

3. **Pop Operation**:
   ```cpp
   int pop() {
       int x = m[maxFreq].top();  // Get the element with the highest frequency
       m[maxFreq].pop();  // Remove the element from the stack
       if (!m[freq[x]--].size()) maxFreq--;  // Decrease frequency, and update maxFreq if the stack is empty
       return x;  // Return the element that was popped
   }
   ```

   - The `pop` method removes and returns the element with the highest frequency from the stack.
   - We retrieve the element `x` from the stack corresponding to `maxFreq`.
   - After popping, we check if the stack for the current frequency (`freq[x]`) is empty. If it is, we decrease `maxFreq` because there are no more elements with that frequency.
   - Finally, we return the element `x`.

4. **Initialization and Operations**:
   - The constructor `FreqStack()` initializes the data structures: the frequency map (`freq`), the stack map (`m`), and the variable `maxFreq`.
   - We can instantiate the stack as follows:
     ```cpp
     FreqStack* obj = new FreqStack();
     obj->push(val);  // Push elements onto the stack
     int param_2 = obj->pop();  // Pop and return the most frequent element
     ```

### Complexity

#### Time Complexity:
- **Push Operation**:
  - The `push` operation increments the frequency in the `freq` map and pushes the element onto the stack in the `m` map. Both operations take constant time: **O(1)**.
  
- **Pop Operation**:
  - The `pop` operation involves retrieving the most frequent element from the stack (`m[maxFreq].top()`), which is done in constant time: **O(1)**.
  - Decrementing the frequency and checking if the stack for that frequency is empty also takes constant time: **O(1)**.
  
- **Overall Time Complexity**: Both `push` and `pop` operations have constant time complexity: **O(1)**.

#### Space Complexity:
- We use two maps:
  - The `freq` map stores the frequency of each element. If there are `n` distinct elements, the space required is **O(n)**.
  - The `m` map stores stacks for each frequency. In the worst case, where every element has a unique frequency, the space required for the stacks would be proportional to the number of elements in the stack: **O(n)**.
  
- **Overall Space Complexity**: The space complexity is **O(n)**, where `n` is the number of elements in the stack.

### Conclusion

The `FreqStack` class provides an efficient implementation of a frequency stack, where both `push` and `pop` operations are handled in constant time. By using a frequency map to track the frequency of each element and a stack map to group elements by frequency, the solution efficiently manages the task of popping the most frequent (and most recently pushed) element. This approach optimizes the operations, making it highly suitable for scenarios where we need frequent retrieval of the most frequent element in a stack. With an optimal time complexity of **O(1)** for both operations and a space complexity of **O(n)**, this solution is both time and space efficient for handling large input sizes.